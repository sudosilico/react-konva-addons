import{r as a}from"./index.23fdd41a.js";import{K as V,G as k,R as f,a as q,T as h}from"./ReactKonvaCore.286c5b85.js";import{a as A,j as o,F as O}from"./jsx-runtime.ac26a6a6.js";function E(e,n){a.exports.useEffect(()=>{if(n)return;const i=new V.Animation(r=>{!r||e(r)});return i.start(),()=>{i.stop()}},[e,n])}function K(e){return e<0?0:e>1?1:e}function Y(e,n,i){return e+(n-e)*K(i)}function j(e,n,i,r,u){return Y(r,u,(e-n)/(i-n))}const p=e=>1e3/e,I=e=>1e3/e,T=p(144),_=p(60),L=p(30);function M(e){const n=a.exports.useRef(null),i=a.exports.useRef(null),r=a.exports.useRef(null),u=a.exports.useRef(null),g=a.exports.useRef(null),b=a.exports.useRef({times:[],points:[],maxValue:0,fpsAccumulator:0,fps:0,frames:0,fpsTextY:0}),c=a.exports.useCallback(l=>j(I(Math.max(l,.001)),0,200,e.height,0),[e.height]),S=a.exports.useCallback(l=>{const t=b.current,C=n.current,R=i.current,w=r.current,F=u.current,x=g.current;if(!t||!C||!R||!w||!F||!x)return;const m=Math.min(l.timeDiff,p(1));for(l.timeDiff>t.maxValue&&(t.maxValue=m);t.times.length<e.width-50;)t.times.push(0);for(let s=1;s<t.times.length;s++)t.times[s-1]=t.times[s];t.times[t.times.length-1]=m,t.points.length=0;for(let s=0;s<t.times.length;s++)t.points.push(s),t.points.push(c(t.times[s]));C.points(t.points),t.frames++;const d=500;if(t.fpsAccumulator+=m,t.fpsAccumulator>d){t.fpsAccumulator-=d,t.fps=t.frames,t.frames=0;const s=t.fps*(1e3/d);x.text(`- ${s} fps`),x.y(c(m)-5)}R.y(-5),w.y(c(_)-5),F.y(c(T)-5)},[e.width,c]);return E(S),A(O,{children:[o(q,{ref:n,stroke:"black",strokeWidth:1}),o(f,{width:50,height:e.height,fill:"white",opacity:.7}),o(f,{width:2,height:e.height,x:50,fill:"black",opacity:.5}),o(h,{ref:i,y:c(L),text:"30 fps -",x:10}),o(h,{ref:r,y:c(_),text:"60 fps -",x:10}),o(h,{ref:u,y:c(T),text:"144 fps -",x:3}),o(f,{x:e.width-50,width:50,height:e.height,fill:"white",opacity:1}),o(f,{width:2,height:e.height,x:e.width-52,fill:"black",opacity:.5}),o(h,{ref:g,text:"0 fps",x:e.width-(50-3),y:2})]})}const P={};function y(e){const{x:n,y:i,width:r,height:u}={...P,...e};return A(k,{x:n,y:i,opacity:.5,listening:!1,clipHeight:u,clipWidth:r,clipX:0,clipY:0,children:[o(f,{width:r,height:u,fill:"white"}),o(M,{width:r,height:u})]})}try{y.displayName="FrameCounter",y.__docgenInfo={description:"",displayName:"FrameCounter",props:{x:{defaultValue:null,description:"",name:"x",required:!1,type:{name:"number"}},y:{defaultValue:null,description:"",name:"y",required:!1,type:{name:"number"}},opacity:{defaultValue:null,description:"",name:"opacity",required:!1,type:{name:"number"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/components/FrameCounter.tsx#FrameCounter"]={docgenInfo:y.__docgenInfo,name:"FrameCounter",path:"src/components/FrameCounter.tsx#FrameCounter"})}catch{}export{y as F,E as u};
//# sourceMappingURL=FrameCounter.c631c8bf.js.map
