import{r as c}from"./index.23fdd41a.js";import{G as V,R as f,a as k,T as h}from"./ReactKonvaCore.97eb648a.js";import{u as q}from"./useKonvaAnimation.df8ea812.js";import{a as b,j as r,F as O}from"./jsx-runtime.ac26a6a6.js";function Y(e){return e<0?0:e>1?1:e}function E(e,i,s){return e+(i-e)*Y(s)}function j(e,i,s,o,a){return E(o,a,(e-i)/(s-i))}const p=e=>1e3/e,I=e=>1e3/e,T=p(144),_=p(60),K=p(30);function L(e){const i=c.exports.useRef(null),s=c.exports.useRef(null),o=c.exports.useRef(null),a=c.exports.useRef(null),g=c.exports.useRef(null),A=c.exports.useRef({times:[],points:[],maxValue:0,fpsAccumulator:0,fps:0,frames:0,fpsTextY:0}),u=c.exports.useCallback(l=>j(I(Math.max(l,.001)),0,200,e.height,0),[e.height]),S=c.exports.useCallback(l=>{const t=A.current,C=i.current,F=s.current,R=o.current,w=a.current,d=g.current;if(!t||!C||!F||!R||!w||!d)return;const m=Math.min(l.timeDiff,p(1));for(l.timeDiff>t.maxValue&&(t.maxValue=m);t.times.length<e.width-50;)t.times.push(0);for(let n=1;n<t.times.length;n++)t.times[n-1]=t.times[n];t.times[t.times.length-1]=m,t.points.length=0;for(let n=0;n<t.times.length;n++)t.points.push(n),t.points.push(u(t.times[n]));C.points(t.points),t.frames++;const x=500;if(t.fpsAccumulator+=m,t.fpsAccumulator>x){t.fpsAccumulator-=x,t.fps=t.frames,t.frames=0;const n=t.fps*(1e3/x);d.text(`- ${n} fps`),d.y(u(m)-5)}F.y(-5),R.y(u(_)-5),w.y(u(T)-5)},[e.width,u]);return q(S),b(O,{children:[r(k,{ref:i,stroke:"black",strokeWidth:1}),r(f,{width:50,height:e.height,fill:"white",opacity:.7}),r(f,{width:2,height:e.height,x:50,fill:"black",opacity:.5}),r(h,{ref:s,y:u(K),text:"30 fps -",x:10}),r(h,{ref:o,y:u(_),text:"60 fps -",x:10}),r(h,{ref:a,y:u(T),text:"144 fps -",x:3}),r(f,{x:e.width-50,width:50,height:e.height,fill:"white",opacity:1}),r(f,{width:2,height:e.height,x:e.width-52,fill:"black",opacity:.5}),r(h,{ref:g,text:"0 fps",x:e.width-(50-3),y:2})]})}const M={};function y(e){const{x:i,y:s,width:o,height:a}={...M,...e};return b(V,{x:i,y:s,opacity:.5,listening:!1,clipHeight:a,clipWidth:o,clipX:0,clipY:0,children:[r(f,{width:o,height:a,fill:"white"}),r(L,{width:o,height:a})]})}try{y.displayName="FrameCounter",y.__docgenInfo={description:"",displayName:"FrameCounter",props:{x:{defaultValue:null,description:"",name:"x",required:!1,type:{name:"number"}},y:{defaultValue:null,description:"",name:"y",required:!1,type:{name:"number"}},opacity:{defaultValue:null,description:"",name:"opacity",required:!1,type:{name:"number"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/components/FrameCounter/FrameCounter.tsx#FrameCounter"]={docgenInfo:y.__docgenInfo,name:"FrameCounter",path:"src/components/FrameCounter/FrameCounter.tsx#FrameCounter"})}catch{}export{y as F};
//# sourceMappingURL=FrameCounter.26d9eec9.js.map
