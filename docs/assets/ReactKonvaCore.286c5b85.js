import{r as ud,R as kt}from"./index.23fdd41a.js";var dd=Math.PI/180;function fd(){return typeof window!="undefined"&&({}.toString.call(window)==="[object Window]"||{}.toString.call(window)==="[object global]")}const Hr=typeof global!="undefined"?global:typeof window!="undefined"?window:typeof WorkerGlobalScope!="undefined"?self:{},V={_global:Hr,version:"8.3.10",isBrowser:fd(),isUnminified:/param/.test(function(h){}.toString()),dblClickWindow:400,getAngle(h){return V.angleDeg?h*dd:h},enableTrace:!1,pointerEventsEnabled:!0,autoDrawEnabled:!0,hitOnDragEnabled:!1,capturePointerEventsEnabled:!1,_mouseListenClick:!1,_touchListenClick:!1,_pointerListenClick:!1,_mouseInDblClickWindow:!1,_touchInDblClickWindow:!1,_pointerInDblClickWindow:!1,_mouseDblClickPointerId:null,_touchDblClickPointerId:null,_pointerDblClickPointerId:null,pixelRatio:typeof window!="undefined"&&window.devicePixelRatio||1,dragDistance:3,angleDeg:!0,showWarnings:!0,dragButtons:[0,1],isDragging(){return V.DD.isDragging},isDragReady(){return!!V.DD.node},document:Hr.document,_injectGlobal(h){Hr.Konva=h}},Re=h=>{V[h.prototype.getClassName()]=h};V._injectGlobal(V);class ot{constructor(e=[1,0,0,1,0,0]){this.dirty=!1,this.m=e&&e.slice()||[1,0,0,1,0,0]}reset(){this.m[0]=1,this.m[1]=0,this.m[2]=0,this.m[3]=1,this.m[4]=0,this.m[5]=0}copy(){return new ot(this.m)}copyInto(e){e.m[0]=this.m[0],e.m[1]=this.m[1],e.m[2]=this.m[2],e.m[3]=this.m[3],e.m[4]=this.m[4],e.m[5]=this.m[5]}point(e){var n=this.m;return{x:n[0]*e.x+n[2]*e.y+n[4],y:n[1]*e.x+n[3]*e.y+n[5]}}translate(e,n){return this.m[4]+=this.m[0]*e+this.m[2]*n,this.m[5]+=this.m[1]*e+this.m[3]*n,this}scale(e,n){return this.m[0]*=e,this.m[1]*=e,this.m[2]*=n,this.m[3]*=n,this}rotate(e){var n=Math.cos(e),a=Math.sin(e),s=this.m[0]*n+this.m[2]*a,l=this.m[1]*n+this.m[3]*a,u=this.m[0]*-a+this.m[2]*n,f=this.m[1]*-a+this.m[3]*n;return this.m[0]=s,this.m[1]=l,this.m[2]=u,this.m[3]=f,this}getTranslation(){return{x:this.m[4],y:this.m[5]}}skew(e,n){var a=this.m[0]+this.m[2]*n,s=this.m[1]+this.m[3]*n,l=this.m[2]+this.m[0]*e,u=this.m[3]+this.m[1]*e;return this.m[0]=a,this.m[1]=s,this.m[2]=l,this.m[3]=u,this}multiply(e){var n=this.m[0]*e.m[0]+this.m[2]*e.m[1],a=this.m[1]*e.m[0]+this.m[3]*e.m[1],s=this.m[0]*e.m[2]+this.m[2]*e.m[3],l=this.m[1]*e.m[2]+this.m[3]*e.m[3],u=this.m[0]*e.m[4]+this.m[2]*e.m[5]+this.m[4],f=this.m[1]*e.m[4]+this.m[3]*e.m[5]+this.m[5];return this.m[0]=n,this.m[1]=a,this.m[2]=s,this.m[3]=l,this.m[4]=u,this.m[5]=f,this}invert(){var e=1/(this.m[0]*this.m[3]-this.m[1]*this.m[2]),n=this.m[3]*e,a=-this.m[1]*e,s=-this.m[2]*e,l=this.m[0]*e,u=e*(this.m[2]*this.m[5]-this.m[3]*this.m[4]),f=e*(this.m[1]*this.m[4]-this.m[0]*this.m[5]);return this.m[0]=n,this.m[1]=a,this.m[2]=s,this.m[3]=l,this.m[4]=u,this.m[5]=f,this}getMatrix(){return this.m}decompose(){var e=this.m[0],n=this.m[1],a=this.m[2],s=this.m[3],l=this.m[4],u=this.m[5],f=e*s-n*a;let c={x:l,y:u,rotation:0,scaleX:0,scaleY:0,skewX:0,skewY:0};if(e!=0||n!=0){var p=Math.sqrt(e*e+n*n);c.rotation=n>0?Math.acos(e/p):-Math.acos(e/p),c.scaleX=p,c.scaleY=f/p,c.skewX=(e*a+n*s)/f,c.skewY=0}else if(a!=0||s!=0){var v=Math.sqrt(a*a+s*s);c.rotation=Math.PI/2-(s>0?Math.acos(-a/v):-Math.acos(a/v)),c.scaleX=f/v,c.scaleY=v,c.skewX=0,c.skewY=(e*a+n*s)/f}return c.rotation=P._getRotation(c.rotation),c}}var cd="[object Array]",gd="[object Number]",pd="[object String]",vd="[object Boolean]",md=Math.PI/180,yd=180/Math.PI,is="#",_d="",Sd="0",wd="Konva warning: ",Sl="Konva error: ",Cd="rgb(",as={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,132,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,255,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,203],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[119,128,144],slategrey:[119,128,144],snow:[255,255,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],transparent:[255,255,255,0],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,5]},xd=/rgb\((\d{1,3}),(\d{1,3}),(\d{1,3})\)/,Ei=[];const kd=typeof requestAnimationFrame!="undefined"&&requestAnimationFrame||function(h){setTimeout(h,60)},P={_isElement(h){return!!(h&&h.nodeType==1)},_isFunction(h){return!!(h&&h.constructor&&h.call&&h.apply)},_isPlainObject(h){return!!h&&h.constructor===Object},_isArray(h){return Object.prototype.toString.call(h)===cd},_isNumber(h){return Object.prototype.toString.call(h)===gd&&!isNaN(h)&&isFinite(h)},_isString(h){return Object.prototype.toString.call(h)===pd},_isBoolean(h){return Object.prototype.toString.call(h)===vd},isObject(h){return h instanceof Object},isValidSelector(h){if(typeof h!="string")return!1;var e=h[0];return e==="#"||e==="."||e===e.toUpperCase()},_sign(h){return h===0||h>0?1:-1},requestAnimFrame(h){Ei.push(h),Ei.length===1&&kd(function(){const e=Ei;Ei=[],e.forEach(function(n){n()})})},createCanvasElement(){var h=document.createElement("canvas");try{h.style=h.style||{}}catch{}return h},createImageElement(){return document.createElement("img")},_isInDocument(h){for(;h=h.parentNode;)if(h==document)return!0;return!1},_urlToImage(h,e){var n=P.createImageElement();n.onload=function(){e(n)},n.src=h},_rgbToHex(h,e,n){return((1<<24)+(h<<16)+(e<<8)+n).toString(16).slice(1)},_hexToRgb(h){h=h.replace(is,_d);var e=parseInt(h,16);return{r:e>>16&255,g:e>>8&255,b:e&255}},getRandomColor(){for(var h=(Math.random()*16777215<<0).toString(16);h.length<6;)h=Sd+h;return is+h},getRGB(h){var e;return h in as?(e=as[h],{r:e[0],g:e[1],b:e[2]}):h[0]===is?this._hexToRgb(h.substring(1)):h.substr(0,4)===Cd?(e=xd.exec(h.replace(/ /g,"")),{r:parseInt(e[1],10),g:parseInt(e[2],10),b:parseInt(e[3],10)}):{r:0,g:0,b:0}},colorToRGBA(h){return h=h||"black",P._namedColorToRBA(h)||P._hex3ColorToRGBA(h)||P._hex6ColorToRGBA(h)||P._rgbColorToRGBA(h)||P._rgbaColorToRGBA(h)||P._hslColorToRGBA(h)},_namedColorToRBA(h){var e=as[h.toLowerCase()];return e?{r:e[0],g:e[1],b:e[2],a:1}:null},_rgbColorToRGBA(h){if(h.indexOf("rgb(")===0){h=h.match(/rgb\(([^)]+)\)/)[1];var e=h.split(/ *, */).map(Number);return{r:e[0],g:e[1],b:e[2],a:1}}},_rgbaColorToRGBA(h){if(h.indexOf("rgba(")===0){h=h.match(/rgba\(([^)]+)\)/)[1];var e=h.split(/ *, */).map((n,a)=>n.slice(-1)==="%"?a===3?parseInt(n)/100:parseInt(n)/100*255:Number(n));return{r:e[0],g:e[1],b:e[2],a:e[3]}}},_hex6ColorToRGBA(h){if(h[0]==="#"&&h.length===7)return{r:parseInt(h.slice(1,3),16),g:parseInt(h.slice(3,5),16),b:parseInt(h.slice(5,7),16),a:1}},_hex3ColorToRGBA(h){if(h[0]==="#"&&h.length===4)return{r:parseInt(h[1]+h[1],16),g:parseInt(h[2]+h[2],16),b:parseInt(h[3]+h[3],16),a:1}},_hslColorToRGBA(h){if(/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.test(h)){const[e,...n]=/hsl\((\d+),\s*([\d.]+)%,\s*([\d.]+)%\)/g.exec(h),a=Number(n[0])/360,s=Number(n[1])/100,l=Number(n[2])/100;let u,f,c;if(s===0)return c=l*255,{r:Math.round(c),g:Math.round(c),b:Math.round(c),a:1};l<.5?u=l*(1+s):u=l+s-l*s;const p=2*l-u,v=[0,0,0];for(let S=0;S<3;S++)f=a+1/3*-(S-1),f<0&&f++,f>1&&f--,6*f<1?c=p+(u-p)*6*f:2*f<1?c=u:3*f<2?c=p+(u-p)*(2/3-f)*6:c=p,v[S]=c*255;return{r:Math.round(v[0]),g:Math.round(v[1]),b:Math.round(v[2]),a:1}}},haveIntersection(h,e){return!(e.x>h.x+h.width||e.x+e.width<h.x||e.y>h.y+h.height||e.y+e.height<h.y)},cloneObject(h){var e={};for(var n in h)this._isPlainObject(h[n])?e[n]=this.cloneObject(h[n]):this._isArray(h[n])?e[n]=this.cloneArray(h[n]):e[n]=h[n];return e},cloneArray(h){return h.slice(0)},degToRad(h){return h*md},radToDeg(h){return h*yd},_degToRad(h){return P.warn("Util._degToRad is removed. Please use public Util.degToRad instead."),P.degToRad(h)},_radToDeg(h){return P.warn("Util._radToDeg is removed. Please use public Util.radToDeg instead."),P.radToDeg(h)},_getRotation(h){return V.angleDeg?P.radToDeg(h):h},_capitalize(h){return h.charAt(0).toUpperCase()+h.slice(1)},throw(h){throw new Error(Sl+h)},error(h){console.error(Sl+h)},warn(h){!V.showWarnings||console.warn(wd+h)},each(h,e){for(var n in h)e(n,h[n])},_inRange(h,e,n){return e<=h&&h<n},_getProjectionToSegment(h,e,n,a,s,l){var u,f,c,p=(h-n)*(h-n)+(e-a)*(e-a);if(p==0)u=h,f=e,c=(s-n)*(s-n)+(l-a)*(l-a);else{var v=((s-h)*(n-h)+(l-e)*(a-e))/p;v<0?(u=h,f=e,c=(h-s)*(h-s)+(e-l)*(e-l)):v>1?(u=n,f=a,c=(n-s)*(n-s)+(a-l)*(a-l)):(u=h+v*(n-h),f=e+v*(a-e),c=(u-s)*(u-s)+(f-l)*(f-l))}return[u,f,c]},_getProjectionToLine(h,e,n){var a=P.cloneObject(h),s=Number.MAX_VALUE;return e.forEach(function(l,u){if(!(!n&&u===e.length-1)){var f=e[(u+1)%e.length],c=P._getProjectionToSegment(l.x,l.y,f.x,f.y,h.x,h.y),p=c[0],v=c[1],S=c[2];S<s&&(a.x=p,a.y=v,s=S)}}),a},_prepareArrayForTween(h,e,n){var a,s=[],l=[];if(h.length>e.length){var u=e;e=h,h=u}for(a=0;a<h.length;a+=2)s.push({x:h[a],y:h[a+1]});for(a=0;a<e.length;a+=2)l.push({x:e[a],y:e[a+1]});var f=[];return l.forEach(function(c){var p=P._getProjectionToLine(c,s,n);f.push(p.x),f.push(p.y)}),f},_prepareToStringify(h){var e;h.visitedByCircularReferenceRemoval=!0;for(var n in h)if(!!(h.hasOwnProperty(n)&&h[n]&&typeof h[n]=="object")){if(e=Object.getOwnPropertyDescriptor(h,n),h[n].visitedByCircularReferenceRemoval||P._isElement(h[n]))if(e.configurable)delete h[n];else return null;else if(P._prepareToStringify(h[n])===null)if(e.configurable)delete h[n];else return null}return delete h.visitedByCircularReferenceRemoval,h},_assign(h,e){for(var n in e)h[n]=e[n];return h},_getFirstPointerId(h){return h.touches?h.changedTouches[0].identifier:h.pointerId||999}};function ir(h){return P._isString(h)?'"'+h+'"':Object.prototype.toString.call(h)==="[object Number]"||P._isBoolean(h)?h:Object.prototype.toString.call(h)}function Yl(h){return h>255?255:h<0?0:Math.round(h)}function G(){if(V.isUnminified)return function(h,e){return P._isNumber(h)||P.warn(ir(h)+' is a not valid value for "'+e+'" attribute. The value should be a number.'),h}}function Xl(h){if(V.isUnminified)return function(e,n){let a=P._isNumber(e),s=P._isArray(e)&&e.length==h;return!a&&!s&&P.warn(ir(e)+' is a not valid value for "'+n+'" attribute. The value should be a number or Array<number>('+h+")"),e}}function Cs(){if(V.isUnminified)return function(h,e){var n=P._isNumber(h),a=h==="auto";return n||a||P.warn(ir(h)+' is a not valid value for "'+e+'" attribute. The value should be a number or "auto".'),h}}function Yr(){if(V.isUnminified)return function(h,e){return P._isString(h)||P.warn(ir(h)+' is a not valid value for "'+e+'" attribute. The value should be a string.'),h}}function Vl(){if(V.isUnminified)return function(h,e){const n=P._isString(h),a=Object.prototype.toString.call(h)==="[object CanvasGradient]"||h&&h.addColorStop;return n||a||P.warn(ir(h)+' is a not valid value for "'+e+'" attribute. The value should be a string or a native gradient.'),h}}function Pd(){if(V.isUnminified)return function(h,e){return P._isArray(h)?h.forEach(function(n){P._isNumber(n)||P.warn('"'+e+'" attribute has non numeric element '+n+". Make sure that all elements are numbers.")}):P.warn(ir(h)+' is a not valid value for "'+e+'" attribute. The value should be a array of numbers.'),h}}function Pt(){if(V.isUnminified)return function(h,e){var n=h===!0||h===!1;return n||P.warn(ir(h)+' is a not valid value for "'+e+'" attribute. The value should be a boolean.'),h}}function Ed(h){if(V.isUnminified)return function(e,n){return P.isObject(e)||P.warn(ir(e)+' is a not valid value for "'+n+'" attribute. The value should be an object with properties '+h),e}}var vn="get",mn="set";const w={addGetterSetter(h,e,n,a,s){w.addGetter(h,e,n),w.addSetter(h,e,a,s),w.addOverloadedGetterSetter(h,e)},addGetter(h,e,n){var a=vn+P._capitalize(e);h.prototype[a]=h.prototype[a]||function(){var s=this.attrs[e];return s===void 0?n:s}},addSetter(h,e,n,a){var s=mn+P._capitalize(e);h.prototype[s]||w.overWriteSetter(h,e,n,a)},overWriteSetter(h,e,n,a){var s=mn+P._capitalize(e);h.prototype[s]=function(l){return n&&l!==void 0&&l!==null&&(l=n.call(this,l,e)),this._setAttr(e,l),a&&a.call(this),this}},addComponentsGetterSetter(h,e,n,a,s){var l=n.length,u=P._capitalize,f=vn+u(e),c=mn+u(e),p,v;h.prototype[f]=function(){var y={};for(p=0;p<l;p++)v=n[p],y[v]=this.getAttr(e+u(v));return y};var S=Ed(n);h.prototype[c]=function(y){var x=this.attrs[e],_;a&&(y=a.call(this,y)),S&&S.call(this,y,e);for(_ in y)!y.hasOwnProperty(_)||this._setAttr(e+u(_),y[_]);return this._fireChangeEvent(e,x,y),s&&s.call(this),this},w.addOverloadedGetterSetter(h,e)},addOverloadedGetterSetter(h,e){var n=P._capitalize(e),a=mn+n,s=vn+n;h.prototype[e]=function(){return arguments.length?(this[a](arguments[0]),this):this[s]()}},addDeprecatedGetterSetter(h,e,n,a){P.error("Adding deprecated "+e);var s=vn+P._capitalize(e),l=e+" property is deprecated and will be removed soon. Look at Konva change log for more information.";h.prototype[s]=function(){P.error(l);var u=this.attrs[e];return u===void 0?n:u},w.addSetter(h,e,a,function(){P.error(l)}),w.addOverloadedGetterSetter(h,e)},backCompat(h,e){P.each(e,function(n,a){var s=h.prototype[a],l=vn+P._capitalize(n),u=mn+P._capitalize(n);function f(){s.apply(this,arguments),P.error('"'+n+'" method is deprecated and will be removed soon. Use ""'+a+'" instead.')}h.prototype[n]=f,h.prototype[l]=f,h.prototype[u]=f})},afterSetFilter(){this._filterUpToDate=!1}};function Td(h){var e=[],n=h.length,a=P,s,l;for(s=0;s<n;s++)l=h[s],a._isNumber(l)?l=Math.round(l*1e3)/1e3:a._isString(l)||(l=l+""),e.push(l);return e}var wl=",",Rd="(",Ad=")",Md="([",Ld="])",Id=";",Nd="()",Od="=",Cl=["arc","arcTo","beginPath","bezierCurveTo","clearRect","clip","closePath","createLinearGradient","createPattern","createRadialGradient","drawImage","ellipse","fill","fillText","getImageData","createImageData","lineTo","moveTo","putImageData","quadraticCurveTo","rect","restore","rotate","save","scale","setLineDash","setTransform","stroke","strokeText","transform","translate"],Gd=["fillStyle","strokeStyle","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","lineCap","lineDashOffset","lineJoin","lineWidth","miterLimit","font","textAlign","textBaseline","globalAlpha","globalCompositeOperation","imageSmoothingEnabled"];const Dd=100;class Ui{constructor(e){this.canvas=e,this._context=e._canvas.getContext("2d"),V.enableTrace&&(this.traceArr=[],this._enableTrace())}fillShape(e){e.fillEnabled()&&this._fill(e)}_fill(e){}strokeShape(e){e.hasStroke()&&this._stroke(e)}_stroke(e){}fillStrokeShape(e){e.attrs.fillAfterStrokeEnabled?(this.strokeShape(e),this.fillShape(e)):(this.fillShape(e),this.strokeShape(e))}getTrace(e,n){var a=this.traceArr,s=a.length,l="",u,f,c,p;for(u=0;u<s;u++)f=a[u],c=f.method,c?(p=f.args,l+=c,e?l+=Nd:P._isArray(p[0])?l+=Md+p.join(wl)+Ld:(n&&(p=p.map(v=>typeof v=="number"?Math.floor(v):v)),l+=Rd+p.join(wl)+Ad)):(l+=f.property,e||(l+=Od+f.val)),l+=Id;return l}clearTrace(){this.traceArr=[]}_trace(e){var n=this.traceArr,a;n.push(e),a=n.length,a>=Dd&&n.shift()}reset(){var e=this.getCanvas().getPixelRatio();this.setTransform(1*e,0,0,1*e,0,0)}getCanvas(){return this.canvas}clear(e){var n=this.getCanvas();e?this.clearRect(e.x||0,e.y||0,e.width||0,e.height||0):this.clearRect(0,0,n.getWidth()/n.pixelRatio,n.getHeight()/n.pixelRatio)}_applyLineCap(e){var n=e.getLineCap();n&&this.setAttr("lineCap",n)}_applyOpacity(e){var n=e.getAbsoluteOpacity();n!==1&&this.setAttr("globalAlpha",n)}_applyLineJoin(e){var n=e.attrs.lineJoin;n&&this.setAttr("lineJoin",n)}setAttr(e,n){this._context[e]=n}arc(e,n,a,s,l,u){this._context.arc(e,n,a,s,l,u)}arcTo(e,n,a,s,l){this._context.arcTo(e,n,a,s,l)}beginPath(){this._context.beginPath()}bezierCurveTo(e,n,a,s,l,u){this._context.bezierCurveTo(e,n,a,s,l,u)}clearRect(e,n,a,s){this._context.clearRect(e,n,a,s)}clip(){this._context.clip()}closePath(){this._context.closePath()}createImageData(e,n){var a=arguments;if(a.length===2)return this._context.createImageData(e,n);if(a.length===1)return this._context.createImageData(e)}createLinearGradient(e,n,a,s){return this._context.createLinearGradient(e,n,a,s)}createPattern(e,n){return this._context.createPattern(e,n)}createRadialGradient(e,n,a,s,l,u){return this._context.createRadialGradient(e,n,a,s,l,u)}drawImage(e,n,a,s,l,u,f,c,p){var v=arguments,S=this._context;v.length===3?S.drawImage(e,n,a):v.length===5?S.drawImage(e,n,a,s,l):v.length===9&&S.drawImage(e,n,a,s,l,u,f,c,p)}ellipse(e,n,a,s,l,u,f,c){this._context.ellipse(e,n,a,s,l,u,f,c)}isPointInPath(e,n){return this._context.isPointInPath(e,n)}fill(e){e?this._context.fill(e):this._context.fill()}fillRect(e,n,a,s){this._context.fillRect(e,n,a,s)}strokeRect(e,n,a,s){this._context.strokeRect(e,n,a,s)}fillText(e,n,a,s){s?this._context.fillText(e,n,a,s):this._context.fillText(e,n,a)}measureText(e){return this._context.measureText(e)}getImageData(e,n,a,s){return this._context.getImageData(e,n,a,s)}lineTo(e,n){this._context.lineTo(e,n)}moveTo(e,n){this._context.moveTo(e,n)}rect(e,n,a,s){this._context.rect(e,n,a,s)}putImageData(e,n,a){this._context.putImageData(e,n,a)}quadraticCurveTo(e,n,a,s){this._context.quadraticCurveTo(e,n,a,s)}restore(){this._context.restore()}rotate(e){this._context.rotate(e)}save(){this._context.save()}scale(e,n){this._context.scale(e,n)}setLineDash(e){this._context.setLineDash?this._context.setLineDash(e):"mozDash"in this._context?this._context.mozDash=e:"webkitLineDash"in this._context&&(this._context.webkitLineDash=e)}getLineDash(){return this._context.getLineDash()}setTransform(e,n,a,s,l,u){this._context.setTransform(e,n,a,s,l,u)}stroke(e){e?this._context.stroke(e):this._context.stroke()}strokeText(e,n,a,s){this._context.strokeText(e,n,a,s)}transform(e,n,a,s,l,u){this._context.transform(e,n,a,s,l,u)}translate(e,n){this._context.translate(e,n)}_enableTrace(){var e=this,n=Cl.length,a=this.setAttr,s,l,u=function(f){var c=e[f],p;e[f]=function(){return l=Td(Array.prototype.slice.call(arguments,0)),p=c.apply(e,arguments),e._trace({method:f,args:l}),p}};for(s=0;s<n;s++)u(Cl[s]);e.setAttr=function(){a.apply(e,arguments);var f=arguments[0],c=arguments[1];(f==="shadowOffsetX"||f==="shadowOffsetY"||f==="shadowBlur")&&(c=c/this.canvas.getPixelRatio()),e._trace({property:f,val:c})}}_applyGlobalCompositeOperation(e){const n=e.attrs.globalCompositeOperation;var a=!n||n==="source-over";a||this.setAttr("globalCompositeOperation",n)}}Gd.forEach(function(h){Object.defineProperty(Ui.prototype,h,{get(){return this._context[h]},set(e){this._context[h]=e}})});class zd extends Ui{_fillColor(e){var n=e.fill();this.setAttr("fillStyle",n),e._fillFunc(this)}_fillPattern(e){this.setAttr("fillStyle",e._getFillPattern()),e._fillFunc(this)}_fillLinearGradient(e){var n=e._getLinearGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fillRadialGradient(e){var n=e._getRadialGradient();n&&(this.setAttr("fillStyle",n),e._fillFunc(this))}_fill(e){var n=e.fill(),a=e.getFillPriority();if(n&&a==="color"){this._fillColor(e);return}var s=e.getFillPatternImage();if(s&&a==="pattern"){this._fillPattern(e);return}var l=e.getFillLinearGradientColorStops();if(l&&a==="linear-gradient"){this._fillLinearGradient(e);return}var u=e.getFillRadialGradientColorStops();if(u&&a==="radial-gradient"){this._fillRadialGradient(e);return}n?this._fillColor(e):s?this._fillPattern(e):l?this._fillLinearGradient(e):u&&this._fillRadialGradient(e)}_strokeLinearGradient(e){var n=e.getStrokeLinearGradientStartPoint(),a=e.getStrokeLinearGradientEndPoint(),s=e.getStrokeLinearGradientColorStops(),l=this.createLinearGradient(n.x,n.y,a.x,a.y);if(s){for(var u=0;u<s.length;u+=2)l.addColorStop(s[u],s[u+1]);this.setAttr("strokeStyle",l)}}_stroke(e){var n=e.dash(),a=e.getStrokeScaleEnabled();if(e.hasStroke()){if(!a){this.save();var s=this.getCanvas().getPixelRatio();this.setTransform(s,0,0,s,0,0)}this._applyLineCap(e),n&&e.dashEnabled()&&(this.setLineDash(n),this.setAttr("lineDashOffset",e.dashOffset())),this.setAttr("lineWidth",e.strokeWidth()),e.getShadowForStrokeEnabled()||this.setAttr("shadowColor","rgba(0,0,0,0)");var l=e.getStrokeLinearGradientColorStops();l?this._strokeLinearGradient(e):this.setAttr("strokeStyle",e.stroke()),e._strokeFunc(this),a||this.restore()}}_applyShadow(e){var n,a,s,l=(n=e.getShadowRGBA())!==null&&n!==void 0?n:"black",u=(a=e.getShadowBlur())!==null&&a!==void 0?a:5,f=(s=e.getShadowOffset())!==null&&s!==void 0?s:{x:0,y:0},c=e.getAbsoluteScale(),p=this.canvas.getPixelRatio(),v=c.x*p,S=c.y*p;this.setAttr("shadowColor",l),this.setAttr("shadowBlur",u*Math.min(Math.abs(v),Math.abs(S))),this.setAttr("shadowOffsetX",f.x*v),this.setAttr("shadowOffsetY",f.y*S)}}class Fd extends Ui{_fill(e){this.save(),this.setAttr("fillStyle",e.colorKey),e._fillFuncHit(this),this.restore()}strokeShape(e){e.hasHitStroke()&&this._stroke(e)}_stroke(e){if(e.hasHitStroke()){var n=e.getStrokeScaleEnabled();if(!n){this.save();var a=this.getCanvas().getPixelRatio();this.setTransform(a,0,0,a,0,0)}this._applyLineCap(e);var s=e.hitStrokeWidth(),l=s==="auto"?e.strokeWidth():s;this.setAttr("lineWidth",l),this.setAttr("strokeStyle",e.colorKey),e._strokeFuncHit(this),n||this.restore()}}}var Ti;function bd(){if(Ti)return Ti;var h=P.createCanvasElement(),e=h.getContext("2d");return Ti=function(){var n=V._global.devicePixelRatio||1,a=e.webkitBackingStorePixelRatio||e.mozBackingStorePixelRatio||e.msBackingStorePixelRatio||e.oBackingStorePixelRatio||e.backingStorePixelRatio||1;return n/a}(),Ti}class Wi{constructor(e){this.pixelRatio=1,this.width=0,this.height=0,this.isCache=!1;var n=e||{},a=n.pixelRatio||V.pixelRatio||bd();this.pixelRatio=a,this._canvas=P.createCanvasElement(),this._canvas.style.padding="0",this._canvas.style.margin="0",this._canvas.style.border="0",this._canvas.style.background="transparent",this._canvas.style.position="absolute",this._canvas.style.top="0",this._canvas.style.left="0"}getContext(){return this.context}getPixelRatio(){return this.pixelRatio}setPixelRatio(e){var n=this.pixelRatio;this.pixelRatio=e,this.setSize(this.getWidth()/n,this.getHeight()/n)}setWidth(e){this.width=this._canvas.width=e*this.pixelRatio,this._canvas.style.width=e+"px";var n=this.pixelRatio,a=this.getContext()._context;a.scale(n,n)}setHeight(e){this.height=this._canvas.height=e*this.pixelRatio,this._canvas.style.height=e+"px";var n=this.pixelRatio,a=this.getContext()._context;a.scale(n,n)}getWidth(){return this.width}getHeight(){return this.height}setSize(e,n){this.setWidth(e||0),this.setHeight(n||0)}toDataURL(e,n){try{return this._canvas.toDataURL(e,n)}catch{try{return this._canvas.toDataURL()}catch(s){return P.error("Unable to get data URL. "+s.message+" For more info read https://konvajs.org/docs/posts/Tainted_Canvas.html."),""}}}}w.addGetterSetter(Wi,"pixelRatio",void 0,G());class Ur extends Wi{constructor(e={width:0,height:0}){super(e),this.context=new zd(this),this.setSize(e.width,e.height)}}class xs extends Wi{constructor(e={width:0,height:0}){super(e),this.hitCanvas=!0,this.context=new Fd(this),this.setSize(e.width,e.height)}}const ce={get isDragging(){var h=!1;return ce._dragElements.forEach(e=>{e.dragStatus==="dragging"&&(h=!0)}),h},justDragged:!1,get node(){var h;return ce._dragElements.forEach(e=>{h=e.node}),h},_dragElements:new Map,_drag(h){const e=[];ce._dragElements.forEach((n,a)=>{const{node:s}=n,l=s.getStage();l.setPointersPositions(h),n.pointerId===void 0&&(n.pointerId=P._getFirstPointerId(h));const u=l._changedPointerPositions.find(p=>p.id===n.pointerId);if(!!u){if(n.dragStatus!=="dragging"){var f=s.dragDistance(),c=Math.max(Math.abs(u.x-n.startPointerPos.x),Math.abs(u.y-n.startPointerPos.y));if(c<f||(s.startDrag({evt:h}),!s.isDragging()))return}s._setDragPosition(h,n),e.push(s)}}),e.forEach(n=>{n.fire("dragmove",{type:"dragmove",target:n,evt:h},!0)})},_endDragBefore(h){ce._dragElements.forEach(e=>{const{node:n}=e,a=n.getStage();if(h&&a.setPointersPositions(h),!a._changedPointerPositions.find(u=>u.id===e.pointerId))return;(e.dragStatus==="dragging"||e.dragStatus==="stopped")&&(ce.justDragged=!0,V._mouseListenClick=!1,V._touchListenClick=!1,V._pointerListenClick=!1,e.dragStatus="stopped");const l=e.node.getLayer()||e.node instanceof V.Stage&&e.node;l&&l.batchDraw()})},_endDragAfter(h){ce._dragElements.forEach((e,n)=>{e.dragStatus==="stopped"&&e.node.fire("dragend",{type:"dragend",target:e.node,evt:h},!0),e.dragStatus!=="dragging"&&ce._dragElements.delete(n)})}};V.isBrowser&&(window.addEventListener("mouseup",ce._endDragBefore,!0),window.addEventListener("touchend",ce._endDragBefore,!0),window.addEventListener("mousemove",ce._drag),window.addEventListener("touchmove",ce._drag),window.addEventListener("mouseup",ce._endDragAfter,!1),window.addEventListener("touchend",ce._endDragAfter,!1));var Fi="absoluteOpacity",Ri="allEventListeners",Wt="absoluteTransform",xl="absoluteScale",yn="canvas",Bd="Change",Hd="children",Ud="konva",cs="listening",kl="mouseenter",Pl="mouseleave",El="set",Tl="Shape",bi=" ",Rl="stage",nr="transform",Wd="Stage",gs="visible",Yd=["xChange.konva","yChange.konva","scaleXChange.konva","scaleYChange.konva","skewXChange.konva","skewYChange.konva","rotationChange.konva","offsetXChange.konva","offsetYChange.konva","transformsEnabledChange.konva"].join(bi);let Xd=1;class z{constructor(e){this._id=Xd++,this.eventListeners={},this.attrs={},this.index=0,this._allEventListeners=null,this.parent=null,this._cache=new Map,this._attachedDepsListeners=new Map,this._lastPos=null,this._batchingTransformChange=!1,this._needClearTransformCache=!1,this._filterUpToDate=!1,this._isUnderCache=!1,this._dragEventId=null,this._shouldFireChangeEvents=!1,this.setAttrs(e),this._shouldFireChangeEvents=!0}hasChildren(){return!1}_clearCache(e){(e===nr||e===Wt)&&this._cache.get(e)?this._cache.get(e).dirty=!0:e?this._cache.delete(e):this._cache.clear()}_getCache(e,n){var a=this._cache.get(e),s=e===nr||e===Wt,l=a===void 0||s&&a.dirty===!0;return l&&(a=n.call(this),this._cache.set(e,a)),a}_calculate(e,n,a){if(!this._attachedDepsListeners.get(e)){const s=n.map(l=>l+"Change.konva").join(bi);this.on(s,()=>{this._clearCache(e)}),this._attachedDepsListeners.set(e,!0)}return this._getCache(e,a)}_getCanvasCache(){return this._cache.get(yn)}_clearSelfAndDescendantCache(e){this._clearCache(e),e===Wt&&this.fire("absoluteTransformChange")}clearCache(){return this._cache.delete(yn),this._clearSelfAndDescendantCache(),this._requestDraw(),this}cache(e){var n=e||{},a={};(n.x===void 0||n.y===void 0||n.width===void 0||n.height===void 0)&&(a=this.getClientRect({skipTransform:!0,relativeTo:this.getParent()}));var s=Math.ceil(n.width||a.width),l=Math.ceil(n.height||a.height),u=n.pixelRatio,f=n.x===void 0?Math.floor(a.x):n.x,c=n.y===void 0?Math.floor(a.y):n.y,p=n.offset||0,v=n.drawBorder||!1,S=n.hitCanvasPixelRatio||1;if(!s||!l){P.error("Can not cache the node. Width or height of the node equals 0. Caching is skipped.");return}s+=p*2+1,l+=p*2+1,f-=p,c-=p;var y=new Ur({pixelRatio:u,width:s,height:l}),x=new Ur({pixelRatio:u,width:0,height:0}),_=new xs({pixelRatio:S,width:s,height:l}),A=y.getContext(),E=_.getContext();return _.isCache=!0,y.isCache=!0,this._cache.delete(yn),this._filterUpToDate=!1,n.imageSmoothingEnabled===!1&&(y.getContext()._context.imageSmoothingEnabled=!1,x.getContext()._context.imageSmoothingEnabled=!1),A.save(),E.save(),A.translate(-f,-c),E.translate(-f,-c),this._isUnderCache=!0,this._clearSelfAndDescendantCache(Fi),this._clearSelfAndDescendantCache(xl),this.drawScene(y,this),this.drawHit(_,this),this._isUnderCache=!1,A.restore(),E.restore(),v&&(A.save(),A.beginPath(),A.rect(0,0,s,l),A.closePath(),A.setAttr("strokeStyle","red"),A.setAttr("lineWidth",5),A.stroke(),A.restore()),this._cache.set(yn,{scene:y,filter:x,hit:_,x:f,y:c}),this._requestDraw(),this}isCached(){return this._cache.has(yn)}getClientRect(e){throw new Error('abstract "getClientRect" method call')}_transformedRect(e,n){var a=[{x:e.x,y:e.y},{x:e.x+e.width,y:e.y},{x:e.x+e.width,y:e.y+e.height},{x:e.x,y:e.y+e.height}],s,l,u,f,c=this.getAbsoluteTransform(n);return a.forEach(function(p){var v=c.point(p);s===void 0&&(s=u=v.x,l=f=v.y),s=Math.min(s,v.x),l=Math.min(l,v.y),u=Math.max(u,v.x),f=Math.max(f,v.y)}),{x:s,y:l,width:u-s,height:f-l}}_drawCachedSceneCanvas(e){e.save(),e._applyOpacity(this),e._applyGlobalCompositeOperation(this);const n=this._getCanvasCache();e.translate(n.x,n.y);var a=this._getCachedSceneCanvas(),s=a.pixelRatio;e.drawImage(a._canvas,0,0,a.width/s,a.height/s),e.restore()}_drawCachedHitCanvas(e){var n=this._getCanvasCache(),a=n.hit;e.save(),e.translate(n.x,n.y),e.drawImage(a._canvas,0,0,a.width/a.pixelRatio,a.height/a.pixelRatio),e.restore()}_getCachedSceneCanvas(){var e=this.filters(),n=this._getCanvasCache(),a=n.scene,s=n.filter,l=s.getContext(),u,f,c,p;if(e){if(!this._filterUpToDate){var v=a.pixelRatio;s.setSize(a.width/a.pixelRatio,a.height/a.pixelRatio);try{for(u=e.length,l.clear(),l.drawImage(a._canvas,0,0,a.getWidth()/v,a.getHeight()/v),f=l.getImageData(0,0,s.getWidth(),s.getHeight()),c=0;c<u;c++){if(p=e[c],typeof p!="function"){P.error("Filter should be type of function, but got "+typeof p+" instead. Please check correct filters");continue}p.call(this,f),l.putImageData(f,0,0)}}catch(S){P.error("Unable to apply filter. "+S.message+" This post my help you https://konvajs.org/docs/posts/Tainted_Canvas.html.")}this._filterUpToDate=!0}return s}return a}on(e,n){if(this._cache&&this._cache.delete(Ri),arguments.length===3)return this._delegate.apply(this,arguments);var a=e.split(bi),s=a.length,l,u,f,c,p;for(l=0;l<s;l++)u=a[l],f=u.split("."),c=f[0],p=f[1]||"",this.eventListeners[c]||(this.eventListeners[c]=[]),this.eventListeners[c].push({name:p,handler:n});return this}off(e,n){var a=(e||"").split(bi),s=a.length,l,u,f,c,p,v;if(this._cache&&this._cache.delete(Ri),!e)for(u in this.eventListeners)this._off(u);for(l=0;l<s;l++)if(f=a[l],c=f.split("."),p=c[0],v=c[1],p)this.eventListeners[p]&&this._off(p,v,n);else for(u in this.eventListeners)this._off(u,v,n);return this}dispatchEvent(e){var n={target:this,type:e.type,evt:e};return this.fire(e.type,n),this}addEventListener(e,n){return this.on(e,function(a){n.call(this,a.evt)}),this}removeEventListener(e){return this.off(e),this}_delegate(e,n,a){var s=this;this.on(e,function(l){for(var u=l.target.findAncestors(n,!0,s),f=0;f<u.length;f++)l=P.cloneObject(l),l.currentTarget=u[f],a.call(u[f],l)})}remove(){return this.isDragging()&&this.stopDrag(),ce._dragElements.delete(this._id),this._remove(),this}_clearCaches(){this._clearSelfAndDescendantCache(Wt),this._clearSelfAndDescendantCache(Fi),this._clearSelfAndDescendantCache(xl),this._clearSelfAndDescendantCache(Rl),this._clearSelfAndDescendantCache(gs),this._clearSelfAndDescendantCache(cs)}_remove(){this._clearCaches();var e=this.getParent();e&&e.children&&(e.children.splice(this.index,1),e._setChildrenIndices(),this.parent=null)}destroy(){return this.remove(),this}getAttr(e){var n="get"+P._capitalize(e);return P._isFunction(this[n])?this[n]():this.attrs[e]}getAncestors(){for(var e=this.getParent(),n=[];e;)n.push(e),e=e.getParent();return n}getAttrs(){return this.attrs||{}}setAttrs(e){return this._batchTransformChanges(()=>{var n,a;if(!e)return this;for(n in e)n!==Hd&&(a=El+P._capitalize(n),P._isFunction(this[a])?this[a](e[n]):this._setAttr(n,e[n]))}),this}isListening(){return this._getCache(cs,this._isListening)}_isListening(e){if(!this.listening())return!1;const a=this.getParent();return a&&a!==e&&this!==e?a._isListening(e):!0}isVisible(){return this._getCache(gs,this._isVisible)}_isVisible(e){if(!this.visible())return!1;const a=this.getParent();return a&&a!==e&&this!==e?a._isVisible(e):!0}shouldDrawHit(e,n=!1){if(e)return this._isVisible(e)&&this._isListening(e);var a=this.getLayer(),s=!1;ce._dragElements.forEach(u=>{u.dragStatus==="dragging"&&(u.node.nodeType==="Stage"||u.node.getLayer()===a)&&(s=!0)});var l=!n&&!V.hitOnDragEnabled&&s;return this.isListening()&&this.isVisible()&&!l}show(){return this.visible(!0),this}hide(){return this.visible(!1),this}getZIndex(){return this.index||0}getAbsoluteZIndex(){var e=this.getDepth(),n=this,a=0,s,l,u,f;function c(p){for(s=[],l=p.length,u=0;u<l;u++)f=p[u],a++,f.nodeType!==Tl&&(s=s.concat(f.getChildren().slice())),f._id===n._id&&(u=l);s.length>0&&s[0].getDepth()<=e&&c(s)}return n.nodeType!==Wd&&c(n.getStage().getChildren()),a}getDepth(){for(var e=0,n=this.parent;n;)e++,n=n.parent;return e}_batchTransformChanges(e){this._batchingTransformChange=!0,e(),this._batchingTransformChange=!1,this._needClearTransformCache&&(this._clearCache(nr),this._clearSelfAndDescendantCache(Wt)),this._needClearTransformCache=!1}setPosition(e){return this._batchTransformChanges(()=>{this.x(e.x),this.y(e.y)}),this}getPosition(){return{x:this.x(),y:this.y()}}getRelativePointerPosition(){if(!this.getStage())return null;var e=this.getStage().getPointerPosition();if(!e)return null;var n=this.getAbsoluteTransform().copy();return n.invert(),n.point(e)}getAbsolutePosition(e){let n=!1,a=this.parent;for(;a;){if(a.isCached()){n=!0;break}a=a.parent}n&&!e&&(e=!0);var s=this.getAbsoluteTransform(e).getMatrix(),l=new ot,u=this.offset();return l.m=s.slice(),l.translate(u.x,u.y),l.getTranslation()}setAbsolutePosition(e){var n=this._clearTransform();this.attrs.x=n.x,this.attrs.y=n.y,delete n.x,delete n.y,this._clearCache(nr);var a=this._getAbsoluteTransform().copy();return a.invert(),a.translate(e.x,e.y),e={x:this.attrs.x+a.getTranslation().x,y:this.attrs.y+a.getTranslation().y},this._setTransform(n),this.setPosition({x:e.x,y:e.y}),this._clearCache(nr),this._clearSelfAndDescendantCache(Wt),this}_setTransform(e){var n;for(n in e)this.attrs[n]=e[n]}_clearTransform(){var e={x:this.x(),y:this.y(),rotation:this.rotation(),scaleX:this.scaleX(),scaleY:this.scaleY(),offsetX:this.offsetX(),offsetY:this.offsetY(),skewX:this.skewX(),skewY:this.skewY()};return this.attrs.x=0,this.attrs.y=0,this.attrs.rotation=0,this.attrs.scaleX=1,this.attrs.scaleY=1,this.attrs.offsetX=0,this.attrs.offsetY=0,this.attrs.skewX=0,this.attrs.skewY=0,e}move(e){var n=e.x,a=e.y,s=this.x(),l=this.y();return n!==void 0&&(s+=n),a!==void 0&&(l+=a),this.setPosition({x:s,y:l}),this}_eachAncestorReverse(e,n){var a=[],s=this.getParent(),l,u;if(!(n&&n._id===this._id)){for(a.unshift(this);s&&(!n||s._id!==n._id);)a.unshift(s),s=s.parent;for(l=a.length,u=0;u<l;u++)e(a[u])}}rotate(e){return this.rotation(this.rotation()+e),this}moveToTop(){if(!this.parent)return P.warn("Node has no parent. moveToTop function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.push(this),this.parent._setChildrenIndices(),!0):!1}moveUp(){if(!this.parent)return P.warn("Node has no parent. moveUp function is ignored."),!1;var e=this.index,n=this.parent.getChildren().length;return e<n-1?(this.parent.children.splice(e,1),this.parent.children.splice(e+1,0,this),this.parent._setChildrenIndices(),!0):!1}moveDown(){if(!this.parent)return P.warn("Node has no parent. moveDown function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.splice(e-1,0,this),this.parent._setChildrenIndices(),!0):!1}moveToBottom(){if(!this.parent)return P.warn("Node has no parent. moveToBottom function is ignored."),!1;var e=this.index;return e>0?(this.parent.children.splice(e,1),this.parent.children.unshift(this),this.parent._setChildrenIndices(),!0):!1}setZIndex(e){if(!this.parent)return P.warn("Node has no parent. zIndex parameter is ignored."),this;(e<0||e>=this.parent.children.length)&&P.warn("Unexpected value "+e+" for zIndex property. zIndex is just index of a node in children of its parent. Expected value is from 0 to "+(this.parent.children.length-1)+".");var n=this.index;return this.parent.children.splice(n,1),this.parent.children.splice(e,0,this),this.parent._setChildrenIndices(),this}getAbsoluteOpacity(){return this._getCache(Fi,this._getAbsoluteOpacity)}_getAbsoluteOpacity(){var e=this.opacity(),n=this.getParent();return n&&!n._isUnderCache&&(e*=n.getAbsoluteOpacity()),e}moveTo(e){return this.getParent()!==e&&(this._remove(),e.add(this)),this}toObject(){var e={},n=this.getAttrs(),a,s,l,u,f;e.attrs={};for(a in n)s=n[a],f=P.isObject(s)&&!P._isPlainObject(s)&&!P._isArray(s),!f&&(l=typeof this[a]=="function"&&this[a],delete n[a],u=l?l.call(this):null,n[a]=s,u!==s&&(e.attrs[a]=s));return e.className=this.getClassName(),P._prepareToStringify(e)}toJSON(){return JSON.stringify(this.toObject())}getParent(){return this.parent}findAncestors(e,n,a){var s=[];n&&this._isMatch(e)&&s.push(this);for(var l=this.parent;l;){if(l===a)return s;l._isMatch(e)&&s.push(l),l=l.parent}return s}isAncestorOf(e){return!1}findAncestor(e,n,a){return this.findAncestors(e,n,a)[0]}_isMatch(e){if(!e)return!1;if(typeof e=="function")return e(this);var n=e.replace(/ /g,"").split(","),a=n.length,s,l;for(s=0;s<a;s++)if(l=n[s],P.isValidSelector(l)||(P.warn('Selector "'+l+'" is invalid. Allowed selectors examples are "#foo", ".bar" or "Group".'),P.warn('If you have a custom shape with such className, please change it to start with upper letter like "Triangle".'),P.warn("Konva is awesome, right?")),l.charAt(0)==="#"){if(this.id()===l.slice(1))return!0}else if(l.charAt(0)==="."){if(this.hasName(l.slice(1)))return!0}else if(this.className===l||this.nodeType===l)return!0;return!1}getLayer(){var e=this.getParent();return e?e.getLayer():null}getStage(){return this._getCache(Rl,this._getStage)}_getStage(){var e=this.getParent();if(e)return e.getStage()}fire(e,n={},a){return n.target=n.target||this,a?this._fireAndBubble(e,n):this._fire(e,n),this}getAbsoluteTransform(e){return e?this._getAbsoluteTransform(e):this._getCache(Wt,this._getAbsoluteTransform)}_getAbsoluteTransform(e){var n;if(e)return n=new ot,this._eachAncestorReverse(function(s){var l=s.transformsEnabled();l==="all"?n.multiply(s.getTransform()):l==="position"&&n.translate(s.x()-s.offsetX(),s.y()-s.offsetY())},e),n;n=this._cache.get(Wt)||new ot,this.parent?this.parent.getAbsoluteTransform().copyInto(n):n.reset();var a=this.transformsEnabled();if(a==="all")n.multiply(this.getTransform());else if(a==="position"){const s=this.attrs.x||0,l=this.attrs.y||0,u=this.attrs.offsetX||0,f=this.attrs.offsetY||0;n.translate(s-u,l-f)}return n.dirty=!1,n}getAbsoluteScale(e){for(var n=this;n;)n._isUnderCache&&(e=n),n=n.getParent();const s=this.getAbsoluteTransform(e).decompose();return{x:s.scaleX,y:s.scaleY}}getAbsoluteRotation(){return this.getAbsoluteTransform().decompose().rotation}getTransform(){return this._getCache(nr,this._getTransform)}_getTransform(){var e,n,a=this._cache.get(nr)||new ot;a.reset();var s=this.x(),l=this.y(),u=V.getAngle(this.rotation()),f=(e=this.attrs.scaleX)!==null&&e!==void 0?e:1,c=(n=this.attrs.scaleY)!==null&&n!==void 0?n:1,p=this.attrs.skewX||0,v=this.attrs.skewY||0,S=this.attrs.offsetX||0,y=this.attrs.offsetY||0;return(s!==0||l!==0)&&a.translate(s,l),u!==0&&a.rotate(u),(p!==0||v!==0)&&a.skew(p,v),(f!==1||c!==1)&&a.scale(f,c),(S!==0||y!==0)&&a.translate(-1*S,-1*y),a.dirty=!1,a}clone(e){var n=P.cloneObject(this.attrs),a,s,l,u,f;for(a in e)n[a]=e[a];var c=new this.constructor(n);for(a in this.eventListeners)for(s=this.eventListeners[a],l=s.length,u=0;u<l;u++)f=s[u],f.name.indexOf(Ud)<0&&(c.eventListeners[a]||(c.eventListeners[a]=[]),c.eventListeners[a].push(f));return c}_toKonvaCanvas(e){e=e||{};var n=this.getClientRect(),a=this.getStage(),s=e.x!==void 0?e.x:Math.floor(n.x),l=e.y!==void 0?e.y:Math.floor(n.y),u=e.pixelRatio||1,f=new Ur({width:e.width||Math.ceil(n.width)||(a?a.width():0),height:e.height||Math.ceil(n.height)||(a?a.height():0),pixelRatio:u}),c=f.getContext();return e.imageSmoothingEnabled===!1&&(c._context.imageSmoothingEnabled=!1),c.save(),(s||l)&&c.translate(-1*s,-1*l),this.drawScene(f),c.restore(),f}toCanvas(e){return this._toKonvaCanvas(e)._canvas}toDataURL(e){e=e||{};var n=e.mimeType||null,a=e.quality||null,s=this._toKonvaCanvas(e).toDataURL(n,a);return e.callback&&e.callback(s),s}toImage(e){if(!e||!e.callback)throw"callback required for toImage method config argument";var n=e.callback;delete e.callback,P._urlToImage(this.toDataURL(e),function(a){n(a)})}setSize(e){return this.width(e.width),this.height(e.height),this}getSize(){return{width:this.width(),height:this.height()}}getClassName(){return this.className||this.nodeType}getType(){return this.nodeType}getDragDistance(){return this.attrs.dragDistance!==void 0?this.attrs.dragDistance:this.parent?this.parent.getDragDistance():V.dragDistance}_off(e,n,a){var s=this.eventListeners[e],l,u,f;for(l=0;l<s.length;l++)if(u=s[l].name,f=s[l].handler,(u!=="konva"||n==="konva")&&(!n||u===n)&&(!a||a===f)){if(s.splice(l,1),s.length===0){delete this.eventListeners[e];break}l--}}_fireChangeEvent(e,n,a){this._fire(e+Bd,{oldVal:n,newVal:a})}addName(e){if(!this.hasName(e)){var n=this.name(),a=n?n+" "+e:e;this.name(a)}return this}hasName(e){if(!e)return!1;const n=this.name();if(!n)return!1;var a=(n||"").split(/\s/g);return a.indexOf(e)!==-1}removeName(e){var n=(this.name()||"").split(/\s/g),a=n.indexOf(e);return a!==-1&&(n.splice(a,1),this.name(n.join(" "))),this}setAttr(e,n){var a=this[El+P._capitalize(e)];return P._isFunction(a)?a.call(this,n):this._setAttr(e,n),this}_requestDraw(){if(V.autoDrawEnabled){const e=this.getLayer()||this.getStage();e==null||e.batchDraw()}}_setAttr(e,n){var a=this.attrs[e];a===n&&!P.isObject(n)||(n==null?delete this.attrs[e]:this.attrs[e]=n,this._shouldFireChangeEvents&&this._fireChangeEvent(e,a,n),this._requestDraw())}_setComponentAttr(e,n,a){var s;a!==void 0&&(s=this.attrs[e],s||(this.attrs[e]=this.getAttr(e)),this.attrs[e][n]=a,this._fireChangeEvent(e,s,a))}_fireAndBubble(e,n,a){n&&this.nodeType===Tl&&(n.target=this);var s=(e===kl||e===Pl)&&(a&&(this===a||this.isAncestorOf&&this.isAncestorOf(a))||this.nodeType==="Stage"&&!a);if(!s){this._fire(e,n);var l=(e===kl||e===Pl)&&a&&a.isAncestorOf&&a.isAncestorOf(this)&&!a.isAncestorOf(this.parent);(n&&!n.cancelBubble||!n)&&this.parent&&this.parent.isListening()&&!l&&(a&&a.parent?this._fireAndBubble.call(this.parent,e,n,a):this._fireAndBubble.call(this.parent,e,n))}}_getProtoListeners(e){let n=this._cache.get(Ri);if(!n){n={};let s=Object.getPrototypeOf(this);for(;s;){if(!s.eventListeners){s=Object.getPrototypeOf(s);continue}for(var a in s.eventListeners){const l=s.eventListeners[a],u=n[a]||[];n[a]=l.concat(u)}s=Object.getPrototypeOf(s)}this._cache.set(Ri,n)}return n[e]}_fire(e,n){n=n||{},n.currentTarget=this,n.type=e;const a=this._getProtoListeners(e);if(a)for(var s=0;s<a.length;s++)a[s].handler.call(this,n);const l=this.eventListeners[e];if(l)for(var s=0;s<l.length;s++)l[s].handler.call(this,n)}draw(){return this.drawScene(),this.drawHit(),this}_createDragElement(e){var n=e?e.pointerId:void 0,a=this.getStage(),s=this.getAbsolutePosition(),l=a._getPointerById(n)||a._changedPointerPositions[0]||s;ce._dragElements.set(this._id,{node:this,startPointerPos:l,offset:{x:l.x-s.x,y:l.y-s.y},dragStatus:"ready",pointerId:n})}startDrag(e,n=!0){ce._dragElements.has(this._id)||this._createDragElement(e);const a=ce._dragElements.get(this._id);a.dragStatus="dragging",this.fire("dragstart",{type:"dragstart",target:this,evt:e&&e.evt},n)}_setDragPosition(e,n){const a=this.getStage()._getPointerById(n.pointerId);if(!!a){var s={x:a.x-n.offset.x,y:a.y-n.offset.y},l=this.dragBoundFunc();if(l!==void 0){const u=l.call(this,s,e);u?s=u:P.warn("dragBoundFunc did not return any value. That is unexpected behavior. You must return new absolute position from dragBoundFunc.")}(!this._lastPos||this._lastPos.x!==s.x||this._lastPos.y!==s.y)&&(this.setAbsolutePosition(s),this._requestDraw()),this._lastPos=s}}stopDrag(e){const n=ce._dragElements.get(this._id);n&&(n.dragStatus="stopped"),ce._endDragBefore(e),ce._endDragAfter(e)}setDraggable(e){this._setAttr("draggable",e),this._dragChange()}isDragging(){const e=ce._dragElements.get(this._id);return e?e.dragStatus==="dragging":!1}_listenDrag(){this._dragCleanup(),this.on("mousedown.konva touchstart.konva",function(e){var n=e.evt.button!==void 0,a=!n||V.dragButtons.indexOf(e.evt.button)>=0;if(!!a&&!this.isDragging()){var s=!1;ce._dragElements.forEach(l=>{this.isAncestorOf(l.node)&&(s=!0)}),s||this._createDragElement(e)}})}_dragChange(){if(this.attrs.draggable)this._listenDrag();else{this._dragCleanup();var e=this.getStage();if(!e)return;const n=ce._dragElements.get(this._id),a=n&&n.dragStatus==="dragging",s=n&&n.dragStatus==="ready";a?this.stopDrag():s&&ce._dragElements.delete(this._id)}}_dragCleanup(){this.off("mousedown.konva"),this.off("touchstart.konva")}isClientRectOnScreen(e={x:0,y:0}){const n=this.getStage();if(!n)return!1;const a={x:-e.x,y:-e.y,width:n.width()+2*e.x,height:n.height()+2*e.y};return P.haveIntersection(a,this.getClientRect())}static create(e,n){return P._isString(e)&&(e=JSON.parse(e)),this._createNode(e,n)}static _createNode(e,n){var a=z.prototype.getClassName.call(e),s=e.children,l,u,f;n&&(e.attrs.container=n),V[a]||(P.warn('Can not find a node with class name "'+a+'". Fallback to "Shape".'),a="Shape");const c=V[a];if(l=new c(e.attrs),s)for(u=s.length,f=0;f<u;f++)l.add(z._createNode(s[f]));return l}}z.prototype.nodeType="Node";z.prototype._attrsAffectingSize=[];z.prototype.eventListeners={};z.prototype.on.call(z.prototype,Yd,function(){if(this._batchingTransformChange){this._needClearTransformCache=!0;return}this._clearCache(nr),this._clearSelfAndDescendantCache(Wt)});z.prototype.on.call(z.prototype,"visibleChange.konva",function(){this._clearSelfAndDescendantCache(gs)});z.prototype.on.call(z.prototype,"listeningChange.konva",function(){this._clearSelfAndDescendantCache(cs)});z.prototype.on.call(z.prototype,"opacityChange.konva",function(){this._clearSelfAndDescendantCache(Fi)});const _e=w.addGetterSetter;_e(z,"zIndex");_e(z,"absolutePosition");_e(z,"position");_e(z,"x",0,G());_e(z,"y",0,G());_e(z,"globalCompositeOperation","source-over",Yr());_e(z,"opacity",1,G());_e(z,"name","",Yr());_e(z,"id","",Yr());_e(z,"rotation",0,G());w.addComponentsGetterSetter(z,"scale",["x","y"]);_e(z,"scaleX",1,G());_e(z,"scaleY",1,G());w.addComponentsGetterSetter(z,"skew",["x","y"]);_e(z,"skewX",0,G());_e(z,"skewY",0,G());w.addComponentsGetterSetter(z,"offset",["x","y"]);_e(z,"offsetX",0,G());_e(z,"offsetY",0,G());_e(z,"dragDistance",null,G());_e(z,"width",0,G());_e(z,"height",0,G());_e(z,"listening",!0,Pt());_e(z,"preventDefault",!0,Pt());_e(z,"filters",null,function(h){return this._filterUpToDate=!1,h});_e(z,"visible",!0,Pt());_e(z,"transformsEnabled","all",Yr());_e(z,"size");_e(z,"dragBoundFunc");_e(z,"draggable",!1,Pt());w.backCompat(z,{rotateDeg:"rotate",setRotationDeg:"setRotation",getRotationDeg:"getRotation"});class lt extends z{constructor(){super(...arguments),this.children=[]}getChildren(e){if(!e)return this.children||[];const n=this.children||[];var a=[];return n.forEach(function(s){e(s)&&a.push(s)}),a}hasChildren(){return this.getChildren().length>0}removeChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.remove()}),this.children=[],this._requestDraw(),this}destroyChildren(){return this.getChildren().forEach(e=>{e.parent=null,e.index=0,e.destroy()}),this.children=[],this._requestDraw(),this}add(...e){if(arguments.length>1){for(var n=0;n<arguments.length;n++)this.add(arguments[n]);return this}var a=e[0];return a.getParent()?(a.moveTo(this),this):(this._validateAdd(a),a.index=this.getChildren().length,a.parent=this,a._clearCaches(),this.getChildren().push(a),this._fire("add",{child:a}),this._requestDraw(),this)}destroy(){return this.hasChildren()&&this.destroyChildren(),super.destroy(),this}find(e){return this._generalFind(e,!1)}findOne(e){var n=this._generalFind(e,!0);return n.length>0?n[0]:void 0}_generalFind(e,n){var a=[];return this._descendants(s=>{const l=s._isMatch(e);return l&&a.push(s),!!(l&&n)}),a}_descendants(e){let n=!1;const a=this.getChildren();for(const s of a){if(n=e(s),n)return!0;if(!!s.hasChildren()&&(n=s._descendants(e),n))return!0}return!1}toObject(){var e=z.prototype.toObject.call(this);return e.children=[],this.getChildren().forEach(n=>{e.children.push(n.toObject())}),e}isAncestorOf(e){for(var n=e.getParent();n;){if(n._id===this._id)return!0;n=n.getParent()}return!1}clone(e){var n=z.prototype.clone.call(this,e);return this.getChildren().forEach(function(a){n.add(a.clone())}),n}getAllIntersections(e){var n=[];return this.find("Shape").forEach(function(a){a.isVisible()&&a.intersects(e)&&n.push(a)}),n}_clearSelfAndDescendantCache(e){var n;super._clearSelfAndDescendantCache(e),!this.isCached()&&((n=this.children)===null||n===void 0||n.forEach(function(a){a._clearSelfAndDescendantCache(e)}))}_setChildrenIndices(){var e;(e=this.children)===null||e===void 0||e.forEach(function(n,a){n.index=a}),this._requestDraw()}drawScene(e,n){var a=this.getLayer(),s=e||a&&a.getCanvas(),l=s&&s.getContext(),u=this._getCanvasCache(),f=u&&u.scene,c=s&&s.isCache;if(!this.isVisible()&&!c)return this;if(f){l.save();var p=this.getAbsoluteTransform(n).getMatrix();l.transform(p[0],p[1],p[2],p[3],p[4],p[5]),this._drawCachedSceneCanvas(l),l.restore()}else this._drawChildren("drawScene",s,n);return this}drawHit(e,n){if(!this.shouldDrawHit(n))return this;var a=this.getLayer(),s=e||a&&a.hitCanvas,l=s&&s.getContext(),u=this._getCanvasCache(),f=u&&u.hit;if(f){l.save();var c=this.getAbsoluteTransform(n).getMatrix();l.transform(c[0],c[1],c[2],c[3],c[4],c[5]),this._drawCachedHitCanvas(l),l.restore()}else this._drawChildren("drawHit",s,n);return this}_drawChildren(e,n,a){var s,l=n&&n.getContext(),u=this.clipWidth(),f=this.clipHeight(),c=this.clipFunc(),p=u&&f||c;const v=a===this;if(p){l.save();var S=this.getAbsoluteTransform(a),y=S.getMatrix();if(l.transform(y[0],y[1],y[2],y[3],y[4],y[5]),l.beginPath(),c)c.call(this,l,this);else{var x=this.clipX(),_=this.clipY();l.rect(x,_,u,f)}l.clip(),y=S.copy().invert().getMatrix(),l.transform(y[0],y[1],y[2],y[3],y[4],y[5])}var A=!v&&this.globalCompositeOperation()!=="source-over"&&e==="drawScene";A&&(l.save(),l._applyGlobalCompositeOperation(this)),(s=this.children)===null||s===void 0||s.forEach(function(E){E[e](n,a)}),A&&l.restore(),p&&l.restore()}getClientRect(e){var n;e=e||{};var a=e.skipTransform,s=e.relativeTo,l,u,f,c,p={x:1/0,y:1/0,width:0,height:0},v=this;(n=this.children)===null||n===void 0||n.forEach(function(A){if(!!A.visible()){var E=A.getClientRect({relativeTo:v,skipShadow:e.skipShadow,skipStroke:e.skipStroke});E.width===0&&E.height===0||(l===void 0?(l=E.x,u=E.y,f=E.x+E.width,c=E.y+E.height):(l=Math.min(l,E.x),u=Math.min(u,E.y),f=Math.max(f,E.x+E.width),c=Math.max(c,E.y+E.height)))}});for(var S=this.find("Shape"),y=!1,x=0;x<S.length;x++){var _=S[x];if(_._isVisible(this)){y=!0;break}}return y&&l!==void 0?p={x:l,y:u,width:f-l,height:c-u}:p={x:0,y:0,width:0,height:0},a?p:this._transformedRect(p,s)}}w.addComponentsGetterSetter(lt,"clip",["x","y","width","height"]);w.addGetterSetter(lt,"clipX",void 0,G());w.addGetterSetter(lt,"clipY",void 0,G());w.addGetterSetter(lt,"clipWidth",void 0,G());w.addGetterSetter(lt,"clipHeight",void 0,G());w.addGetterSetter(lt,"clipFunc");const Mn=new Map,jl=V._global.PointerEvent!==void 0;function ss(h){return Mn.get(h)}function ks(h){return{evt:h,pointerId:h.pointerId}}function Ql(h,e){return Mn.get(h)===e}function Kl(h,e){En(h),e.getStage()&&(Mn.set(h,e),jl&&e._fire("gotpointercapture",ks(new PointerEvent("gotpointercapture"))))}function En(h,e){const n=Mn.get(h);if(!n)return;const a=n.getStage();a&&a.content,Mn.delete(h),jl&&n._fire("lostpointercapture",ks(new PointerEvent("lostpointercapture")))}var Vd="Stage",jd="string",Al="px",Qd="mouseout",ql="mouseleave",Jl="mouseover",Zl="mouseenter",$l="mousemove",eh="mousedown",th="mouseup",wn="pointermove",Cn="pointerdown",Br="pointerup",xn="pointercancel",Kd="lostpointercapture",Ai="pointerout",Mi="pointerleave",Li="pointerover",Ii="pointerenter",ps="contextmenu",rh="touchstart",nh="touchend",ih="touchmove",ah="touchcancel",vs="wheel",qd=5,Jd=[[Zl,"_pointerenter"],[eh,"_pointerdown"],[$l,"_pointermove"],[th,"_pointerup"],[ql,"_pointerleave"],[rh,"_pointerdown"],[ih,"_pointermove"],[nh,"_pointerup"],[ah,"_pointercancel"],[Jl,"_pointerover"],[vs,"_wheel"],[ps,"_contextmenu"],[Cn,"_pointerdown"],[wn,"_pointermove"],[Br,"_pointerup"],[xn,"_pointercancel"],[Kd,"_lostpointercapture"]];const os={mouse:{[Ai]:Qd,[Mi]:ql,[Li]:Jl,[Ii]:Zl,[wn]:$l,[Cn]:eh,[Br]:th,[xn]:"mousecancel",pointerclick:"click",pointerdblclick:"dblclick"},touch:{[Ai]:"touchout",[Mi]:"touchleave",[Li]:"touchover",[Ii]:"touchenter",[wn]:ih,[Cn]:rh,[Br]:nh,[xn]:ah,pointerclick:"tap",pointerdblclick:"dbltap"},pointer:{[Ai]:Ai,[Mi]:Mi,[Li]:Li,[Ii]:Ii,[wn]:wn,[Cn]:Cn,[Br]:Br,[xn]:xn,pointerclick:"pointerclick",pointerdblclick:"pointerdblclick"}},kn=h=>h.indexOf("pointer")>=0?"pointer":h.indexOf("touch")>=0?"touch":"mouse",br=h=>{const e=kn(h);if(e==="pointer")return V.pointerEventsEnabled&&os.pointer;if(e==="touch")return os.touch;if(e==="mouse")return os.mouse};function Ml(h={}){return(h.clipFunc||h.clipWidth||h.clipHeight)&&P.warn("Stage does not support clipping. Please use clip for Layers or Groups."),h}const Zd="Pointer position is missing and not registered by the stage. Looks like it is outside of the stage container. You can set it manually from event: stage.setPointersPositions(event);",Bi=[];class Yi extends lt{constructor(e){super(Ml(e)),this._pointerPositions=[],this._changedPointerPositions=[],this._buildDOM(),this._bindContentEvents(),Bi.push(this),this.on("widthChange.konva heightChange.konva",this._resizeDOM),this.on("visibleChange.konva",this._checkVisibility),this.on("clipWidthChange.konva clipHeightChange.konva clipFuncChange.konva",()=>{Ml(this.attrs)}),this._checkVisibility()}_validateAdd(e){const n=e.getType()==="Layer",a=e.getType()==="FastLayer";n||a||P.throw("You may only add layers to the stage.")}_checkVisibility(){if(!this.content)return;const e=this.visible()?"":"none";this.content.style.display=e}setContainer(e){if(typeof e===jd){if(e.charAt(0)==="."){var n=e.slice(1);e=document.getElementsByClassName(n)[0]}else{var a;e.charAt(0)!=="#"?a=e:a=e.slice(1),e=document.getElementById(a)}if(!e)throw"Can not find container in document with id "+a}return this._setAttr("container",e),this.content&&(this.content.parentElement&&this.content.parentElement.removeChild(this.content),e.appendChild(this.content)),this}shouldDrawHit(){return!0}clear(){var e=this.children,n=e.length,a;for(a=0;a<n;a++)e[a].clear();return this}clone(e){return e||(e={}),e.container=typeof document!="undefined"&&document.createElement("div"),lt.prototype.clone.call(this,e)}destroy(){super.destroy();var e=this.content;e&&P._isInDocument(e)&&this.container().removeChild(e);var n=Bi.indexOf(this);return n>-1&&Bi.splice(n,1),this}getPointerPosition(){const e=this._pointerPositions[0]||this._changedPointerPositions[0];return e?{x:e.x,y:e.y}:(P.warn(Zd),null)}_getPointerById(e){return this._pointerPositions.find(n=>n.id===e)}getPointersPositions(){return this._pointerPositions}getStage(){return this}getContent(){return this.content}_toKonvaCanvas(e){e=e||{},e.x=e.x||0,e.y=e.y||0,e.width=e.width||this.width(),e.height=e.height||this.height();var n=new Ur({width:e.width,height:e.height,pixelRatio:e.pixelRatio||1}),a=n.getContext()._context,s=this.children;return(e.x||e.y)&&a.translate(-1*e.x,-1*e.y),s.forEach(function(l){if(!!l.isVisible()){var u=l._toKonvaCanvas(e);a.drawImage(u._canvas,e.x,e.y,u.getWidth()/u.getPixelRatio(),u.getHeight()/u.getPixelRatio())}}),n}getIntersection(e){if(!e)return null;var n=this.children,a=n.length,s=a-1,l;for(l=s;l>=0;l--){const u=n[l].getIntersection(e);if(u)return u}return null}_resizeDOM(){var e=this.width(),n=this.height();this.content&&(this.content.style.width=e+Al,this.content.style.height=n+Al),this.bufferCanvas.setSize(e,n),this.bufferHitCanvas.setSize(e,n),this.children.forEach(a=>{a.setSize({width:e,height:n}),a.draw()})}add(e,...n){if(arguments.length>1){for(var a=0;a<arguments.length;a++)this.add(arguments[a]);return this}super.add(e);var s=this.children.length;return s>qd&&P.warn("The stage has "+s+" layers. Recommended maximum number of layers is 3-5. Adding more layers into the stage may drop the performance. Rethink your tree structure, you can use Konva.Group."),e.setSize({width:this.width(),height:this.height()}),e.draw(),V.isBrowser&&this.content.appendChild(e.canvas._canvas),this}getParent(){return null}getLayer(){return null}hasPointerCapture(e){return Ql(e,this)}setPointerCapture(e){Kl(e,this)}releaseCapture(e){En(e)}getLayers(){return this.children}_bindContentEvents(){!V.isBrowser||Jd.forEach(([e,n])=>{this.content.addEventListener(e,a=>{this[n](a)})})}_pointerenter(e){this.setPointersPositions(e);const n=br(e.type);this._fire(n.pointerenter,{evt:e,target:this,currentTarget:this})}_pointerover(e){this.setPointersPositions(e);const n=br(e.type);this._fire(n.pointerover,{evt:e,target:this,currentTarget:this})}_getTargetShape(e){let n=this[e+"targetShape"];return n&&!n.getStage()&&(n=null),n}_pointerleave(e){const n=br(e.type),a=kn(e.type);if(!!n){this.setPointersPositions(e);var s=this._getTargetShape(a),l=!ce.isDragging||V.hitOnDragEnabled;s&&l?(s._fireAndBubble(n.pointerout,{evt:e}),s._fireAndBubble(n.pointerleave,{evt:e}),this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this[a+"targetShape"]=null):l&&(this._fire(n.pointerleave,{evt:e,target:this,currentTarget:this}),this._fire(n.pointerout,{evt:e,target:this,currentTarget:this})),this.pointerPos=void 0,this._pointerPositions=[]}}_pointerdown(e){const n=br(e.type),a=kn(e.type);if(!!n){this.setPointersPositions(e);var s=!1;this._changedPointerPositions.forEach(l=>{var u=this.getIntersection(l);if(ce.justDragged=!1,V["_"+a+"ListenClick"]=!0,!(u&&u.isListening()))return;V.capturePointerEventsEnabled&&u.setPointerCapture(l.id),this[a+"ClickStartShape"]=u,u._fireAndBubble(n.pointerdown,{evt:e,pointerId:l.id}),s=!0;const c=e.type.indexOf("touch")>=0;u.preventDefault()&&e.cancelable&&c&&e.preventDefault()}),s||this._fire(n.pointerdown,{evt:e,target:this,currentTarget:this,pointerId:this._pointerPositions[0].id})}}_pointermove(e){const n=br(e.type),a=kn(e.type);if(!n)return;ce.isDragging&&ce.node.preventDefault()&&e.cancelable&&e.preventDefault(),this.setPointersPositions(e);var s=!ce.isDragging||V.hitOnDragEnabled;if(!s)return;var l={};let u=!1;var f=this._getTargetShape(a);this._changedPointerPositions.forEach(c=>{const p=ss(c.id)||this.getIntersection(c),v=c.id,S={evt:e,pointerId:v};var y=f!==p;if(y&&f&&(f._fireAndBubble(n.pointerout,Object.assign({},S),p),f._fireAndBubble(n.pointerleave,Object.assign({},S),p)),p){if(l[p._id])return;l[p._id]=!0}p&&p.isListening()?(u=!0,y&&(p._fireAndBubble(n.pointerover,Object.assign({},S),f),p._fireAndBubble(n.pointerenter,Object.assign({},S),f),this[a+"targetShape"]=p),p._fireAndBubble(n.pointermove,Object.assign({},S))):f&&(this._fire(n.pointerover,{evt:e,target:this,currentTarget:this,pointerId:v}),this[a+"targetShape"]=null)}),u||this._fire(n.pointermove,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id})}_pointerup(e){const n=br(e.type),a=kn(e.type);if(!n)return;this.setPointersPositions(e);const s=this[a+"ClickStartShape"],l=this[a+"ClickEndShape"];var u={};let f=!1;this._changedPointerPositions.forEach(c=>{const p=ss(c.id)||this.getIntersection(c);if(p){if(p.releaseCapture(c.id),u[p._id])return;u[p._id]=!0}const v=c.id,S={evt:e,pointerId:v};let y=!1;V["_"+a+"InDblClickWindow"]?(y=!0,clearTimeout(this[a+"DblTimeout"])):ce.justDragged||(V["_"+a+"InDblClickWindow"]=!0,clearTimeout(this[a+"DblTimeout"])),this[a+"DblTimeout"]=setTimeout(function(){V["_"+a+"InDblClickWindow"]=!1},V.dblClickWindow),p&&p.isListening()?(f=!0,this[a+"ClickEndShape"]=p,p._fireAndBubble(n.pointerup,Object.assign({},S)),V["_"+a+"ListenClick"]&&s&&s===p&&(p._fireAndBubble(n.pointerclick,Object.assign({},S)),y&&l&&l===p&&p._fireAndBubble(n.pointerdblclick,Object.assign({},S)))):(this[a+"ClickEndShape"]=null,V["_"+a+"ListenClick"]&&this._fire(n.pointerclick,{evt:e,target:this,currentTarget:this,pointerId:v}),y&&this._fire(n.pointerdblclick,{evt:e,target:this,currentTarget:this,pointerId:v}))}),f||this._fire(n.pointerup,{evt:e,target:this,currentTarget:this,pointerId:this._changedPointerPositions[0].id}),V["_"+a+"ListenClick"]=!1,e.cancelable&&e.preventDefault()}_contextmenu(e){this.setPointersPositions(e);var n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(ps,{evt:e}):this._fire(ps,{evt:e,target:this,currentTarget:this})}_wheel(e){this.setPointersPositions(e);var n=this.getIntersection(this.getPointerPosition());n&&n.isListening()?n._fireAndBubble(vs,{evt:e}):this._fire(vs,{evt:e,target:this,currentTarget:this})}_pointercancel(e){this.setPointersPositions(e);const n=ss(e.pointerId)||this.getIntersection(this.getPointerPosition());n&&n._fireAndBubble(Br,ks(e)),En(e.pointerId)}_lostpointercapture(e){En(e.pointerId)}setPointersPositions(e){var n=this._getContentPosition(),a=null,s=null;e=e||window.event,e.touches!==void 0?(this._pointerPositions=[],this._changedPointerPositions=[],Array.prototype.forEach.call(e.touches,l=>{this._pointerPositions.push({id:l.identifier,x:(l.clientX-n.left)/n.scaleX,y:(l.clientY-n.top)/n.scaleY})}),Array.prototype.forEach.call(e.changedTouches||e.touches,l=>{this._changedPointerPositions.push({id:l.identifier,x:(l.clientX-n.left)/n.scaleX,y:(l.clientY-n.top)/n.scaleY})})):(a=(e.clientX-n.left)/n.scaleX,s=(e.clientY-n.top)/n.scaleY,this.pointerPos={x:a,y:s},this._pointerPositions=[{x:a,y:s,id:P._getFirstPointerId(e)}],this._changedPointerPositions=[{x:a,y:s,id:P._getFirstPointerId(e)}])}_setPointerPosition(e){P.warn('Method _setPointerPosition is deprecated. Use "stage.setPointersPositions(event)" instead.'),this.setPointersPositions(e)}_getContentPosition(){if(!this.content||!this.content.getBoundingClientRect)return{top:0,left:0,scaleX:1,scaleY:1};var e=this.content.getBoundingClientRect();return{top:e.top,left:e.left,scaleX:e.width/this.content.clientWidth||1,scaleY:e.height/this.content.clientHeight||1}}_buildDOM(){if(this.bufferCanvas=new Ur({width:this.width(),height:this.height()}),this.bufferHitCanvas=new xs({pixelRatio:1,width:this.width(),height:this.height()}),!!V.isBrowser){var e=this.container();if(!e)throw"Stage has no container. A container is required.";e.innerHTML="",this.content=document.createElement("div"),this.content.style.position="relative",this.content.style.userSelect="none",this.content.className="konvajs-content",this.content.setAttribute("role","presentation"),e.appendChild(this.content),this._resizeDOM()}}cache(){return P.warn("Cache function is not allowed for stage. You may use cache only for layers, groups and shapes."),this}clearCache(){return this}batchDraw(){return this.getChildren().forEach(function(e){e.batchDraw()}),this}}Yi.prototype.nodeType=Vd;Re(Yi);w.addGetterSetter(Yi,"container");var sh="hasShadow",oh="shadowRGBA",lh="patternImage",hh="linearGradient",uh="radialGradient";let Ni;function ls(){return Ni||(Ni=P.createCanvasElement().getContext("2d"),Ni)}const Tn={};function $d(h){h.fill()}function ef(h){h.stroke()}function tf(h){h.fill()}function rf(h){h.stroke()}function nf(){this._clearCache(sh)}function af(){this._clearCache(oh)}function sf(){this._clearCache(lh)}function of(){this._clearCache(hh)}function lf(){this._clearCache(uh)}class N extends z{constructor(e){super(e);let n;for(;n=P.getRandomColor(),!(n&&!(n in Tn)););this.colorKey=n,Tn[n]=this}getContext(){return P.warn("shape.getContext() method is deprecated. Please do not use it."),this.getLayer().getContext()}getCanvas(){return P.warn("shape.getCanvas() method is deprecated. Please do not use it."),this.getLayer().getCanvas()}getSceneFunc(){return this.attrs.sceneFunc||this._sceneFunc}getHitFunc(){return this.attrs.hitFunc||this._hitFunc}hasShadow(){return this._getCache(sh,this._hasShadow)}_hasShadow(){return this.shadowEnabled()&&this.shadowOpacity()!==0&&!!(this.shadowColor()||this.shadowBlur()||this.shadowOffsetX()||this.shadowOffsetY())}_getFillPattern(){return this._getCache(lh,this.__getFillPattern)}__getFillPattern(){if(this.fillPatternImage()){var e=ls();const n=e.createPattern(this.fillPatternImage(),this.fillPatternRepeat()||"repeat");if(n&&n.setTransform){const a=new ot;a.translate(this.fillPatternX(),this.fillPatternY()),a.rotate(V.getAngle(this.fillPatternRotation())),a.scale(this.fillPatternScaleX(),this.fillPatternScaleY()),a.translate(-1*this.fillPatternOffsetX(),-1*this.fillPatternOffsetY());const s=a.getMatrix(),l=typeof DOMMatrix=="undefined"?{a:s[0],b:s[1],c:s[2],d:s[3],e:s[4],f:s[5]}:new DOMMatrix(s);n.setTransform(l)}return n}}_getLinearGradient(){return this._getCache(hh,this.__getLinearGradient)}__getLinearGradient(){var e=this.fillLinearGradientColorStops();if(e){for(var n=ls(),a=this.fillLinearGradientStartPoint(),s=this.fillLinearGradientEndPoint(),l=n.createLinearGradient(a.x,a.y,s.x,s.y),u=0;u<e.length;u+=2)l.addColorStop(e[u],e[u+1]);return l}}_getRadialGradient(){return this._getCache(uh,this.__getRadialGradient)}__getRadialGradient(){var e=this.fillRadialGradientColorStops();if(e){for(var n=ls(),a=this.fillRadialGradientStartPoint(),s=this.fillRadialGradientEndPoint(),l=n.createRadialGradient(a.x,a.y,this.fillRadialGradientStartRadius(),s.x,s.y,this.fillRadialGradientEndRadius()),u=0;u<e.length;u+=2)l.addColorStop(e[u],e[u+1]);return l}}getShadowRGBA(){return this._getCache(oh,this._getShadowRGBA)}_getShadowRGBA(){if(this.hasShadow()){var e=P.colorToRGBA(this.shadowColor());return"rgba("+e.r+","+e.g+","+e.b+","+e.a*(this.shadowOpacity()||1)+")"}}hasFill(){return this._calculate("hasFill",["fillEnabled","fill","fillPatternImage","fillLinearGradientColorStops","fillRadialGradientColorStops"],()=>this.fillEnabled()&&!!(this.fill()||this.fillPatternImage()||this.fillLinearGradientColorStops()||this.fillRadialGradientColorStops()))}hasStroke(){return this._calculate("hasStroke",["strokeEnabled","strokeWidth","stroke","strokeLinearGradientColorStops"],()=>this.strokeEnabled()&&this.strokeWidth()&&!!(this.stroke()||this.strokeLinearGradientColorStops()))}hasHitStroke(){const e=this.hitStrokeWidth();return e==="auto"?this.hasStroke():this.strokeEnabled()&&!!e}intersects(e){var n=this.getStage(),a=n.bufferHitCanvas,s;return a.getContext().clear(),this.drawHit(a,null,!0),s=a.context.getImageData(Math.round(e.x),Math.round(e.y),1,1).data,s[3]>0}destroy(){return z.prototype.destroy.call(this),delete Tn[this.colorKey],delete this.colorKey,this}_useBufferCanvas(e){var n;if(!this.getStage()||!((n=this.attrs.perfectDrawEnabled)!==null&&n!==void 0?n:!0))return!1;const s=e||this.hasFill(),l=this.hasStroke(),u=this.getAbsoluteOpacity()!==1;if(s&&l&&u)return!0;const f=this.hasShadow(),c=this.shadowForStrokeEnabled();return!!(s&&l&&f&&c)}setStrokeHitEnabled(e){P.warn("strokeHitEnabled property is deprecated. Please use hitStrokeWidth instead."),e?this.hitStrokeWidth("auto"):this.hitStrokeWidth(0)}getStrokeHitEnabled(){return this.hitStrokeWidth()!==0}getSelfRect(){var e=this.size();return{x:this._centroid?-e.width/2:0,y:this._centroid?-e.height/2:0,width:e.width,height:e.height}}getClientRect(e={}){const n=e.skipTransform,a=e.relativeTo,s=this.getSelfRect(),u=!e.skipStroke&&this.hasStroke()&&this.strokeWidth()||0,f=s.width+u,c=s.height+u,p=!e.skipShadow&&this.hasShadow(),v=p?this.shadowOffsetX():0,S=p?this.shadowOffsetY():0,y=f+Math.abs(v),x=c+Math.abs(S),_=p&&this.shadowBlur()||0,A=y+_*2,E=x+_*2,O={width:A,height:E,x:-(u/2+_)+Math.min(v,0)+s.x,y:-(u/2+_)+Math.min(S,0)+s.y};return n?O:this._transformedRect(O,a)}drawScene(e,n){var a=this.getLayer(),s=e||a.getCanvas(),l=s.getContext(),u=this._getCanvasCache(),f=this.getSceneFunc(),c=this.hasShadow(),p,v,S,y=s.isCache,x=n===this;if(!this.isVisible()&&!x)return this;if(u){l.save();var _=this.getAbsoluteTransform(n).getMatrix();return l.transform(_[0],_[1],_[2],_[3],_[4],_[5]),this._drawCachedSceneCanvas(l),l.restore(),this}if(!f)return this;if(l.save(),this._useBufferCanvas()&&!y){p=this.getStage(),v=p.bufferCanvas,S=v.getContext(),S.clear(),S.save(),S._applyLineJoin(this);var A=this.getAbsoluteTransform(n).getMatrix();S.transform(A[0],A[1],A[2],A[3],A[4],A[5]),f.call(this,S,this),S.restore();var E=v.pixelRatio;c&&l._applyShadow(this),l._applyOpacity(this),l._applyGlobalCompositeOperation(this),l.drawImage(v._canvas,0,0,v.width/E,v.height/E)}else{if(l._applyLineJoin(this),!x){var A=this.getAbsoluteTransform(n).getMatrix();l.transform(A[0],A[1],A[2],A[3],A[4],A[5]),l._applyOpacity(this),l._applyGlobalCompositeOperation(this)}c&&l._applyShadow(this),f.call(this,l,this)}return l.restore(),this}drawHit(e,n,a=!1){if(!this.shouldDrawHit(n,a))return this;var s=this.getLayer(),l=e||s.hitCanvas,u=l&&l.getContext(),f=this.hitFunc()||this.sceneFunc(),c=this._getCanvasCache(),p=c&&c.hit;if(this.colorKey||P.warn("Looks like your canvas has a destroyed shape in it. Do not reuse shape after you destroyed it. If you want to reuse shape you should call remove() instead of destroy()"),p){u.save();var v=this.getAbsoluteTransform(n).getMatrix();return u.transform(v[0],v[1],v[2],v[3],v[4],v[5]),this._drawCachedHitCanvas(u),u.restore(),this}if(!f)return this;if(u.save(),u._applyLineJoin(this),!(this===n)){var y=this.getAbsoluteTransform(n).getMatrix();u.transform(y[0],y[1],y[2],y[3],y[4],y[5])}return f.call(this,u,this),u.restore(),this}drawHitFromCache(e=0){var n=this._getCanvasCache(),a=this._getCachedSceneCanvas(),s=n.hit,l=s.getContext(),u=s.getWidth(),f=s.getHeight(),c,p,v,S,y,x;l.clear(),l.drawImage(a._canvas,0,0,u,f);try{for(c=l.getImageData(0,0,u,f),p=c.data,v=p.length,S=P._hexToRgb(this.colorKey),y=0;y<v;y+=4)x=p[y+3],x>e?(p[y]=S.r,p[y+1]=S.g,p[y+2]=S.b,p[y+3]=255):p[y+3]=0;l.putImageData(c,0,0)}catch(_){P.error("Unable to draw hit graph from cached scene canvas. "+_.message)}return this}hasPointerCapture(e){return Ql(e,this)}setPointerCapture(e){Kl(e,this)}releaseCapture(e){En(e)}}N.prototype._fillFunc=$d;N.prototype._strokeFunc=ef;N.prototype._fillFuncHit=tf;N.prototype._strokeFuncHit=rf;N.prototype._centroid=!1;N.prototype.nodeType="Shape";Re(N);N.prototype.eventListeners={};N.prototype.on.call(N.prototype,"shadowColorChange.konva shadowBlurChange.konva shadowOffsetChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",nf);N.prototype.on.call(N.prototype,"shadowColorChange.konva shadowOpacityChange.konva shadowEnabledChange.konva",af);N.prototype.on.call(N.prototype,"fillPriorityChange.konva fillPatternImageChange.konva fillPatternRepeatChange.konva fillPatternScaleXChange.konva fillPatternScaleYChange.konva fillPatternOffsetXChange.konva fillPatternOffsetYChange.konva fillPatternXChange.konva fillPatternYChange.konva fillPatternRotationChange.konva",sf);N.prototype.on.call(N.prototype,"fillPriorityChange.konva fillLinearGradientColorStopsChange.konva fillLinearGradientStartPointXChange.konva fillLinearGradientStartPointYChange.konva fillLinearGradientEndPointXChange.konva fillLinearGradientEndPointYChange.konva",of);N.prototype.on.call(N.prototype,"fillPriorityChange.konva fillRadialGradientColorStopsChange.konva fillRadialGradientStartPointXChange.konva fillRadialGradientStartPointYChange.konva fillRadialGradientEndPointXChange.konva fillRadialGradientEndPointYChange.konva fillRadialGradientStartRadiusChange.konva fillRadialGradientEndRadiusChange.konva",lf);w.addGetterSetter(N,"stroke",void 0,Vl());w.addGetterSetter(N,"strokeWidth",2,G());w.addGetterSetter(N,"fillAfterStrokeEnabled",!1);w.addGetterSetter(N,"hitStrokeWidth","auto",Cs());w.addGetterSetter(N,"strokeHitEnabled",!0,Pt());w.addGetterSetter(N,"perfectDrawEnabled",!0,Pt());w.addGetterSetter(N,"shadowForStrokeEnabled",!0,Pt());w.addGetterSetter(N,"lineJoin");w.addGetterSetter(N,"lineCap");w.addGetterSetter(N,"sceneFunc");w.addGetterSetter(N,"hitFunc");w.addGetterSetter(N,"dash");w.addGetterSetter(N,"dashOffset",0,G());w.addGetterSetter(N,"shadowColor",void 0,Yr());w.addGetterSetter(N,"shadowBlur",0,G());w.addGetterSetter(N,"shadowOpacity",1,G());w.addComponentsGetterSetter(N,"shadowOffset",["x","y"]);w.addGetterSetter(N,"shadowOffsetX",0,G());w.addGetterSetter(N,"shadowOffsetY",0,G());w.addGetterSetter(N,"fillPatternImage");w.addGetterSetter(N,"fill",void 0,Vl());w.addGetterSetter(N,"fillPatternX",0,G());w.addGetterSetter(N,"fillPatternY",0,G());w.addGetterSetter(N,"fillLinearGradientColorStops");w.addGetterSetter(N,"strokeLinearGradientColorStops");w.addGetterSetter(N,"fillRadialGradientStartRadius",0);w.addGetterSetter(N,"fillRadialGradientEndRadius",0);w.addGetterSetter(N,"fillRadialGradientColorStops");w.addGetterSetter(N,"fillPatternRepeat","repeat");w.addGetterSetter(N,"fillEnabled",!0);w.addGetterSetter(N,"strokeEnabled",!0);w.addGetterSetter(N,"shadowEnabled",!0);w.addGetterSetter(N,"dashEnabled",!0);w.addGetterSetter(N,"strokeScaleEnabled",!0);w.addGetterSetter(N,"fillPriority","color");w.addComponentsGetterSetter(N,"fillPatternOffset",["x","y"]);w.addGetterSetter(N,"fillPatternOffsetX",0,G());w.addGetterSetter(N,"fillPatternOffsetY",0,G());w.addComponentsGetterSetter(N,"fillPatternScale",["x","y"]);w.addGetterSetter(N,"fillPatternScaleX",1,G());w.addGetterSetter(N,"fillPatternScaleY",1,G());w.addComponentsGetterSetter(N,"fillLinearGradientStartPoint",["x","y"]);w.addComponentsGetterSetter(N,"strokeLinearGradientStartPoint",["x","y"]);w.addGetterSetter(N,"fillLinearGradientStartPointX",0);w.addGetterSetter(N,"strokeLinearGradientStartPointX",0);w.addGetterSetter(N,"fillLinearGradientStartPointY",0);w.addGetterSetter(N,"strokeLinearGradientStartPointY",0);w.addComponentsGetterSetter(N,"fillLinearGradientEndPoint",["x","y"]);w.addComponentsGetterSetter(N,"strokeLinearGradientEndPoint",["x","y"]);w.addGetterSetter(N,"fillLinearGradientEndPointX",0);w.addGetterSetter(N,"strokeLinearGradientEndPointX",0);w.addGetterSetter(N,"fillLinearGradientEndPointY",0);w.addGetterSetter(N,"strokeLinearGradientEndPointY",0);w.addComponentsGetterSetter(N,"fillRadialGradientStartPoint",["x","y"]);w.addGetterSetter(N,"fillRadialGradientStartPointX",0);w.addGetterSetter(N,"fillRadialGradientStartPointY",0);w.addComponentsGetterSetter(N,"fillRadialGradientEndPoint",["x","y"]);w.addGetterSetter(N,"fillRadialGradientEndPointX",0);w.addGetterSetter(N,"fillRadialGradientEndPointY",0);w.addGetterSetter(N,"fillPatternRotation",0);w.backCompat(N,{dashArray:"dash",getDashArray:"getDash",setDashArray:"getDash",drawFunc:"sceneFunc",getDrawFunc:"getSceneFunc",setDrawFunc:"setSceneFunc",drawHitFunc:"hitFunc",getDrawHitFunc:"getHitFunc",setDrawHitFunc:"setHitFunc"});var hf="#",uf="beforeDraw",df="draw",dh=[{x:0,y:0},{x:-1,y:-1},{x:1,y:-1},{x:1,y:1},{x:-1,y:1}],ff=dh.length;class Sr extends lt{constructor(e){super(e),this.canvas=new Ur,this.hitCanvas=new xs({pixelRatio:1}),this._waitingForDraw=!1,this.on("visibleChange.konva",this._checkVisibility),this._checkVisibility(),this.on("imageSmoothingEnabledChange.konva",this._setSmoothEnabled),this._setSmoothEnabled()}createPNGStream(){return this.canvas._canvas.createPNGStream()}getCanvas(){return this.canvas}getNativeCanvasElement(){return this.canvas._canvas}getHitCanvas(){return this.hitCanvas}getContext(){return this.getCanvas().getContext()}clear(e){return this.getContext().clear(e),this.getHitCanvas().getContext().clear(e),this}setZIndex(e){super.setZIndex(e);var n=this.getStage();return n&&n.content&&(n.content.removeChild(this.getNativeCanvasElement()),e<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[e+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement())),this}moveToTop(){z.prototype.moveToTop.call(this);var e=this.getStage();return e&&e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.appendChild(this.getNativeCanvasElement())),!0}moveUp(){var e=z.prototype.moveUp.call(this);if(!e)return!1;var n=this.getStage();return!n||!n.content?!1:(n.content.removeChild(this.getNativeCanvasElement()),this.index<n.children.length-1?n.content.insertBefore(this.getNativeCanvasElement(),n.children[this.index+1].getCanvas()._canvas):n.content.appendChild(this.getNativeCanvasElement()),!0)}moveDown(){if(z.prototype.moveDown.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[this.index+1].getCanvas()._canvas))}return!0}return!1}moveToBottom(){if(z.prototype.moveToBottom.call(this)){var e=this.getStage();if(e){var n=e.children;e.content&&(e.content.removeChild(this.getNativeCanvasElement()),e.content.insertBefore(this.getNativeCanvasElement(),n[1].getCanvas()._canvas))}return!0}return!1}getLayer(){return this}remove(){var e=this.getNativeCanvasElement();return z.prototype.remove.call(this),e&&e.parentNode&&P._isInDocument(e)&&e.parentNode.removeChild(e),this}getStage(){return this.parent}setSize({width:e,height:n}){return this.canvas.setSize(e,n),this.hitCanvas.setSize(e,n),this._setSmoothEnabled(),this}_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&P.throw("You may only add groups and shapes to a layer.")}_toKonvaCanvas(e){return e=e||{},e.width=e.width||this.getWidth(),e.height=e.height||this.getHeight(),e.x=e.x!==void 0?e.x:this.x(),e.y=e.y!==void 0?e.y:this.y(),z.prototype._toKonvaCanvas.call(this,e)}_checkVisibility(){this.visible()?this.canvas._canvas.style.display="block":this.canvas._canvas.style.display="none"}_setSmoothEnabled(){this.getContext()._context.imageSmoothingEnabled=this.imageSmoothingEnabled()}getWidth(){if(this.parent)return this.parent.width()}setWidth(){P.warn('Can not change width of layer. Use "stage.width(value)" function instead.')}getHeight(){if(this.parent)return this.parent.height()}setHeight(){P.warn('Can not change height of layer. Use "stage.height(value)" function instead.')}batchDraw(){return this._waitingForDraw||(this._waitingForDraw=!0,P.requestAnimFrame(()=>{this.draw(),this._waitingForDraw=!1})),this}getIntersection(e){if(!this.isListening()||!this.isVisible())return null;for(var n=1,a=!1;;){for(let s=0;s<ff;s++){const l=dh[s],u=this._getIntersection({x:e.x+l.x*n,y:e.y+l.y*n}),f=u.shape;if(f)return f;if(a=!!u.antialiased,!u.antialiased)break}if(a)n+=1;else return null}}_getIntersection(e){const n=this.hitCanvas.pixelRatio,a=this.hitCanvas.context.getImageData(Math.round(e.x*n),Math.round(e.y*n),1,1).data,s=a[3];if(s===255){const l=P._rgbToHex(a[0],a[1],a[2]),u=Tn[hf+l];return u?{shape:u}:{antialiased:!0}}else if(s>0)return{antialiased:!0};return{}}drawScene(e,n){var a=this.getLayer(),s=e||a&&a.getCanvas();return this._fire(uf,{node:this}),this.clearBeforeDraw()&&s.getContext().clear(),lt.prototype.drawScene.call(this,s,n),this._fire(df,{node:this}),this}drawHit(e,n){var a=this.getLayer(),s=e||a&&a.hitCanvas;return a&&a.clearBeforeDraw()&&a.getHitCanvas().getContext().clear(),lt.prototype.drawHit.call(this,s,n),this}enableHitGraph(){return this.hitGraphEnabled(!0),this}disableHitGraph(){return this.hitGraphEnabled(!1),this}setHitGraphEnabled(e){P.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening(e)}getHitGraphEnabled(e){return P.warn("hitGraphEnabled method is deprecated. Please use layer.listening() instead."),this.listening()}toggleHitCanvas(){if(!(!this.parent||!this.parent.content)){var e=this.parent,n=!!this.hitCanvas._canvas.parentNode;n?e.content.removeChild(this.hitCanvas._canvas):e.content.appendChild(this.hitCanvas._canvas)}}}Sr.prototype.nodeType="Layer";Re(Sr);w.addGetterSetter(Sr,"imageSmoothingEnabled",!0);w.addGetterSetter(Sr,"clearBeforeDraw",!0);w.addGetterSetter(Sr,"hitGraphEnabled",!0,Pt());class Ps extends Sr{constructor(e){super(e),this.listening(!1),P.warn('Konva.Fast layer is deprecated. Please use "new Konva.Layer({ listening: false })" instead.')}}Ps.prototype.nodeType="FastLayer";Re(Ps);class Wr extends lt{_validateAdd(e){var n=e.getType();n!=="Group"&&n!=="Shape"&&P.throw("You may only add groups and shapes to groups.")}}Wr.prototype.nodeType="Group";Re(Wr);var hs=function(){return Hr.performance&&Hr.performance.now?function(){return Hr.performance.now()}:function(){return new Date().getTime()}}();class vt{constructor(e,n){this.id=vt.animIdCounter++,this.frame={time:0,timeDiff:0,lastTime:hs(),frameRate:0},this.func=e,this.setLayers(n)}setLayers(e){var n=[];return e?e.length>0?n=e:n=[e]:n=[],this.layers=n,this}getLayers(){return this.layers}addLayer(e){var n=this.layers,a=n.length,s;for(s=0;s<a;s++)if(n[s]._id===e._id)return!1;return this.layers.push(e),!0}isRunning(){var e=vt,n=e.animations,a=n.length,s;for(s=0;s<a;s++)if(n[s].id===this.id)return!0;return!1}start(){return this.stop(),this.frame.timeDiff=0,this.frame.lastTime=hs(),vt._addAnimation(this),this}stop(){return vt._removeAnimation(this),this}_updateFrameObject(e){this.frame.timeDiff=e-this.frame.lastTime,this.frame.lastTime=e,this.frame.time+=this.frame.timeDiff,this.frame.frameRate=1e3/this.frame.timeDiff}static _addAnimation(e){this.animations.push(e),this._handleAnimation()}static _removeAnimation(e){var n=e.id,a=this.animations,s=a.length,l;for(l=0;l<s;l++)if(a[l].id===n){this.animations.splice(l,1);break}}static _runFrames(){var e={},n=this.animations,a,s,l,u,f,c,p,v,S;for(u=0;u<n.length;u++)if(a=n[u],s=a.layers,l=a.func,a._updateFrameObject(hs()),c=s.length,l?S=l.call(a,a.frame)!==!1:S=!0,!!S)for(f=0;f<c;f++)p=s[f],p._id!==void 0&&(e[p._id]=p);for(v in e)!e.hasOwnProperty(v)||e[v].batchDraw()}static _animationLoop(){var e=vt;e.animations.length?(e._runFrames(),P.requestAnimFrame(e._animationLoop)):e.animRunning=!1}static _handleAnimation(){this.animRunning||(this.animRunning=!0,P.requestAnimFrame(this._animationLoop))}}vt.animations=[];vt.animIdCounter=0;vt.animRunning=!1;var cf={node:1,duration:1,easing:1,onFinish:1,yoyo:1},gf=1,Ll=2,Il=3,pf=0,Nl=["fill","stroke","shadowColor"];class vf{constructor(e,n,a,s,l,u,f){this.prop=e,this.propFunc=n,this.begin=s,this._pos=s,this.duration=u,this._change=0,this.prevPos=0,this.yoyo=f,this._time=0,this._position=0,this._startTime=0,this._finish=0,this.func=a,this._change=l-this.begin,this.pause()}fire(e){var n=this[e];n&&n()}setTime(e){e>this.duration?this.yoyo?(this._time=this.duration,this.reverse()):this.finish():e<0?this.yoyo?(this._time=0,this.play()):this.reset():(this._time=e,this.update())}getTime(){return this._time}setPosition(e){this.prevPos=this._pos,this.propFunc(e),this._pos=e}getPosition(e){return e===void 0&&(e=this._time),this.func(e,this.begin,this._change,this.duration)}play(){this.state=Ll,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onPlay")}reverse(){this.state=Il,this._time=this.duration-this._time,this._startTime=this.getTimer()-this._time,this.onEnterFrame(),this.fire("onReverse")}seek(e){this.pause(),this._time=e,this.update(),this.fire("onSeek")}reset(){this.pause(),this._time=0,this.update(),this.fire("onReset")}finish(){this.pause(),this._time=this.duration,this.update(),this.fire("onFinish")}update(){this.setPosition(this.getPosition(this._time)),this.fire("onUpdate")}onEnterFrame(){var e=this.getTimer()-this._startTime;this.state===Ll?this.setTime(e):this.state===Il&&this.setTime(this.duration-e)}pause(){this.state=gf,this.fire("onPause")}getTimer(){return new Date().getTime()}}class Le{constructor(e){var n=this,a=e.node,s=a._id,l,u=e.easing||Rn.Linear,f=!!e.yoyo,c;typeof e.duration=="undefined"?l=.3:e.duration===0?l=.001:l=e.duration,this.node=a,this._id=pf++;var p=a.getLayer()||(a instanceof V.Stage?a.getLayers():null);p||P.error("Tween constructor have `node` that is not in a layer. Please add node into layer first."),this.anim=new vt(function(){n.tween.onEnterFrame()},p),this.tween=new vf(c,function(v){n._tweenFunc(v)},u,0,1,l*1e3,f),this._addListeners(),Le.attrs[s]||(Le.attrs[s]={}),Le.attrs[s][this._id]||(Le.attrs[s][this._id]={}),Le.tweens[s]||(Le.tweens[s]={});for(c in e)cf[c]===void 0&&this._addAttr(c,e[c]);this.reset(),this.onFinish=e.onFinish,this.onReset=e.onReset,this.onUpdate=e.onUpdate}_addAttr(e,n){var a=this.node,s=a._id,l,u,f,c,p,v,S,y;if(f=Le.tweens[s][e],f&&delete Le.attrs[s][f][e],l=a.getAttr(e),P._isArray(n))if(u=[],p=Math.max(n.length,l.length),e==="points"&&n.length!==l.length&&(n.length>l.length?(S=l,l=P._prepareArrayForTween(l,n,a.closed())):(v=n,n=P._prepareArrayForTween(n,l,a.closed()))),e.indexOf("fill")===0)for(c=0;c<p;c++)if(c%2===0)u.push(n[c]-l[c]);else{var x=P.colorToRGBA(l[c]);y=P.colorToRGBA(n[c]),l[c]=x,u.push({r:y.r-x.r,g:y.g-x.g,b:y.b-x.b,a:y.a-x.a})}else for(c=0;c<p;c++)u.push(n[c]-l[c]);else Nl.indexOf(e)!==-1?(l=P.colorToRGBA(l),y=P.colorToRGBA(n),u={r:y.r-l.r,g:y.g-l.g,b:y.b-l.b,a:y.a-l.a}):u=n-l;Le.attrs[s][this._id][e]={start:l,diff:u,end:n,trueEnd:v,trueStart:S},Le.tweens[s][e]=this._id}_tweenFunc(e){var n=this.node,a=Le.attrs[n._id][this._id],s,l,u,f,c,p,v,S;for(s in a){if(l=a[s],u=l.start,f=l.diff,S=l.end,P._isArray(u))if(c=[],v=Math.max(u.length,S.length),s.indexOf("fill")===0)for(p=0;p<v;p++)p%2===0?c.push((u[p]||0)+f[p]*e):c.push("rgba("+Math.round(u[p].r+f[p].r*e)+","+Math.round(u[p].g+f[p].g*e)+","+Math.round(u[p].b+f[p].b*e)+","+(u[p].a+f[p].a*e)+")");else for(p=0;p<v;p++)c.push((u[p]||0)+f[p]*e);else Nl.indexOf(s)!==-1?c="rgba("+Math.round(u.r+f.r*e)+","+Math.round(u.g+f.g*e)+","+Math.round(u.b+f.b*e)+","+(u.a+f.a*e)+")":c=u+f*e;n.setAttr(s,c)}}_addListeners(){this.tween.onPlay=()=>{this.anim.start()},this.tween.onReverse=()=>{this.anim.start()},this.tween.onPause=()=>{this.anim.stop()},this.tween.onFinish=()=>{var e=this.node,n=Le.attrs[e._id][this._id];n.points&&n.points.trueEnd&&e.setAttr("points",n.points.trueEnd),this.onFinish&&this.onFinish.call(this)},this.tween.onReset=()=>{var e=this.node,n=Le.attrs[e._id][this._id];n.points&&n.points.trueStart&&e.points(n.points.trueStart),this.onReset&&this.onReset()},this.tween.onUpdate=()=>{this.onUpdate&&this.onUpdate.call(this)}}play(){return this.tween.play(),this}reverse(){return this.tween.reverse(),this}reset(){return this.tween.reset(),this}seek(e){return this.tween.seek(e*1e3),this}pause(){return this.tween.pause(),this}finish(){return this.tween.finish(),this}destroy(){var e=this.node._id,n=this._id,a=Le.tweens[e],s;this.pause();for(s in a)delete Le.tweens[e][s];delete Le.attrs[e][n]}}Le.attrs={};Le.tweens={};z.prototype.to=function(h){var e=h.onFinish;h.node=this,h.onFinish=function(){this.destroy(),e&&e()};var n=new Le(h);n.play()};const Rn={BackEaseIn(h,e,n,a){var s=1.70158;return n*(h/=a)*h*((s+1)*h-s)+e},BackEaseOut(h,e,n,a){var s=1.70158;return n*((h=h/a-1)*h*((s+1)*h+s)+1)+e},BackEaseInOut(h,e,n,a){var s=1.70158;return(h/=a/2)<1?n/2*(h*h*(((s*=1.525)+1)*h-s))+e:n/2*((h-=2)*h*(((s*=1.525)+1)*h+s)+2)+e},ElasticEaseIn(h,e,n,a,s,l){var u=0;return h===0?e:(h/=a)===1?e+n:(l||(l=a*.3),!s||s<Math.abs(n)?(s=n,u=l/4):u=l/(2*Math.PI)*Math.asin(n/s),-(s*Math.pow(2,10*(h-=1))*Math.sin((h*a-u)*(2*Math.PI)/l))+e)},ElasticEaseOut(h,e,n,a,s,l){var u=0;return h===0?e:(h/=a)===1?e+n:(l||(l=a*.3),!s||s<Math.abs(n)?(s=n,u=l/4):u=l/(2*Math.PI)*Math.asin(n/s),s*Math.pow(2,-10*h)*Math.sin((h*a-u)*(2*Math.PI)/l)+n+e)},ElasticEaseInOut(h,e,n,a,s,l){var u=0;return h===0?e:(h/=a/2)===2?e+n:(l||(l=a*(.3*1.5)),!s||s<Math.abs(n)?(s=n,u=l/4):u=l/(2*Math.PI)*Math.asin(n/s),h<1?-.5*(s*Math.pow(2,10*(h-=1))*Math.sin((h*a-u)*(2*Math.PI)/l))+e:s*Math.pow(2,-10*(h-=1))*Math.sin((h*a-u)*(2*Math.PI)/l)*.5+n+e)},BounceEaseOut(h,e,n,a){return(h/=a)<1/2.75?n*(7.5625*h*h)+e:h<2/2.75?n*(7.5625*(h-=1.5/2.75)*h+.75)+e:h<2.5/2.75?n*(7.5625*(h-=2.25/2.75)*h+.9375)+e:n*(7.5625*(h-=2.625/2.75)*h+.984375)+e},BounceEaseIn(h,e,n,a){return n-Rn.BounceEaseOut(a-h,0,n,a)+e},BounceEaseInOut(h,e,n,a){return h<a/2?Rn.BounceEaseIn(h*2,0,n,a)*.5+e:Rn.BounceEaseOut(h*2-a,0,n,a)*.5+n*.5+e},EaseIn(h,e,n,a){return n*(h/=a)*h+e},EaseOut(h,e,n,a){return-n*(h/=a)*(h-2)+e},EaseInOut(h,e,n,a){return(h/=a/2)<1?n/2*h*h+e:-n/2*(--h*(h-2)-1)+e},StrongEaseIn(h,e,n,a){return n*(h/=a)*h*h*h*h+e},StrongEaseOut(h,e,n,a){return n*((h=h/a-1)*h*h*h*h+1)+e},StrongEaseInOut(h,e,n,a){return(h/=a/2)<1?n/2*h*h*h*h*h+e:n/2*((h-=2)*h*h*h*h+2)+e},Linear(h,e,n,a){return n*h/a+e}},_r=P._assign(V,{Util:P,Transform:ot,Node:z,Container:lt,Stage:Yi,stages:Bi,Layer:Sr,FastLayer:Ps,Group:Wr,DD:ce,Shape:N,shapes:Tn,Animation:vt,Tween:Le,Easings:Rn,Context:Ui,Canvas:Wi});class Yt extends N{_sceneFunc(e){var n=V.getAngle(this.angle()),a=this.clockwise();e.beginPath(),e.arc(0,0,this.outerRadius(),0,n,a),e.arc(0,0,this.innerRadius(),n,0,!a),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}getSelfRect(){const e=this.innerRadius(),n=this.outerRadius(),a=this.clockwise(),s=V.getAngle(a?360-this.angle():this.angle()),l=Math.cos(Math.min(s,Math.PI)),u=1,f=Math.sin(Math.min(Math.max(Math.PI,s),3*Math.PI/2)),c=Math.sin(Math.min(s,Math.PI/2)),p=l*(l>0?e:n),v=u*n,S=f*(f>0?e:n),y=c*(c>0?n:e);return{x:p,y:a?-1*y:S,width:v-p,height:y-S}}}Yt.prototype._centroid=!0;Yt.prototype.className="Arc";Yt.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Re(Yt);w.addGetterSetter(Yt,"innerRadius",0,G());w.addGetterSetter(Yt,"outerRadius",0,G());w.addGetterSetter(Yt,"angle",0,G());w.addGetterSetter(Yt,"clockwise",!1,Pt());function ms(h,e,n,a,s,l,u){var f=Math.sqrt(Math.pow(n-h,2)+Math.pow(a-e,2)),c=Math.sqrt(Math.pow(s-n,2)+Math.pow(l-a,2)),p=u*f/(f+c),v=u*c/(f+c),S=n-p*(s-h),y=a-p*(l-e),x=n+v*(s-h),_=a+v*(l-e);return[S,y,x,_]}function Ol(h,e){var n=h.length,a=[],s,l;for(s=2;s<n-2;s+=2)l=ms(h[s-2],h[s-1],h[s],h[s+1],h[s+2],h[s+3],e),!isNaN(l[0])&&(a.push(l[0]),a.push(l[1]),a.push(h[s]),a.push(h[s+1]),a.push(l[2]),a.push(l[3]));return a}class Xt extends N{constructor(e){super(e),this.on("pointsChange.konva tensionChange.konva closedChange.konva bezierChange.konva",function(){this._clearCache("tensionPoints")})}_sceneFunc(e){var n=this.points(),a=n.length,s=this.tension(),l=this.closed(),u=this.bezier(),f,c,p;if(!!a){if(e.beginPath(),e.moveTo(n[0],n[1]),s!==0&&a>4){for(f=this.getTensionPoints(),c=f.length,p=l?0:4,l||e.quadraticCurveTo(f[0],f[1],f[2],f[3]);p<c-2;)e.bezierCurveTo(f[p++],f[p++],f[p++],f[p++],f[p++],f[p++]);l||e.quadraticCurveTo(f[c-2],f[c-1],n[a-2],n[a-1])}else if(u)for(p=2;p<a;)e.bezierCurveTo(n[p++],n[p++],n[p++],n[p++],n[p++],n[p++]);else for(p=2;p<a;p+=2)e.lineTo(n[p],n[p+1]);l?(e.closePath(),e.fillStrokeShape(this)):e.strokeShape(this)}}getTensionPoints(){return this._getCache("tensionPoints",this._getTensionPoints)}_getTensionPoints(){return this.closed()?this._getTensionPointsClosed():Ol(this.points(),this.tension())}_getTensionPointsClosed(){var e=this.points(),n=e.length,a=this.tension(),s=ms(e[n-2],e[n-1],e[0],e[1],e[2],e[3],a),l=ms(e[n-4],e[n-3],e[n-2],e[n-1],e[0],e[1],a),u=Ol(e,a),f=[s[2],s[3]].concat(u).concat([l[0],l[1],e[n-2],e[n-1],l[2],l[3],s[0],s[1],e[0],e[1]]);return f}getWidth(){return this.getSelfRect().width}getHeight(){return this.getSelfRect().height}getSelfRect(){var e=this.points();if(e.length<4)return{x:e[0]||0,y:e[1]||0,width:0,height:0};this.tension()!==0?e=[e[0],e[1],...this._getTensionPoints(),e[e.length-2],e[e.length-1]]:e=this.points();for(var n=e[0],a=e[0],s=e[1],l=e[1],u,f,c=0;c<e.length/2;c++)u=e[c*2],f=e[c*2+1],n=Math.min(n,u),a=Math.max(a,u),s=Math.min(s,f),l=Math.max(l,f);return{x:n,y:s,width:a-n,height:l-s}}}Xt.prototype.className="Line";Xt.prototype._attrsAffectingSize=["points","bezier","tension"];Re(Xt);w.addGetterSetter(Xt,"closed",!1);w.addGetterSetter(Xt,"bezier",!1);w.addGetterSetter(Xt,"tension",0,G());w.addGetterSetter(Xt,"points",[],Pd());class ve extends N{constructor(e){super(e),this.dataArray=[],this.pathLength=0,this.dataArray=ve.parsePathData(this.data()),this.pathLength=0;for(var n=0;n<this.dataArray.length;++n)this.pathLength+=this.dataArray[n].pathLength;this.on("dataChange.konva",function(){this.dataArray=ve.parsePathData(this.data()),this.pathLength=0;for(var a=0;a<this.dataArray.length;++a)this.pathLength+=this.dataArray[a].pathLength})}_sceneFunc(e){var n=this.dataArray;e.beginPath();for(var a=!1,s=0;s<n.length;s++){var l=n[s].command,u=n[s].points;switch(l){case"L":e.lineTo(u[0],u[1]);break;case"M":e.moveTo(u[0],u[1]);break;case"C":e.bezierCurveTo(u[0],u[1],u[2],u[3],u[4],u[5]);break;case"Q":e.quadraticCurveTo(u[0],u[1],u[2],u[3]);break;case"A":var f=u[0],c=u[1],p=u[2],v=u[3],S=u[4],y=u[5],x=u[6],_=u[7],A=p>v?p:v,E=p>v?1:p/v,O=p>v?v/p:1;e.translate(f,c),e.rotate(x),e.scale(E,O),e.arc(0,0,A,S,S+y,1-_),e.scale(1/E,1/O),e.rotate(-x),e.translate(-f,-c);break;case"z":a=!0,e.closePath();break}}!a&&!this.hasFill()?e.strokeShape(this):e.fillStrokeShape(this)}getSelfRect(){var e=[];this.dataArray.forEach(function(p){if(p.command==="A"){var v=p.points[4],S=p.points[5],y=p.points[4]+S,x=Math.PI/180;if(Math.abs(v-y)<x&&(x=Math.abs(v-y)),S<0)for(let _=v-x;_>y;_-=x){const A=ve.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],_,0);e.push(A.x,A.y)}else for(let _=v+x;_<y;_+=x){const A=ve.getPointOnEllipticalArc(p.points[0],p.points[1],p.points[2],p.points[3],_,0);e.push(A.x,A.y)}}else if(p.command==="C")for(let _=0;_<=1;_+=.01){const A=ve.getPointOnCubicBezier(_,p.start.x,p.start.y,p.points[0],p.points[1],p.points[2],p.points[3],p.points[4],p.points[5]);e.push(A.x,A.y)}else e=e.concat(p.points)});for(var n=e[0],a=e[0],s=e[1],l=e[1],u,f,c=0;c<e.length/2;c++)u=e[c*2],f=e[c*2+1],isNaN(u)||(n=Math.min(n,u),a=Math.max(a,u)),isNaN(f)||(s=Math.min(s,f),l=Math.max(l,f));return{x:n,y:s,width:a-n,height:l-s}}getLength(){return this.pathLength}getPointAtLength(e){var n,a=0,s=this.dataArray.length;if(!s)return null;for(;a<s&&e>this.dataArray[a].pathLength;)e-=this.dataArray[a].pathLength,++a;if(a===s)return n=this.dataArray[a-1].points.slice(-2),{x:n[0],y:n[1]};if(e<.01)return n=this.dataArray[a].points.slice(0,2),{x:n[0],y:n[1]};var l=this.dataArray[a],u=l.points;switch(l.command){case"L":return ve.getPointOnLine(e,l.start.x,l.start.y,u[0],u[1]);case"C":return ve.getPointOnCubicBezier(e/l.pathLength,l.start.x,l.start.y,u[0],u[1],u[2],u[3],u[4],u[5]);case"Q":return ve.getPointOnQuadraticBezier(e/l.pathLength,l.start.x,l.start.y,u[0],u[1],u[2],u[3]);case"A":var f=u[0],c=u[1],p=u[2],v=u[3],S=u[4],y=u[5],x=u[6];return S+=y*e/l.pathLength,ve.getPointOnEllipticalArc(f,c,p,v,S,x)}return null}static getLineLength(e,n,a,s){return Math.sqrt((a-e)*(a-e)+(s-n)*(s-n))}static getPointOnLine(e,n,a,s,l,u,f){u===void 0&&(u=n),f===void 0&&(f=a);var c=(l-a)/(s-n+1e-8),p=Math.sqrt(e*e/(1+c*c));s<n&&(p*=-1);var v=c*p,S;if(s===n)S={x:u,y:f+v};else if((f-a)/(u-n+1e-8)===c)S={x:u+p,y:f+v};else{var y,x,_=this.getLineLength(n,a,s,l),A=(u-n)*(s-n)+(f-a)*(l-a);A=A/(_*_),y=n+A*(s-n),x=a+A*(l-a);var E=this.getLineLength(u,f,y,x),O=Math.sqrt(e*e-E*E);p=Math.sqrt(O*O/(1+c*c)),s<n&&(p*=-1),v=c*p,S={x:y+p,y:x+v}}return S}static getPointOnCubicBezier(e,n,a,s,l,u,f,c,p){function v(E){return E*E*E}function S(E){return 3*E*E*(1-E)}function y(E){return 3*E*(1-E)*(1-E)}function x(E){return(1-E)*(1-E)*(1-E)}var _=c*v(e)+u*S(e)+s*y(e)+n*x(e),A=p*v(e)+f*S(e)+l*y(e)+a*x(e);return{x:_,y:A}}static getPointOnQuadraticBezier(e,n,a,s,l,u,f){function c(x){return x*x}function p(x){return 2*x*(1-x)}function v(x){return(1-x)*(1-x)}var S=u*c(e)+s*p(e)+n*v(e),y=f*c(e)+l*p(e)+a*v(e);return{x:S,y}}static getPointOnEllipticalArc(e,n,a,s,l,u){var f=Math.cos(u),c=Math.sin(u),p={x:a*Math.cos(l),y:s*Math.sin(l)};return{x:e+(p.x*f-p.y*c),y:n+(p.x*c+p.y*f)}}static parsePathData(e){if(!e)return[];var n=e,a=["m","M","l","L","v","V","h","H","z","Z","c","C","q","Q","t","T","s","S","a","A"];n=n.replace(new RegExp(" ","g"),",");for(var s=0;s<a.length;s++)n=n.replace(new RegExp(a[s],"g"),"|"+a[s]);var l=n.split("|"),u=[],f=[],c=0,p=0,v=/([-+]?((\d+\.\d+)|((\d+)|(\.\d+)))(?:e[-+]?\d+)?)/gi,S;for(s=1;s<l.length;s++){var y=l[s],x=y.charAt(0);for(y=y.slice(1),f.length=0;S=v.exec(y);)f.push(S[0]);for(var _=[],A=0,E=f.length;A<E;A++){if(f[A]==="00"){_.push(0,0);continue}var O=parseFloat(f[A]);isNaN(O)?_.push(0):_.push(O)}for(;_.length>0&&!isNaN(_[0]);){var I=null,L=[],D=c,Y=p,b,j,U,Q,J,q,ne,Z,ge,Ae;switch(x){case"l":c+=_.shift(),p+=_.shift(),I="L",L.push(c,p);break;case"L":c=_.shift(),p=_.shift(),L.push(c,p);break;case"m":var ae=_.shift(),me=_.shift();if(c+=ae,p+=me,I="M",u.length>2&&u[u.length-1].command==="z"){for(var B=u.length-2;B>=0;B--)if(u[B].command==="M"){c=u[B].points[0]+ae,p=u[B].points[1]+me;break}}L.push(c,p),x="l";break;case"M":c=_.shift(),p=_.shift(),I="M",L.push(c,p),x="L";break;case"h":c+=_.shift(),I="L",L.push(c,p);break;case"H":c=_.shift(),I="L",L.push(c,p);break;case"v":p+=_.shift(),I="L",L.push(c,p);break;case"V":p=_.shift(),I="L",L.push(c,p);break;case"C":L.push(_.shift(),_.shift(),_.shift(),_.shift()),c=_.shift(),p=_.shift(),L.push(c,p);break;case"c":L.push(c+_.shift(),p+_.shift(),c+_.shift(),p+_.shift()),c+=_.shift(),p+=_.shift(),I="C",L.push(c,p);break;case"S":j=c,U=p,b=u[u.length-1],b.command==="C"&&(j=c+(c-b.points[2]),U=p+(p-b.points[3])),L.push(j,U,_.shift(),_.shift()),c=_.shift(),p=_.shift(),I="C",L.push(c,p);break;case"s":j=c,U=p,b=u[u.length-1],b.command==="C"&&(j=c+(c-b.points[2]),U=p+(p-b.points[3])),L.push(j,U,c+_.shift(),p+_.shift()),c+=_.shift(),p+=_.shift(),I="C",L.push(c,p);break;case"Q":L.push(_.shift(),_.shift()),c=_.shift(),p=_.shift(),L.push(c,p);break;case"q":L.push(c+_.shift(),p+_.shift()),c+=_.shift(),p+=_.shift(),I="Q",L.push(c,p);break;case"T":j=c,U=p,b=u[u.length-1],b.command==="Q"&&(j=c+(c-b.points[0]),U=p+(p-b.points[1])),c=_.shift(),p=_.shift(),I="Q",L.push(j,U,c,p);break;case"t":j=c,U=p,b=u[u.length-1],b.command==="Q"&&(j=c+(c-b.points[0]),U=p+(p-b.points[1])),c+=_.shift(),p+=_.shift(),I="Q",L.push(j,U,c,p);break;case"A":Q=_.shift(),J=_.shift(),q=_.shift(),ne=_.shift(),Z=_.shift(),ge=c,Ae=p,c=_.shift(),p=_.shift(),I="A",L=this.convertEndpointToCenterParameterization(ge,Ae,c,p,ne,Z,Q,J,q);break;case"a":Q=_.shift(),J=_.shift(),q=_.shift(),ne=_.shift(),Z=_.shift(),ge=c,Ae=p,c+=_.shift(),p+=_.shift(),I="A",L=this.convertEndpointToCenterParameterization(ge,Ae,c,p,ne,Z,Q,J,q);break}u.push({command:I||x,points:L,start:{x:D,y:Y},pathLength:this.calcLength(D,Y,I||x,L)})}(x==="z"||x==="Z")&&u.push({command:"z",points:[],start:void 0,pathLength:0})}return u}static calcLength(e,n,a,s){var l,u,f,c,p=ve;switch(a){case"L":return p.getLineLength(e,n,s[0],s[1]);case"C":for(l=0,u=p.getPointOnCubicBezier(0,e,n,s[0],s[1],s[2],s[3],s[4],s[5]),c=.01;c<=1;c+=.01)f=p.getPointOnCubicBezier(c,e,n,s[0],s[1],s[2],s[3],s[4],s[5]),l+=p.getLineLength(u.x,u.y,f.x,f.y),u=f;return l;case"Q":for(l=0,u=p.getPointOnQuadraticBezier(0,e,n,s[0],s[1],s[2],s[3]),c=.01;c<=1;c+=.01)f=p.getPointOnQuadraticBezier(c,e,n,s[0],s[1],s[2],s[3]),l+=p.getLineLength(u.x,u.y,f.x,f.y),u=f;return l;case"A":l=0;var v=s[4],S=s[5],y=s[4]+S,x=Math.PI/180;if(Math.abs(v-y)<x&&(x=Math.abs(v-y)),u=p.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],v,0),S<0)for(c=v-x;c>y;c-=x)f=p.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],c,0),l+=p.getLineLength(u.x,u.y,f.x,f.y),u=f;else for(c=v+x;c<y;c+=x)f=p.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],c,0),l+=p.getLineLength(u.x,u.y,f.x,f.y),u=f;return f=p.getPointOnEllipticalArc(s[0],s[1],s[2],s[3],y,0),l+=p.getLineLength(u.x,u.y,f.x,f.y),l}return 0}static convertEndpointToCenterParameterization(e,n,a,s,l,u,f,c,p){var v=p*(Math.PI/180),S=Math.cos(v)*(e-a)/2+Math.sin(v)*(n-s)/2,y=-1*Math.sin(v)*(e-a)/2+Math.cos(v)*(n-s)/2,x=S*S/(f*f)+y*y/(c*c);x>1&&(f*=Math.sqrt(x),c*=Math.sqrt(x));var _=Math.sqrt((f*f*(c*c)-f*f*(y*y)-c*c*(S*S))/(f*f*(y*y)+c*c*(S*S)));l===u&&(_*=-1),isNaN(_)&&(_=0);var A=_*f*y/c,E=_*-c*S/f,O=(e+a)/2+Math.cos(v)*A-Math.sin(v)*E,I=(n+s)/2+Math.sin(v)*A+Math.cos(v)*E,L=function(J){return Math.sqrt(J[0]*J[0]+J[1]*J[1])},D=function(J,q){return(J[0]*q[0]+J[1]*q[1])/(L(J)*L(q))},Y=function(J,q){return(J[0]*q[1]<J[1]*q[0]?-1:1)*Math.acos(D(J,q))},b=Y([1,0],[(S-A)/f,(y-E)/c]),j=[(S-A)/f,(y-E)/c],U=[(-1*S-A)/f,(-1*y-E)/c],Q=Y(j,U);return D(j,U)<=-1&&(Q=Math.PI),D(j,U)>=1&&(Q=0),u===0&&Q>0&&(Q=Q-2*Math.PI),u===1&&Q<0&&(Q=Q+2*Math.PI),[O,I,f,c,b,Q,v,u]}}ve.prototype.className="Path";ve.prototype._attrsAffectingSize=["data"];Re(ve);w.addGetterSetter(ve,"data");class wr extends Xt{_sceneFunc(e){super._sceneFunc(e);var n=Math.PI*2,a=this.points(),s=a,l=this.tension()!==0&&a.length>4;l&&(s=this.getTensionPoints());var u=this.pointerLength(),f=a.length,c,p;if(l){const y=[s[s.length-4],s[s.length-3],s[s.length-2],s[s.length-1],a[f-2],a[f-1]],x=ve.calcLength(s[s.length-4],s[s.length-3],"C",y),_=ve.getPointOnQuadraticBezier(Math.min(1,1-u/x),y[0],y[1],y[2],y[3],y[4],y[5]);c=a[f-2]-_.x,p=a[f-1]-_.y}else c=a[f-2]-a[f-4],p=a[f-1]-a[f-3];var v=(Math.atan2(p,c)+n)%n,S=this.pointerWidth();this.pointerAtEnding()&&(e.save(),e.beginPath(),e.translate(a[f-2],a[f-1]),e.rotate(v),e.moveTo(0,0),e.lineTo(-u,S/2),e.lineTo(-u,-S/2),e.closePath(),e.restore(),this.__fillStroke(e)),this.pointerAtBeginning()&&(e.save(),e.beginPath(),e.translate(a[0],a[1]),l?(c=(s[0]+s[2])/2-a[0],p=(s[1]+s[3])/2-a[1]):(c=a[2]-a[0],p=a[3]-a[1]),e.rotate((Math.atan2(-p,-c)+n)%n),e.moveTo(0,0),e.lineTo(-u,S/2),e.lineTo(-u,-S/2),e.closePath(),e.restore(),this.__fillStroke(e))}__fillStroke(e){var n=this.dashEnabled();n&&(this.attrs.dashEnabled=!1,e.setLineDash([])),e.fillStrokeShape(this),n&&(this.attrs.dashEnabled=!0)}getSelfRect(){const e=super.getSelfRect(),n=this.pointerWidth()/2;return{x:e.x-n,y:e.y-n,width:e.width+n*2,height:e.height+n*2}}}wr.prototype.className="Arrow";Re(wr);w.addGetterSetter(wr,"pointerLength",10,G());w.addGetterSetter(wr,"pointerWidth",10,G());w.addGetterSetter(wr,"pointerAtBeginning",!1);w.addGetterSetter(wr,"pointerAtEnding",!0);class Xr extends N{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.attrs.radius||0,0,Math.PI*2,!1),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius()!==e/2&&this.radius(e/2)}setHeight(e){this.radius()!==e/2&&this.radius(e/2)}}Xr.prototype._centroid=!0;Xr.prototype.className="Circle";Xr.prototype._attrsAffectingSize=["radius"];Re(Xr);w.addGetterSetter(Xr,"radius",0,G());class ar extends N{_sceneFunc(e){var n=this.radiusX(),a=this.radiusY();e.beginPath(),e.save(),n!==a&&e.scale(1,a/n),e.arc(0,0,n,0,Math.PI*2,!1),e.restore(),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radiusX()*2}getHeight(){return this.radiusY()*2}setWidth(e){this.radiusX(e/2)}setHeight(e){this.radiusY(e/2)}}ar.prototype.className="Ellipse";ar.prototype._centroid=!0;ar.prototype._attrsAffectingSize=["radiusX","radiusY"];Re(ar);w.addComponentsGetterSetter(ar,"radius",["x","y"]);w.addGetterSetter(ar,"radiusX",0,G());w.addGetterSetter(ar,"radiusY",0,G());class Et extends N{constructor(e){super(e),this.on("imageChange.konva",()=>{this._setImageLoad()}),this._setImageLoad()}_setImageLoad(){const e=this.image();e&&e.complete||e&&e.readyState===4||e&&e.addEventListener&&e.addEventListener("load",()=>{this._requestDraw()})}_useBufferCanvas(){return super._useBufferCanvas(!0)}_sceneFunc(e){const n=this.getWidth(),a=this.getHeight(),s=this.attrs.image;let l;if(s){const u=this.attrs.cropWidth,f=this.attrs.cropHeight;u&&f?l=[s,this.cropX(),this.cropY(),u,f,0,0,n,a]:l=[s,0,0,n,a]}(this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,n,a),e.closePath(),e.fillStrokeShape(this)),s&&e.drawImage.apply(e,l)}_hitFunc(e){var n=this.width(),a=this.height();e.beginPath(),e.rect(0,0,n,a),e.closePath(),e.fillStrokeShape(this)}getWidth(){var e,n;return(e=this.attrs.width)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.width}getHeight(){var e,n;return(e=this.attrs.height)!==null&&e!==void 0?e:(n=this.image())===null||n===void 0?void 0:n.height}static fromURL(e,n,a=null){var s=P.createImageElement();s.onload=function(){var l=new Et({image:s});n(l)},s.onerror=a,s.crossOrigin="Anonymous",s.src=e}}Et.prototype.className="Image";Re(Et);w.addGetterSetter(Et,"image");w.addComponentsGetterSetter(Et,"crop",["x","y","width","height"]);w.addGetterSetter(Et,"cropX",0,G());w.addGetterSetter(Et,"cropY",0,G());w.addGetterSetter(Et,"cropWidth",0,G());w.addGetterSetter(Et,"cropHeight",0,G());var fh=["fontFamily","fontSize","fontStyle","padding","lineHeight","text","width","height"],mf="Change.konva",yf="none",ys="up",_s="right",Ss="down",ws="left",_f=fh.length;class Es extends Wr{constructor(e){super(e),this.on("add.konva",function(n){this._addListeners(n.child),this._sync()})}getText(){return this.find("Text")[0]}getTag(){return this.find("Tag")[0]}_addListeners(e){var n=this,a,s=function(){n._sync()};for(a=0;a<_f;a++)e.on(fh[a]+mf,s)}getWidth(){return this.getText().width()}getHeight(){return this.getText().height()}_sync(){var e=this.getText(),n=this.getTag(),a,s,l,u,f,c,p;if(e&&n){switch(a=e.width(),s=e.height(),l=n.pointerDirection(),u=n.pointerWidth(),p=n.pointerHeight(),f=0,c=0,l){case ys:f=a/2,c=-1*p;break;case _s:f=a+u,c=s/2;break;case Ss:f=a/2,c=s+p;break;case ws:f=-1*u,c=s/2;break}n.setAttrs({x:-1*f,y:-1*c,width:a,height:s}),e.setAttrs({x:-1*f,y:-1*c})}}}Es.prototype.className="Label";Re(Es);class Cr extends N{_sceneFunc(e){var n=this.width(),a=this.height(),s=this.pointerDirection(),l=this.pointerWidth(),u=this.pointerHeight(),f=this.cornerRadius();let c=0,p=0,v=0,S=0;typeof f=="number"?c=p=v=S=Math.min(f,n/2,a/2):(c=Math.min(f[0]||0,n/2,a/2),p=Math.min(f[1]||0,n/2,a/2),S=Math.min(f[2]||0,n/2,a/2),v=Math.min(f[3]||0,n/2,a/2)),e.beginPath(),e.moveTo(c,0),s===ys&&(e.lineTo((n-l)/2,0),e.lineTo(n/2,-1*u),e.lineTo((n+l)/2,0)),e.lineTo(n-p,0),e.arc(n-p,p,p,Math.PI*3/2,0,!1),s===_s&&(e.lineTo(n,(a-u)/2),e.lineTo(n+l,a/2),e.lineTo(n,(a+u)/2)),e.lineTo(n,a-S),e.arc(n-S,a-S,S,0,Math.PI/2,!1),s===Ss&&(e.lineTo((n+l)/2,a),e.lineTo(n/2,a+u),e.lineTo((n-l)/2,a)),e.lineTo(v,a),e.arc(v,a-v,v,Math.PI/2,Math.PI,!1),s===ws&&(e.lineTo(0,(a+u)/2),e.lineTo(-1*l,a/2),e.lineTo(0,(a-u)/2)),e.lineTo(0,c),e.arc(c,c,c,Math.PI,Math.PI*3/2,!1),e.closePath(),e.fillStrokeShape(this)}getSelfRect(){var e=0,n=0,a=this.pointerWidth(),s=this.pointerHeight(),l=this.pointerDirection(),u=this.width(),f=this.height();return l===ys?(n-=s,f+=s):l===Ss?f+=s:l===ws?(e-=a*1.5,u+=a):l===_s&&(u+=a*1.5),{x:e,y:n,width:u,height:f}}}Cr.prototype.className="Tag";Re(Cr);w.addGetterSetter(Cr,"pointerDirection",yf);w.addGetterSetter(Cr,"pointerWidth",0,G());w.addGetterSetter(Cr,"pointerHeight",0,G());w.addGetterSetter(Cr,"cornerRadius",0,Xl(4));class Ln extends N{_sceneFunc(e){var n=this.cornerRadius(),a=this.width(),s=this.height();if(e.beginPath(),!n)e.rect(0,0,a,s);else{let l=0,u=0,f=0,c=0;typeof n=="number"?l=u=f=c=Math.min(n,a/2,s/2):(l=Math.min(n[0]||0,a/2,s/2),u=Math.min(n[1]||0,a/2,s/2),c=Math.min(n[2]||0,a/2,s/2),f=Math.min(n[3]||0,a/2,s/2)),e.moveTo(l,0),e.lineTo(a-u,0),e.arc(a-u,u,u,Math.PI*3/2,0,!1),e.lineTo(a,s-c),e.arc(a-c,s-c,c,0,Math.PI/2,!1),e.lineTo(f,s),e.arc(f,s-f,f,Math.PI/2,Math.PI,!1),e.lineTo(0,l),e.arc(l,l,l,Math.PI,Math.PI*3/2,!1)}e.closePath(),e.fillStrokeShape(this)}}Ln.prototype.className="Rect";Re(Ln);w.addGetterSetter(Ln,"cornerRadius",0,Xl(4));class xr extends N{_sceneFunc(e){const n=this._getPoints();e.beginPath(),e.moveTo(n[0].x,n[0].y);for(var a=1;a<n.length;a++)e.lineTo(n[a].x,n[a].y);e.closePath(),e.fillStrokeShape(this)}_getPoints(){const e=this.attrs.sides,n=this.attrs.radius||0,a=[];for(var s=0;s<e;s++)a.push({x:n*Math.sin(s*2*Math.PI/e),y:-1*n*Math.cos(s*2*Math.PI/e)});return a}getSelfRect(){const e=this._getPoints();var n=e[0].x,a=e[0].y,s=e[0].x,l=e[0].y;return e.forEach(u=>{n=Math.min(n,u.x),a=Math.max(a,u.x),s=Math.min(s,u.y),l=Math.max(l,u.y)}),{x:n,y:s,width:a-n,height:l-s}}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}xr.prototype.className="RegularPolygon";xr.prototype._centroid=!0;xr.prototype._attrsAffectingSize=["radius"];Re(xr);w.addGetterSetter(xr,"radius",0,G());w.addGetterSetter(xr,"sides",0,G());var Gl=Math.PI*2;class kr extends N{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.innerRadius(),0,Gl,!1),e.moveTo(this.outerRadius(),0),e.arc(0,0,this.outerRadius(),Gl,0,!0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}kr.prototype.className="Ring";kr.prototype._centroid=!0;kr.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Re(kr);w.addGetterSetter(kr,"innerRadius",0,G());w.addGetterSetter(kr,"outerRadius",0,G());class Gt extends N{constructor(e){super(e),this._updated=!0,this.anim=new vt(()=>{var n=this._updated;return this._updated=!1,n}),this.on("animationChange.konva",function(){this.frameIndex(0)}),this.on("frameIndexChange.konva",function(){this._updated=!0}),this.on("frameRateChange.konva",function(){!this.anim.isRunning()||(clearInterval(this.interval),this._setInterval())})}_sceneFunc(e){var n=this.animation(),a=this.frameIndex(),s=a*4,l=this.animations()[n],u=this.frameOffsets(),f=l[s+0],c=l[s+1],p=l[s+2],v=l[s+3],S=this.image();if((this.hasFill()||this.hasStroke())&&(e.beginPath(),e.rect(0,0,p,v),e.closePath(),e.fillStrokeShape(this)),S)if(u){var y=u[n],x=a*2;e.drawImage(S,f,c,p,v,y[x+0],y[x+1],p,v)}else e.drawImage(S,f,c,p,v,0,0,p,v)}_hitFunc(e){var n=this.animation(),a=this.frameIndex(),s=a*4,l=this.animations()[n],u=this.frameOffsets(),f=l[s+2],c=l[s+3];if(e.beginPath(),u){var p=u[n],v=a*2;e.rect(p[v+0],p[v+1],f,c)}else e.rect(0,0,f,c);e.closePath(),e.fillShape(this)}_useBufferCanvas(){return super._useBufferCanvas(!0)}_setInterval(){var e=this;this.interval=setInterval(function(){e._updateIndex()},1e3/this.frameRate())}start(){if(!this.isRunning()){var e=this.getLayer();this.anim.setLayers(e),this._setInterval(),this.anim.start()}}stop(){this.anim.stop(),clearInterval(this.interval)}isRunning(){return this.anim.isRunning()}_updateIndex(){var e=this.frameIndex(),n=this.animation(),a=this.animations(),s=a[n],l=s.length/4;e<l-1?this.frameIndex(e+1):this.frameIndex(0)}}Gt.prototype.className="Sprite";Re(Gt);w.addGetterSetter(Gt,"animation");w.addGetterSetter(Gt,"animations");w.addGetterSetter(Gt,"frameOffsets");w.addGetterSetter(Gt,"image");w.addGetterSetter(Gt,"frameIndex",0,G());w.addGetterSetter(Gt,"frameRate",17,G());w.backCompat(Gt,{index:"frameIndex",getIndex:"getFrameIndex",setIndex:"setFrameIndex"});class sr extends N{_sceneFunc(e){var n=this.innerRadius(),a=this.outerRadius(),s=this.numPoints();e.beginPath(),e.moveTo(0,0-a);for(var l=1;l<s*2;l++){var u=l%2===0?a:n,f=u*Math.sin(l*Math.PI/s),c=-1*u*Math.cos(l*Math.PI/s);e.lineTo(f,c)}e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.outerRadius()*2}getHeight(){return this.outerRadius()*2}setWidth(e){this.outerRadius(e/2)}setHeight(e){this.outerRadius(e/2)}}sr.prototype.className="Star";sr.prototype._centroid=!0;sr.prototype._attrsAffectingSize=["innerRadius","outerRadius"];Re(sr);w.addGetterSetter(sr,"numPoints",5,G());w.addGetterSetter(sr,"innerRadius",0,G());w.addGetterSetter(sr,"outerRadius",0,G());function ch(h){return Array.from(h)}var Oi="auto",Sf="center",_n="justify",wf="Change.konva",Cf="2d",Dl="-",gh="left",xf="text",kf="Text",Pf="top",Ef="bottom",zl="middle",ph="normal",Tf="px ",Gi=" ",Rf="right",Af="word",Mf="char",Lf="none",us="\u2026",vh=["fontFamily","fontSize","fontStyle","fontVariant","padding","align","verticalAlign","lineHeight","text","width","height","wrap","ellipsis","letterSpacing"],If=vh.length;function Nf(h){return h.split(",").map(e=>{e=e.trim();const n=e.indexOf(" ")>=0,a=e.indexOf('"')>=0||e.indexOf("'")>=0;return n&&!a&&(e=`"${e}"`),e}).join(", ")}var Di;function ds(){return Di||(Di=P.createCanvasElement().getContext(Cf),Di)}function Of(h){h.fillText(this._partialText,this._partialTextX,this._partialTextY)}function Gf(h){h.strokeText(this._partialText,this._partialTextX,this._partialTextY)}function Df(h){return h=h||{},!h.fillLinearGradientColorStops&&!h.fillRadialGradientColorStops&&!h.fillPatternImage&&(h.fill=h.fill||"black"),h}class Te extends N{constructor(e){super(Df(e)),this._partialTextX=0,this._partialTextY=0;for(var n=0;n<If;n++)this.on(vh[n]+wf,this._setTextData);this._setTextData()}_sceneFunc(e){var n=this.textArr,a=n.length;if(!!this.text()){var s=this.padding(),l=this.fontSize(),u=this.lineHeight()*l,f=this.verticalAlign(),c=0,p=this.align(),v=this.getWidth(),S=this.letterSpacing(),y=this.fill(),x=this.textDecoration(),_=x.indexOf("underline")!==-1,A=x.indexOf("line-through")!==-1,E,O=0,O=u/2,I=0,L=0;for(e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",zl),e.setAttr("textAlign",gh),f===zl?c=(this.getHeight()-a*u-s*2)/2:f===Ef&&(c=this.getHeight()-a*u-s*2),e.translate(s,c+s),E=0;E<a;E++){var I=0,L=0,D=n[E],Y=D.text,b=D.width,j=D.lastInParagraph,U,Q,J;if(e.save(),p===Rf?I+=v-b-s*2:p===Sf&&(I+=(v-b-s*2)/2),_&&(e.save(),e.beginPath(),e.moveTo(I,O+L+Math.round(l/2)),U=Y.split(" ").length-1,Q=U===0,J=p===_n&&j&&!Q?v-s*2:b,e.lineTo(I+Math.round(J),O+L+Math.round(l/2)),e.lineWidth=l/15,e.strokeStyle=y,e.stroke(),e.restore()),A&&(e.save(),e.beginPath(),e.moveTo(I,O+L),U=Y.split(" ").length-1,Q=U===0,J=p===_n&&j&&!Q?v-s*2:b,e.lineTo(I+Math.round(J),O+L),e.lineWidth=l/15,e.strokeStyle=y,e.stroke(),e.restore()),S!==0||p===_n){U=Y.split(" ").length-1;for(var q=ch(Y),ne=0;ne<q.length;ne++){var Z=q[ne];Z===" "&&!j&&p===_n&&(I+=(v-s*2-b)/U),this._partialTextX=I,this._partialTextY=O+L,this._partialText=Z,e.fillStrokeShape(this),I+=this.measureSize(Z).width+S}}else this._partialTextX=I,this._partialTextY=O+L,this._partialText=Y,e.fillStrokeShape(this);e.restore(),a>1&&(O+=u)}}}_hitFunc(e){var n=this.getWidth(),a=this.getHeight();e.beginPath(),e.rect(0,0,n,a),e.closePath(),e.fillStrokeShape(this)}setText(e){var n=P._isString(e)?e:e==null?"":e+"";return this._setAttr(xf,n),this}getWidth(){var e=this.attrs.width===Oi||this.attrs.width===void 0;return e?this.getTextWidth()+this.padding()*2:this.attrs.width}getHeight(){var e=this.attrs.height===Oi||this.attrs.height===void 0;return e?this.fontSize()*this.textArr.length*this.lineHeight()+this.padding()*2:this.attrs.height}getTextWidth(){return this.textWidth}getTextHeight(){return P.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}measureSize(e){var n=ds(),a=this.fontSize(),s;return n.save(),n.font=this._getContextFont(),s=n.measureText(e),n.restore(),{width:s.width,height:a}}_getContextFont(){return this.fontStyle()+Gi+this.fontVariant()+Gi+(this.fontSize()+Tf)+Nf(this.fontFamily())}_addTextLine(e){this.align()===_n&&(e=e.trim());var n=this._getTextWidth(e);return this.textArr.push({text:e,width:n,lastInParagraph:!1})}_getTextWidth(e){var n=this.letterSpacing(),a=e.length;return ds().measureText(e).width+(a?n*(a-1):0)}_setTextData(){var e=this.text().split(`
`),n=+this.fontSize(),a=0,s=this.lineHeight()*n,l=this.attrs.width,u=this.attrs.height,f=l!==Oi&&l!==void 0,c=u!==Oi&&u!==void 0,p=this.padding(),v=l-p*2,S=u-p*2,y=0,x=this.wrap(),_=x!==Lf,A=x!==Mf&&_,E=this.ellipsis();this.textArr=[],ds().font=this._getContextFont();for(var O=E?this._getTextWidth(us):0,I=0,L=e.length;I<L;++I){var D=e[I],Y=this._getTextWidth(D);if(f&&Y>v)for(;D.length>0;){for(var b=0,j=D.length,U="",Q=0;b<j;){var J=b+j>>>1,q=D.slice(0,J+1),ne=this._getTextWidth(q)+O;ne<=v?(b=J+1,U=q,Q=ne):j=J}if(U){if(A){var Z,ge=D[U.length],Ae=ge===Gi||ge===Dl;Ae&&Q<=v?Z=U.length:Z=Math.max(U.lastIndexOf(Gi),U.lastIndexOf(Dl))+1,Z>0&&(b=Z,U=U.slice(0,b),Q=this._getTextWidth(U))}if(U=U.trimRight(),this._addTextLine(U),a=Math.max(a,Q),y+=s,!_||c&&y+s>S){var ae=this.textArr[this.textArr.length-1];if(ae&&E){var me=this._getTextWidth(ae.text+us)<v;me||(ae.text=ae.text.slice(0,ae.text.length-3)),this.textArr.splice(this.textArr.length-1,1),this._addTextLine(ae.text+us)}break}if(D=D.slice(b),D=D.trimLeft(),D.length>0&&(Y=this._getTextWidth(D),Y<=v)){this._addTextLine(D),y+=s,a=Math.max(a,Y);break}}else break}else this._addTextLine(D),y+=s,a=Math.max(a,Y);if(c&&y+s>S)break;this.textArr[this.textArr.length-1]&&(this.textArr[this.textArr.length-1].lastInParagraph=!0)}this.textHeight=n,this.textWidth=a}getStrokeScaleEnabled(){return!0}}Te.prototype._fillFunc=Of;Te.prototype._strokeFunc=Gf;Te.prototype.className=kf;Te.prototype._attrsAffectingSize=["text","fontSize","padding","wrap","lineHeight","letterSpacing"];Re(Te);w.overWriteSetter(Te,"width",Cs());w.overWriteSetter(Te,"height",Cs());w.addGetterSetter(Te,"fontFamily","Arial");w.addGetterSetter(Te,"fontSize",12,G());w.addGetterSetter(Te,"fontStyle",ph);w.addGetterSetter(Te,"fontVariant",ph);w.addGetterSetter(Te,"padding",0,G());w.addGetterSetter(Te,"align",gh);w.addGetterSetter(Te,"verticalAlign",Pf);w.addGetterSetter(Te,"lineHeight",1,G());w.addGetterSetter(Te,"wrap",Af);w.addGetterSetter(Te,"ellipsis",!1,Pt());w.addGetterSetter(Te,"letterSpacing",0,G());w.addGetterSetter(Te,"text","",Yr());w.addGetterSetter(Te,"textDecoration","");var zf="",mh="normal";function yh(h){h.fillText(this.partialText,0,0)}function _h(h){h.strokeText(this.partialText,0,0)}class ze extends N{constructor(e){super(e),this.dummyCanvas=P.createCanvasElement(),this.dataArray=[],this.dataArray=ve.parsePathData(this.attrs.data),this.on("dataChange.konva",function(){this.dataArray=ve.parsePathData(this.attrs.data),this._setTextData()}),this.on("textChange.konva alignChange.konva letterSpacingChange.konva kerningFuncChange.konva fontSizeChange.konva fontFamilyChange.konva",this._setTextData),this._setTextData()}_sceneFunc(e){e.setAttr("font",this._getContextFont()),e.setAttr("textBaseline",this.textBaseline()),e.setAttr("textAlign","left"),e.save();var n=this.textDecoration(),a=this.fill(),s=this.fontSize(),l=this.glyphInfo;n==="underline"&&e.beginPath();for(var u=0;u<l.length;u++){e.save();var f=l[u].p0;e.translate(f.x,f.y),e.rotate(l[u].rotation),this.partialText=l[u].text,e.fillStrokeShape(this),n==="underline"&&(u===0&&e.moveTo(0,s/2+1),e.lineTo(s,s/2+1)),e.restore()}n==="underline"&&(e.strokeStyle=a,e.lineWidth=s/20,e.stroke()),e.restore()}_hitFunc(e){e.beginPath();var n=this.glyphInfo;if(n.length>=1){var a=n[0].p0;e.moveTo(a.x,a.y)}for(var s=0;s<n.length;s++){var l=n[s].p1;e.lineTo(l.x,l.y)}e.setAttr("lineWidth",this.fontSize()),e.setAttr("strokeStyle",this.colorKey),e.stroke()}getTextWidth(){return this.textWidth}getTextHeight(){return P.warn("text.getTextHeight() method is deprecated. Use text.height() - for full height and text.fontSize() - for one line height."),this.textHeight}setText(e){return Te.prototype.setText.call(this,e)}_getContextFont(){return Te.prototype._getContextFont.call(this)}_getTextSize(e){var n=this.dummyCanvas,a=n.getContext("2d");a.save(),a.font=this._getContextFont();var s=a.measureText(e);return a.restore(),{width:s.width,height:parseInt(this.attrs.fontSize,10)}}_setTextData(){var e=this,n=this._getTextSize(this.attrs.text),a=this.letterSpacing(),s=this.align(),l=this.kerningFunc();this.textWidth=n.width,this.textHeight=n.height;var u=Math.max(this.textWidth+((this.attrs.text||"").length-1)*a,0);this.glyphInfo=[];for(var f=0,c=0;c<e.dataArray.length;c++)e.dataArray[c].pathLength>0&&(f+=e.dataArray[c].pathLength);var p=0;s==="center"&&(p=Math.max(0,f/2-u/2)),s==="right"&&(p=Math.max(0,f-u));for(var v=ch(this.text()),S=this.text().split(" ").length-1,y,x,_,A=-1,E=0,O=function(){E=0;for(var ne=e.dataArray,Z=A+1;Z<ne.length;Z++){if(ne[Z].pathLength>0)return A=Z,ne[Z];ne[Z].command==="M"&&(y={x:ne[Z].points[0],y:ne[Z].points[1]})}return{}},I=function(ne){var Z=e._getTextSize(ne).width+a;ne===" "&&s==="justify"&&(Z+=(f-u)/S);var ge=0,Ae=0;for(x=void 0;Math.abs(Z-ge)/Z>.01&&Ae<20;){Ae++;for(var ae=ge;_===void 0;)_=O(),_&&ae+_.pathLength<Z&&(ae+=_.pathLength,_=void 0);if(_==={}||y===void 0)return;var me=!1;switch(_.command){case"L":ve.getLineLength(y.x,y.y,_.points[0],_.points[1])>Z?x=ve.getPointOnLine(Z,y.x,y.y,_.points[0],_.points[1],y.x,y.y):_=void 0;break;case"A":var B=_.points[4],$=_.points[5],H=_.points[4]+$;E===0?E=B+1e-8:Z>ge?E+=Math.PI/180*$/Math.abs($):E-=Math.PI/360*$/Math.abs($),($<0&&E<H||$>=0&&E>H)&&(E=H,me=!0),x=ve.getPointOnEllipticalArc(_.points[0],_.points[1],_.points[2],_.points[3],E,_.points[6]);break;case"C":E===0?Z>_.pathLength?E=1e-8:E=Z/_.pathLength:Z>ge?E+=(Z-ge)/_.pathLength/2:E=Math.max(E-(ge-Z)/_.pathLength/2,0),E>1&&(E=1,me=!0),x=ve.getPointOnCubicBezier(E,_.start.x,_.start.y,_.points[0],_.points[1],_.points[2],_.points[3],_.points[4],_.points[5]);break;case"Q":E===0?E=Z/_.pathLength:Z>ge?E+=(Z-ge)/_.pathLength:E-=(ge-Z)/_.pathLength,E>1&&(E=1,me=!0),x=ve.getPointOnQuadraticBezier(E,_.start.x,_.start.y,_.points[0],_.points[1],_.points[2],_.points[3]);break}x!==void 0&&(ge=ve.getLineLength(y.x,y.y,x.x,x.y)),me&&(me=!1,_=void 0)}},L="C",D=e._getTextSize(L).width+a,Y=p/D-1,b=0;b<Y&&(I(L),!(y===void 0||x===void 0));b++)y=x;for(var j=0;j<v.length&&(I(v[j]),!(y===void 0||x===void 0));j++){var U=ve.getLineLength(y.x,y.y,x.x,x.y),Q=0;if(l)try{Q=l(v[j-1],v[j])*this.fontSize()}catch{Q=0}y.x+=Q,x.x+=Q,this.textWidth+=Q;var J=ve.getPointOnLine(Q+U/2,y.x,y.y,x.x,x.y),q=Math.atan2(x.y-y.y,x.x-y.x);this.glyphInfo.push({transposeX:J.x,transposeY:J.y,text:v[j],rotation:q,p0:y,p1:x}),y=x}}getSelfRect(){if(!this.glyphInfo.length)return{x:0,y:0,width:0,height:0};var e=[];this.glyphInfo.forEach(function(v){e.push(v.p0.x),e.push(v.p0.y),e.push(v.p1.x),e.push(v.p1.y)});for(var n=e[0]||0,a=e[0]||0,s=e[1]||0,l=e[1]||0,u,f,c=0;c<e.length/2;c++)u=e[c*2],f=e[c*2+1],n=Math.min(n,u),a=Math.max(a,u),s=Math.min(s,f),l=Math.max(l,f);var p=this.fontSize();return{x:n-p/2,y:s-p/2,width:a-n+p,height:l-s+p}}}ze.prototype._fillFunc=yh;ze.prototype._strokeFunc=_h;ze.prototype._fillFuncHit=yh;ze.prototype._strokeFuncHit=_h;ze.prototype.className="TextPath";ze.prototype._attrsAffectingSize=["text","fontSize","data"];Re(ze);w.addGetterSetter(ze,"data");w.addGetterSetter(ze,"fontFamily","Arial");w.addGetterSetter(ze,"fontSize",12,G());w.addGetterSetter(ze,"fontStyle",mh);w.addGetterSetter(ze,"align","left");w.addGetterSetter(ze,"letterSpacing",0,G());w.addGetterSetter(ze,"textBaseline","middle");w.addGetterSetter(ze,"fontVariant",mh);w.addGetterSetter(ze,"text",zf);w.addGetterSetter(ze,"textDecoration",null);w.addGetterSetter(ze,"kerningFunc",null);var Sh="tr-konva",Ff=["resizeEnabledChange","rotateAnchorOffsetChange","rotateEnabledChange","enabledAnchorsChange","anchorSizeChange","borderEnabledChange","borderStrokeChange","borderStrokeWidthChange","borderDashChange","anchorStrokeChange","anchorStrokeWidthChange","anchorFillChange","anchorCornerRadiusChange","ignoreStrokeChange"].map(h=>h+`.${Sh}`).join(" "),Fl="nodesRect",bf=["widthChange","heightChange","scaleXChange","scaleYChange","skewXChange","skewYChange","rotationChange","offsetXChange","offsetYChange","transformsEnabledChange","strokeWidthChange"],Bf={"top-left":-45,"top-center":0,"top-right":45,"middle-right":-90,"middle-left":90,"bottom-left":-135,"bottom-center":180,"bottom-right":135};const Hf="ontouchstart"in V._global;function Uf(h,e){if(h==="rotater")return"crosshair";e+=P.degToRad(Bf[h]||0);var n=(P.radToDeg(e)%360+360)%360;return P._inRange(n,315+22.5,360)||P._inRange(n,0,22.5)?"ns-resize":P._inRange(n,45-22.5,45+22.5)?"nesw-resize":P._inRange(n,90-22.5,90+22.5)?"ew-resize":P._inRange(n,135-22.5,135+22.5)?"nwse-resize":P._inRange(n,180-22.5,180+22.5)?"ns-resize":P._inRange(n,225-22.5,225+22.5)?"nesw-resize":P._inRange(n,270-22.5,270+22.5)?"ew-resize":P._inRange(n,315-22.5,315+22.5)?"nwse-resize":(P.error("Transformer has unknown angle for cursor detection: "+n),"pointer")}var Hi=["top-left","top-center","top-right","middle-right","middle-left","bottom-left","bottom-center","bottom-right"],bl=1e8;function Wf(h){return{x:h.x+h.width/2*Math.cos(h.rotation)+h.height/2*Math.sin(-h.rotation),y:h.y+h.height/2*Math.cos(h.rotation)+h.width/2*Math.sin(h.rotation)}}function wh(h,e,n){const a=n.x+(h.x-n.x)*Math.cos(e)-(h.y-n.y)*Math.sin(e),s=n.y+(h.x-n.x)*Math.sin(e)+(h.y-n.y)*Math.cos(e);return Object.assign(Object.assign({},h),{rotation:h.rotation+e,x:a,y:s})}function Yf(h,e){const n=Wf(h);return wh(h,e,n)}function Xf(h,e,n){let a=e;for(let s=0;s<h.length;s++){const l=V.getAngle(h[s]),u=Math.abs(l-e)%(Math.PI*2);Math.min(u,Math.PI*2-u)<n&&(a=l)}return a}class pe extends Wr{constructor(e){super(e),this._transforming=!1,this._createElements(),this._handleMouseMove=this._handleMouseMove.bind(this),this._handleMouseUp=this._handleMouseUp.bind(this),this.update=this.update.bind(this),this.on(Ff,this.update),this.getNode()&&this.update()}attachTo(e){return this.setNode(e),this}setNode(e){return P.warn("tr.setNode(shape), tr.node(shape) and tr.attachTo(shape) methods are deprecated. Please use tr.nodes(nodesArray) instead."),this.setNodes([e])}getNode(){return this._nodes&&this._nodes[0]}_getEventNamespace(){return Sh+this._id}setNodes(e=[]){this._nodes&&this._nodes.length&&this.detach(),this._nodes=e,e.length===1&&this.useSingleNodeRotation()?this.rotation(e[0].getAbsoluteRotation()):this.rotation(0),this._nodes.forEach(a=>{const s=()=>{this.nodes().length===1&&this.useSingleNodeRotation()&&this.rotation(this.nodes()[0].getAbsoluteRotation()),this._resetTransformCache(),!this._transforming&&!this.isDragging()&&this.update()},l=a._attrsAffectingSize.map(u=>u+"Change."+this._getEventNamespace()).join(" ");a.on(l,s),a.on(bf.map(u=>u+`.${this._getEventNamespace()}`).join(" "),s),a.on(`absoluteTransformChange.${this._getEventNamespace()}`,s),this._proxyDrag(a)}),this._resetTransformCache();var n=!!this.findOne(".top-left");return n&&this.update(),this}_proxyDrag(e){let n;e.on(`dragstart.${this._getEventNamespace()}`,a=>{n=e.getAbsolutePosition(),!this.isDragging()&&e!==this.findOne(".back")&&this.startDrag(a,!1)}),e.on(`dragmove.${this._getEventNamespace()}`,a=>{if(!n)return;const s=e.getAbsolutePosition(),l=s.x-n.x,u=s.y-n.y;this.nodes().forEach(f=>{if(f===e||f.isDragging())return;const c=f.getAbsolutePosition();f.setAbsolutePosition({x:c.x+l,y:c.y+u}),f.startDrag(a)}),n=null})}getNodes(){return this._nodes||[]}getActiveAnchor(){return this._movingAnchorName}detach(){this._nodes&&this._nodes.forEach(e=>{e.off("."+this._getEventNamespace())}),this._nodes=[],this._resetTransformCache()}_resetTransformCache(){this._clearCache(Fl),this._clearCache("transform"),this._clearSelfAndDescendantCache("absoluteTransform")}_getNodeRect(){return this._getCache(Fl,this.__getNodeRect)}__getNodeShape(e,n=this.rotation(),a){var s=e.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()}),l=e.getAbsoluteScale(a),u=e.getAbsolutePosition(a),f=s.x*l.x-e.offsetX()*l.x,c=s.y*l.y-e.offsetY()*l.y;const p=(V.getAngle(e.getAbsoluteRotation())+Math.PI*2)%(Math.PI*2),v={x:u.x+f*Math.cos(p)+c*Math.sin(-p),y:u.y+c*Math.cos(p)+f*Math.sin(p),width:s.width*l.x,height:s.height*l.y,rotation:p};return wh(v,-V.getAngle(n),{x:0,y:0})}__getNodeRect(){var e=this.getNode();if(!e)return{x:-bl,y:-bl,width:0,height:0,rotation:0};const n=[];this.nodes().map(p=>{const v=p.getClientRect({skipTransform:!0,skipShadow:!0,skipStroke:this.ignoreStroke()});var S=[{x:v.x,y:v.y},{x:v.x+v.width,y:v.y},{x:v.x+v.width,y:v.y+v.height},{x:v.x,y:v.y+v.height}],y=p.getAbsoluteTransform();S.forEach(function(x){var _=y.point(x);n.push(_)})});const a=new ot;a.rotate(-V.getAngle(this.rotation()));var s,l,u,f;n.forEach(function(p){var v=a.point(p);s===void 0&&(s=u=v.x,l=f=v.y),s=Math.min(s,v.x),l=Math.min(l,v.y),u=Math.max(u,v.x),f=Math.max(f,v.y)}),a.invert();const c=a.point({x:s,y:l});return{x:c.x,y:c.y,width:u-s,height:f-l,rotation:V.getAngle(this.rotation())}}getX(){return this._getNodeRect().x}getY(){return this._getNodeRect().y}getWidth(){return this._getNodeRect().width}getHeight(){return this._getNodeRect().height}_createElements(){this._createBack(),Hi.forEach(function(e){this._createAnchor(e)}.bind(this)),this._createAnchor("rotater")}_createAnchor(e){var n=new Ln({stroke:"rgb(0, 161, 255)",fill:"white",strokeWidth:1,name:e+" _anchor",dragDistance:0,draggable:!0,hitStrokeWidth:Hf?10:"auto"}),a=this;n.on("mousedown touchstart",function(s){a._handleMouseDown(s)}),n.on("dragstart",s=>{n.stopDrag(),s.cancelBubble=!0}),n.on("dragend",s=>{s.cancelBubble=!0}),n.on("mouseenter",()=>{var s=V.getAngle(this.rotation()),l=Uf(e,s);n.getStage().content&&(n.getStage().content.style.cursor=l),this._cursorChange=!0}),n.on("mouseout",()=>{n.getStage().content&&(n.getStage().content.style.cursor=""),this._cursorChange=!1}),this.add(n)}_createBack(){var e=new N({name:"back",width:0,height:0,draggable:!0,sceneFunc(n){var a=this.getParent(),s=a.padding();n.beginPath(),n.rect(-s,-s,this.width()+s*2,this.height()+s*2),n.moveTo(this.width()/2,-s),a.rotateEnabled()&&n.lineTo(this.width()/2,-a.rotateAnchorOffset()*P._sign(this.height())-s),n.fillStrokeShape(this)},hitFunc:(n,a)=>{if(!!this.shouldOverdrawWholeArea()){var s=this.padding();n.beginPath(),n.rect(-s,-s,a.width()+s*2,a.height()+s*2),n.fillStrokeShape(a)}}});this.add(e),this._proxyDrag(e),e.on("dragstart",n=>{n.cancelBubble=!0}),e.on("dragmove",n=>{n.cancelBubble=!0}),e.on("dragend",n=>{n.cancelBubble=!0}),this.on("dragmove",n=>{this.update()})}_handleMouseDown(e){this._movingAnchorName=e.target.name().split(" ")[0];var n=this._getNodeRect(),a=n.width,s=n.height,l=Math.sqrt(Math.pow(a,2)+Math.pow(s,2));this.sin=Math.abs(s/l),this.cos=Math.abs(a/l),typeof window!="undefined"&&(window.addEventListener("mousemove",this._handleMouseMove),window.addEventListener("touchmove",this._handleMouseMove),window.addEventListener("mouseup",this._handleMouseUp,!0),window.addEventListener("touchend",this._handleMouseUp,!0)),this._transforming=!0;var u=e.target.getAbsolutePosition(),f=e.target.getStage().getPointerPosition();this._anchorDragOffset={x:f.x-u.x,y:f.y-u.y},this._fire("transformstart",{evt:e.evt,target:this.getNode()}),this._nodes.forEach(c=>{c._fire("transformstart",{evt:e.evt,target:c})})}_handleMouseMove(e){var n,a,s,l=this.findOne("."+this._movingAnchorName),u=l.getStage();u.setPointersPositions(e);const f=u.getPointerPosition();let c={x:f.x-this._anchorDragOffset.x,y:f.y-this._anchorDragOffset.y};const p=l.getAbsolutePosition();this.anchorDragBoundFunc()&&(c=this.anchorDragBoundFunc()(p,c,e)),l.setAbsolutePosition(c);const v=l.getAbsolutePosition();if(!(p.x===v.x&&p.y===v.y)){if(this._movingAnchorName==="rotater"){var S=this._getNodeRect();n=l.x()-S.width/2,a=-l.y()+S.height/2;let ne=Math.atan2(-a,n)+Math.PI/2;S.height<0&&(ne-=Math.PI);var y=V.getAngle(this.rotation());const Z=y+ne,ge=V.getAngle(this.rotationSnapTolerance()),ae=Xf(this.rotationSnaps(),Z,ge)-S.rotation,me=Yf(S,ae);this._fitNodesInto(me,e);return}var x=this.keepRatio()||e.shiftKey,I=this.centeredScaling()||e.altKey;if(this._movingAnchorName==="top-left"){if(x){var _=I?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-right").x(),y:this.findOne(".bottom-right").y()};s=Math.sqrt(Math.pow(_.x-l.x(),2)+Math.pow(_.y-l.y(),2));var A=this.findOne(".top-left").x()>_.x?-1:1,E=this.findOne(".top-left").y()>_.y?-1:1;n=s*this.cos*A,a=s*this.sin*E,this.findOne(".top-left").x(_.x-n),this.findOne(".top-left").y(_.y-a)}}else if(this._movingAnchorName==="top-center")this.findOne(".top-left").y(l.y());else if(this._movingAnchorName==="top-right"){if(x){var _=I?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".bottom-left").x(),y:this.findOne(".bottom-left").y()};s=Math.sqrt(Math.pow(l.x()-_.x,2)+Math.pow(_.y-l.y(),2));var A=this.findOne(".top-right").x()<_.x?-1:1,E=this.findOne(".top-right").y()>_.y?-1:1;n=s*this.cos*A,a=s*this.sin*E,this.findOne(".top-right").x(_.x+n),this.findOne(".top-right").y(_.y-a)}var O=l.position();this.findOne(".top-left").y(O.y),this.findOne(".bottom-right").x(O.x)}else if(this._movingAnchorName==="middle-left")this.findOne(".top-left").x(l.x());else if(this._movingAnchorName==="middle-right")this.findOne(".bottom-right").x(l.x());else if(this._movingAnchorName==="bottom-left"){if(x){var _=I?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-right").x(),y:this.findOne(".top-right").y()};s=Math.sqrt(Math.pow(_.x-l.x(),2)+Math.pow(l.y()-_.y,2));var A=_.x<l.x()?-1:1,E=l.y()<_.y?-1:1;n=s*this.cos*A,a=s*this.sin*E,l.x(_.x-n),l.y(_.y+a)}O=l.position(),this.findOne(".top-left").x(O.x),this.findOne(".bottom-right").y(O.y)}else if(this._movingAnchorName==="bottom-center")this.findOne(".bottom-right").y(l.y());else if(this._movingAnchorName==="bottom-right"){if(x){var _=I?{x:this.width()/2,y:this.height()/2}:{x:this.findOne(".top-left").x(),y:this.findOne(".top-left").y()};s=Math.sqrt(Math.pow(l.x()-_.x,2)+Math.pow(l.y()-_.y,2));var A=this.findOne(".bottom-right").x()<_.x?-1:1,E=this.findOne(".bottom-right").y()<_.y?-1:1;n=s*this.cos*A,a=s*this.sin*E,this.findOne(".bottom-right").x(_.x+n),this.findOne(".bottom-right").y(_.y+a)}}else console.error(new Error("Wrong position argument of selection resizer: "+this._movingAnchorName));var I=this.centeredScaling()||e.altKey;if(I){var L=this.findOne(".top-left"),D=this.findOne(".bottom-right"),Y=L.x(),b=L.y(),j=this.getWidth()-D.x(),U=this.getHeight()-D.y();D.move({x:-Y,y:-b}),L.move({x:j,y:U})}var Q=this.findOne(".top-left").getAbsolutePosition();n=Q.x,a=Q.y;var J=this.findOne(".bottom-right").x()-this.findOne(".top-left").x(),q=this.findOne(".bottom-right").y()-this.findOne(".top-left").y();this._fitNodesInto({x:n,y:a,width:J,height:q,rotation:V.getAngle(this.rotation())},e)}}_handleMouseUp(e){this._removeEvents(e)}getAbsoluteTransform(){return this.getTransform()}_removeEvents(e){if(this._transforming){this._transforming=!1,typeof window!="undefined"&&(window.removeEventListener("mousemove",this._handleMouseMove),window.removeEventListener("touchmove",this._handleMouseMove),window.removeEventListener("mouseup",this._handleMouseUp,!0),window.removeEventListener("touchend",this._handleMouseUp,!0));var n=this.getNode();this._fire("transformend",{evt:e,target:n}),n&&this._nodes.forEach(a=>{a._fire("transformend",{evt:e,target:a})}),this._movingAnchorName=null}}_fitNodesInto(e,n){var a=this._getNodeRect();const s=1;if(P._inRange(e.width,-this.padding()*2-s,s)){this.update();return}if(P._inRange(e.height,-this.padding()*2-s,s)){this.update();return}const l=this.flipEnabled();var u=new ot;if(u.rotate(V.getAngle(this.rotation())),this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("left")>=0){const S=u.point({x:-this.padding()*2,y:0});if(e.x+=S.x,e.y+=S.y,e.width+=this.padding()*2,this._movingAnchorName=this._movingAnchorName.replace("left","right"),this._anchorDragOffset.x-=S.x,this._anchorDragOffset.y-=S.y,!l){this.update();return}}else if(this._movingAnchorName&&e.width<0&&this._movingAnchorName.indexOf("right")>=0){const S=u.point({x:this.padding()*2,y:0});if(this._movingAnchorName=this._movingAnchorName.replace("right","left"),this._anchorDragOffset.x-=S.x,this._anchorDragOffset.y-=S.y,e.width+=this.padding()*2,!l){this.update();return}}if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("top")>=0){const S=u.point({x:0,y:-this.padding()*2});if(e.x+=S.x,e.y+=S.y,this._movingAnchorName=this._movingAnchorName.replace("top","bottom"),this._anchorDragOffset.x-=S.x,this._anchorDragOffset.y-=S.y,e.height+=this.padding()*2,!l){this.update();return}}else if(this._movingAnchorName&&e.height<0&&this._movingAnchorName.indexOf("bottom")>=0){const S=u.point({x:0,y:this.padding()*2});if(this._movingAnchorName=this._movingAnchorName.replace("bottom","top"),this._anchorDragOffset.x-=S.x,this._anchorDragOffset.y-=S.y,e.height+=this.padding()*2,!l){this.update();return}}if(this.boundBoxFunc()){const S=this.boundBoxFunc()(a,e);S?e=S:P.warn("boundBoxFunc returned falsy. You should return new bound rect from it!")}const f=1e7,c=new ot;c.translate(a.x,a.y),c.rotate(a.rotation),c.scale(a.width/f,a.height/f);const p=new ot;p.translate(e.x,e.y),p.rotate(e.rotation),p.scale(e.width/f,e.height/f);const v=p.multiply(c.invert());this._nodes.forEach(S=>{var y;const x=S.getParent().getAbsoluteTransform(),_=S.getTransform().copy();_.translate(S.offsetX(),S.offsetY());const A=new ot;A.multiply(x.copy().invert()).multiply(v).multiply(x).multiply(_);const E=A.decompose();S.setAttrs(E),this._fire("transform",{evt:n,target:S}),S._fire("transform",{evt:n,target:S}),(y=S.getLayer())===null||y===void 0||y.batchDraw()}),this.rotation(P._getRotation(e.rotation)),this._resetTransformCache(),this.update(),this.getLayer().batchDraw()}forceUpdate(){this._resetTransformCache(),this.update()}_batchChangeChild(e,n){this.findOne(e).setAttrs(n)}update(){var e,n=this._getNodeRect();this.rotation(P._getRotation(n.rotation));var a=n.width,s=n.height,l=this.enabledAnchors(),u=this.resizeEnabled(),f=this.padding(),c=this.anchorSize();this.find("._anchor").forEach(p=>{p.setAttrs({width:c,height:c,offsetX:c/2,offsetY:c/2,stroke:this.anchorStroke(),strokeWidth:this.anchorStrokeWidth(),fill:this.anchorFill(),cornerRadius:this.anchorCornerRadius()})}),this._batchChangeChild(".top-left",{x:0,y:0,offsetX:c/2+f,offsetY:c/2+f,visible:u&&l.indexOf("top-left")>=0}),this._batchChangeChild(".top-center",{x:a/2,y:0,offsetY:c/2+f,visible:u&&l.indexOf("top-center")>=0}),this._batchChangeChild(".top-right",{x:a,y:0,offsetX:c/2-f,offsetY:c/2+f,visible:u&&l.indexOf("top-right")>=0}),this._batchChangeChild(".middle-left",{x:0,y:s/2,offsetX:c/2+f,visible:u&&l.indexOf("middle-left")>=0}),this._batchChangeChild(".middle-right",{x:a,y:s/2,offsetX:c/2-f,visible:u&&l.indexOf("middle-right")>=0}),this._batchChangeChild(".bottom-left",{x:0,y:s,offsetX:c/2+f,offsetY:c/2-f,visible:u&&l.indexOf("bottom-left")>=0}),this._batchChangeChild(".bottom-center",{x:a/2,y:s,offsetY:c/2-f,visible:u&&l.indexOf("bottom-center")>=0}),this._batchChangeChild(".bottom-right",{x:a,y:s,offsetX:c/2-f,offsetY:c/2-f,visible:u&&l.indexOf("bottom-right")>=0}),this._batchChangeChild(".rotater",{x:a/2,y:-this.rotateAnchorOffset()*P._sign(s)-f,visible:this.rotateEnabled()}),this._batchChangeChild(".back",{width:a,height:s,visible:this.borderEnabled(),stroke:this.borderStroke(),strokeWidth:this.borderStrokeWidth(),dash:this.borderDash(),x:0,y:0}),(e=this.getLayer())===null||e===void 0||e.batchDraw()}isTransforming(){return this._transforming}stopTransform(){if(this._transforming){this._removeEvents();var e=this.findOne("."+this._movingAnchorName);e&&e.stopDrag()}}destroy(){return this.getStage()&&this._cursorChange&&this.getStage().content&&(this.getStage().content.style.cursor=""),Wr.prototype.destroy.call(this),this.detach(),this._removeEvents(),this}toObject(){return z.prototype.toObject.call(this)}getClientRect(){return{x:0,y:0,width:0,height:0}}}function Vf(h){return h instanceof Array||P.warn("enabledAnchors value should be an array"),h instanceof Array&&h.forEach(function(e){Hi.indexOf(e)===-1&&P.warn("Unknown anchor name: "+e+". Available names are: "+Hi.join(", "))}),h||[]}pe.prototype.className="Transformer";Re(pe);w.addGetterSetter(pe,"enabledAnchors",Hi,Vf);w.addGetterSetter(pe,"flipEnabled",!0,Pt());w.addGetterSetter(pe,"resizeEnabled",!0);w.addGetterSetter(pe,"anchorSize",10,G());w.addGetterSetter(pe,"rotateEnabled",!0);w.addGetterSetter(pe,"rotationSnaps",[]);w.addGetterSetter(pe,"rotateAnchorOffset",50,G());w.addGetterSetter(pe,"rotationSnapTolerance",5,G());w.addGetterSetter(pe,"borderEnabled",!0);w.addGetterSetter(pe,"anchorStroke","rgb(0, 161, 255)");w.addGetterSetter(pe,"anchorStrokeWidth",1,G());w.addGetterSetter(pe,"anchorFill","white");w.addGetterSetter(pe,"anchorCornerRadius",0,G());w.addGetterSetter(pe,"borderStroke","rgb(0, 161, 255)");w.addGetterSetter(pe,"borderStrokeWidth",1,G());w.addGetterSetter(pe,"borderDash");w.addGetterSetter(pe,"keepRatio",!0);w.addGetterSetter(pe,"centeredScaling",!1);w.addGetterSetter(pe,"ignoreStroke",!1);w.addGetterSetter(pe,"padding",0,G());w.addGetterSetter(pe,"node");w.addGetterSetter(pe,"nodes");w.addGetterSetter(pe,"boundBoxFunc");w.addGetterSetter(pe,"anchorDragBoundFunc");w.addGetterSetter(pe,"shouldOverdrawWholeArea",!1);w.addGetterSetter(pe,"useSingleNodeRotation",!0);w.backCompat(pe,{lineEnabled:"borderEnabled",rotateHandlerOffset:"rotateAnchorOffset",enabledHandlers:"enabledAnchors"});class Vt extends N{_sceneFunc(e){e.beginPath(),e.arc(0,0,this.radius(),0,V.getAngle(this.angle()),this.clockwise()),e.lineTo(0,0),e.closePath(),e.fillStrokeShape(this)}getWidth(){return this.radius()*2}getHeight(){return this.radius()*2}setWidth(e){this.radius(e/2)}setHeight(e){this.radius(e/2)}}Vt.prototype.className="Wedge";Vt.prototype._centroid=!0;Vt.prototype._attrsAffectingSize=["radius"];Re(Vt);w.addGetterSetter(Vt,"radius",0,G());w.addGetterSetter(Vt,"angle",0,G());w.addGetterSetter(Vt,"clockwise",!1);w.backCompat(Vt,{angleDeg:"angle",getAngleDeg:"getAngle",setAngleDeg:"setAngle"});function Bl(){this.r=0,this.g=0,this.b=0,this.a=0,this.next=null}var jf=[512,512,456,512,328,456,335,512,405,328,271,456,388,335,292,512,454,405,364,328,298,271,496,456,420,388,360,335,312,292,273,512,482,454,428,405,383,364,345,328,312,298,284,271,259,496,475,456,437,420,404,388,374,360,347,335,323,312,302,292,282,273,265,512,497,482,468,454,441,428,417,405,394,383,373,364,354,345,337,328,320,312,305,298,291,284,278,271,265,259,507,496,485,475,465,456,446,437,428,420,412,404,396,388,381,374,367,360,354,347,341,335,329,323,318,312,307,302,297,292,287,282,278,273,269,265,261,512,505,497,489,482,475,468,461,454,447,441,435,428,422,417,411,405,399,394,389,383,378,373,368,364,359,354,350,345,341,337,332,328,324,320,316,312,309,305,301,298,294,291,287,284,281,278,274,271,268,265,262,259,257,507,501,496,491,485,480,475,470,465,460,456,451,446,442,437,433,428,424,420,416,412,408,404,400,396,392,388,385,381,377,374,370,367,363,360,357,354,350,347,344,341,338,335,332,329,326,323,320,318,315,312,310,307,304,302,299,297,294,292,289,287,285,282,280,278,275,273,271,269,267,265,263,261,259],Qf=[9,11,12,13,13,14,14,15,15,15,15,16,16,16,16,17,17,17,17,17,17,17,18,18,18,18,18,18,18,18,18,19,19,19,19,19,19,19,19,19,19,19,19,19,19,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,20,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,21,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,22,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,23,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24,24];function Kf(h,e){var n=h.data,a=h.width,s=h.height,l,u,f,c,p,v,S,y,x,_,A,E,O,I,L,D,Y,b,j,U,Q,J,q,ne,Z=e+e+1,ge=a-1,Ae=s-1,ae=e+1,me=ae*(ae+1)/2,B=new Bl,$=null,H=B,re=null,he=null,We=jf[e],Ne=Qf[e];for(f=1;f<Z;f++)H=H.next=new Bl,f===ae&&($=H);for(H.next=B,S=v=0,u=0;u<s;u++){for(D=Y=b=j=y=x=_=A=0,E=ae*(U=n[v]),O=ae*(Q=n[v+1]),I=ae*(J=n[v+2]),L=ae*(q=n[v+3]),y+=me*U,x+=me*Q,_+=me*J,A+=me*q,H=B,f=0;f<ae;f++)H.r=U,H.g=Q,H.b=J,H.a=q,H=H.next;for(f=1;f<ae;f++)c=v+((ge<f?ge:f)<<2),y+=(H.r=U=n[c])*(ne=ae-f),x+=(H.g=Q=n[c+1])*ne,_+=(H.b=J=n[c+2])*ne,A+=(H.a=q=n[c+3])*ne,D+=U,Y+=Q,b+=J,j+=q,H=H.next;for(re=B,he=$,l=0;l<a;l++)n[v+3]=q=A*We>>Ne,q!==0?(q=255/q,n[v]=(y*We>>Ne)*q,n[v+1]=(x*We>>Ne)*q,n[v+2]=(_*We>>Ne)*q):n[v]=n[v+1]=n[v+2]=0,y-=E,x-=O,_-=I,A-=L,E-=re.r,O-=re.g,I-=re.b,L-=re.a,c=S+((c=l+e+1)<ge?c:ge)<<2,D+=re.r=n[c],Y+=re.g=n[c+1],b+=re.b=n[c+2],j+=re.a=n[c+3],y+=D,x+=Y,_+=b,A+=j,re=re.next,E+=U=he.r,O+=Q=he.g,I+=J=he.b,L+=q=he.a,D-=U,Y-=Q,b-=J,j-=q,he=he.next,v+=4;S+=a}for(l=0;l<a;l++){for(Y=b=j=D=x=_=A=y=0,v=l<<2,E=ae*(U=n[v]),O=ae*(Q=n[v+1]),I=ae*(J=n[v+2]),L=ae*(q=n[v+3]),y+=me*U,x+=me*Q,_+=me*J,A+=me*q,H=B,f=0;f<ae;f++)H.r=U,H.g=Q,H.b=J,H.a=q,H=H.next;for(p=a,f=1;f<=e;f++)v=p+l<<2,y+=(H.r=U=n[v])*(ne=ae-f),x+=(H.g=Q=n[v+1])*ne,_+=(H.b=J=n[v+2])*ne,A+=(H.a=q=n[v+3])*ne,D+=U,Y+=Q,b+=J,j+=q,H=H.next,f<Ae&&(p+=a);for(v=l,re=B,he=$,u=0;u<s;u++)c=v<<2,n[c+3]=q=A*We>>Ne,q>0?(q=255/q,n[c]=(y*We>>Ne)*q,n[c+1]=(x*We>>Ne)*q,n[c+2]=(_*We>>Ne)*q):n[c]=n[c+1]=n[c+2]=0,y-=E,x-=O,_-=I,A-=L,E-=re.r,O-=re.g,I-=re.b,L-=re.a,c=l+((c=u+ae)<Ae?c:Ae)*a<<2,y+=D+=re.r=n[c],x+=Y+=re.g=n[c+1],_+=b+=re.b=n[c+2],A+=j+=re.a=n[c+3],re=re.next,E+=U=he.r,O+=Q=he.g,I+=J=he.b,L+=q=he.a,D-=U,Y-=Q,b-=J,j-=q,he=he.next,v+=a}}const qf=function(e){var n=Math.round(this.blurRadius());n>0&&Kf(e,n)};w.addGetterSetter(z,"blurRadius",0,G(),w.afterSetFilter);const Jf=function(h){var e=this.brightness()*255,n=h.data,a=n.length,s;for(s=0;s<a;s+=4)n[s]+=e,n[s+1]+=e,n[s+2]+=e};w.addGetterSetter(z,"brightness",0,G(),w.afterSetFilter);const Zf=function(h){var e=Math.pow((this.contrast()+100)/100,2),n=h.data,a=n.length,s=150,l=150,u=150,f;for(f=0;f<a;f+=4)s=n[f],l=n[f+1],u=n[f+2],s/=255,s-=.5,s*=e,s+=.5,s*=255,l/=255,l-=.5,l*=e,l+=.5,l*=255,u/=255,u-=.5,u*=e,u+=.5,u*=255,s=s<0?0:s>255?255:s,l=l<0?0:l>255?255:l,u=u<0?0:u>255?255:u,n[f]=s,n[f+1]=l,n[f+2]=u};w.addGetterSetter(z,"contrast",0,G(),w.afterSetFilter);const $f=function(h){var e=this.embossStrength()*10,n=this.embossWhiteLevel()*255,a=this.embossDirection(),s=this.embossBlend(),l=0,u=0,f=h.data,c=h.width,p=h.height,v=c*4,S=p;switch(a){case"top-left":l=-1,u=-1;break;case"top":l=-1,u=0;break;case"top-right":l=-1,u=1;break;case"right":l=0,u=1;break;case"bottom-right":l=1,u=1;break;case"bottom":l=1,u=0;break;case"bottom-left":l=1,u=-1;break;case"left":l=0,u=-1;break;default:P.error("Unknown emboss direction: "+a)}do{var y=(S-1)*v,x=l;S+x<1&&(x=0),S+x>p&&(x=0);var _=(S-1+x)*c*4,A=c;do{var E=y+(A-1)*4,O=u;A+O<1&&(O=0),A+O>c&&(O=0);var I=_+(A-1+O)*4,L=f[E]-f[I],D=f[E+1]-f[I+1],Y=f[E+2]-f[I+2],b=L,j=b>0?b:-b,U=D>0?D:-D,Q=Y>0?Y:-Y;if(U>j&&(b=D),Q>j&&(b=Y),b*=e,s){var J=f[E]+b,q=f[E+1]+b,ne=f[E+2]+b;f[E]=J>255?255:J<0?0:J,f[E+1]=q>255?255:q<0?0:q,f[E+2]=ne>255?255:ne<0?0:ne}else{var Z=n-b;Z<0?Z=0:Z>255&&(Z=255),f[E]=f[E+1]=f[E+2]=Z}}while(--A)}while(--S)};w.addGetterSetter(z,"embossStrength",.5,G(),w.afterSetFilter);w.addGetterSetter(z,"embossWhiteLevel",.5,G(),w.afterSetFilter);w.addGetterSetter(z,"embossDirection","top-left",null,w.afterSetFilter);w.addGetterSetter(z,"embossBlend",!1,null,w.afterSetFilter);function fs(h,e,n,a,s){var l=n-e,u=s-a,f;return l===0?a+u/2:u===0?a:(f=(h-e)/l,f=u*f+a,f)}const ec=function(h){var e=h.data,n=e.length,a=e[0],s=a,l,u=e[1],f=u,c,p=e[2],v=p,S,y,x=this.enhance();if(x!==0){for(y=0;y<n;y+=4)l=e[y+0],l<a?a=l:l>s&&(s=l),c=e[y+1],c<u?u=c:c>f&&(f=c),S=e[y+2],S<p?p=S:S>v&&(v=S);s===a&&(s=255,a=0),f===u&&(f=255,u=0),v===p&&(v=255,p=0);var _,A,E,O,I,L,D,Y,b;for(x>0?(A=s+x*(255-s),E=a-x*(a-0),I=f+x*(255-f),L=u-x*(u-0),Y=v+x*(255-v),b=p-x*(p-0)):(_=(s+a)*.5,A=s+x*(s-_),E=a+x*(a-_),O=(f+u)*.5,I=f+x*(f-O),L=u+x*(u-O),D=(v+p)*.5,Y=v+x*(v-D),b=p+x*(p-D)),y=0;y<n;y+=4)e[y+0]=fs(e[y+0],a,s,E,A),e[y+1]=fs(e[y+1],u,f,L,I),e[y+2]=fs(e[y+2],p,v,b,Y)}};w.addGetterSetter(z,"enhance",0,G(),w.afterSetFilter);const tc=function(h){var e=h.data,n=e.length,a,s;for(a=0;a<n;a+=4)s=.34*e[a]+.5*e[a+1]+.16*e[a+2],e[a]=s,e[a+1]=s,e[a+2]=s};w.addGetterSetter(z,"hue",0,G(),w.afterSetFilter);w.addGetterSetter(z,"saturation",0,G(),w.afterSetFilter);w.addGetterSetter(z,"luminance",0,G(),w.afterSetFilter);const rc=function(h){var e=h.data,n=e.length,a=1,s=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,u=this.luminance()*127,f,c=a*s*Math.cos(l*Math.PI/180),p=a*s*Math.sin(l*Math.PI/180),v=.299*a+.701*c+.167*p,S=.587*a-.587*c+.33*p,y=.114*a-.114*c-.497*p,x=.299*a-.299*c-.328*p,_=.587*a+.413*c+.035*p,A=.114*a-.114*c+.293*p,E=.299*a-.3*c+1.25*p,O=.587*a-.586*c-1.05*p,I=.114*a+.886*c-.2*p,L,D,Y,b;for(f=0;f<n;f+=4)L=e[f+0],D=e[f+1],Y=e[f+2],b=e[f+3],e[f+0]=v*L+S*D+y*Y+u,e[f+1]=x*L+_*D+A*Y+u,e[f+2]=E*L+O*D+I*Y+u,e[f+3]=b},nc=function(h){var e=h.data,n=e.length,a=Math.pow(2,this.value()),s=Math.pow(2,this.saturation()),l=Math.abs(this.hue()+360)%360,u,f=a*s*Math.cos(l*Math.PI/180),c=a*s*Math.sin(l*Math.PI/180),p=.299*a+.701*f+.167*c,v=.587*a-.587*f+.33*c,S=.114*a-.114*f-.497*c,y=.299*a-.299*f-.328*c,x=.587*a+.413*f+.035*c,_=.114*a-.114*f+.293*c,A=.299*a-.3*f+1.25*c,E=.587*a-.586*f-1.05*c,O=.114*a+.886*f-.2*c,I,L,D,Y;for(u=0;u<n;u+=4)I=e[u+0],L=e[u+1],D=e[u+2],Y=e[u+3],e[u+0]=p*I+v*L+S*D,e[u+1]=y*I+x*L+_*D,e[u+2]=A*I+E*L+O*D,e[u+3]=Y};w.addGetterSetter(z,"hue",0,G(),w.afterSetFilter);w.addGetterSetter(z,"saturation",0,G(),w.afterSetFilter);w.addGetterSetter(z,"value",0,G(),w.afterSetFilter);const ic=function(h){var e=h.data,n=e.length,a;for(a=0;a<n;a+=4)e[a]=255-e[a],e[a+1]=255-e[a+1],e[a+2]=255-e[a+2]};var ac=function(h,e,n){var a=h.data,s=e.data,l=h.width,u=h.height,f=n.polarCenterX||l/2,c=n.polarCenterY||u/2,p,v,S,y=0,x=0,_=0,A=0,E,O=Math.sqrt(f*f+c*c);v=l-f,S=u-c,E=Math.sqrt(v*v+S*S),O=E>O?E:O;var I=u,L=l,D,Y,b=360/L*Math.PI/180,j,U;for(Y=0;Y<L;Y+=1)for(j=Math.sin(Y*b),U=Math.cos(Y*b),D=0;D<I;D+=1)v=Math.floor(f+O*D/I*U),S=Math.floor(c+O*D/I*j),p=(S*l+v)*4,y=a[p+0],x=a[p+1],_=a[p+2],A=a[p+3],p=(Y+D*l)*4,s[p+0]=y,s[p+1]=x,s[p+2]=_,s[p+3]=A},sc=function(h,e,n){var a=h.data,s=e.data,l=h.width,u=h.height,f=n.polarCenterX||l/2,c=n.polarCenterY||u/2,p,v,S,y,x,_=0,A=0,E=0,O=0,I,L=Math.sqrt(f*f+c*c);v=l-f,S=u-c,I=Math.sqrt(v*v+S*S),L=I>L?I:L;var D=u,Y=l,b,j,U=n.polarRotation||0,Q,J;for(v=0;v<l;v+=1)for(S=0;S<u;S+=1)y=v-f,x=S-c,b=Math.sqrt(y*y+x*x)*D/L,j=(Math.atan2(x,y)*180/Math.PI+360+U)%360,j=j*Y/360,Q=Math.floor(j),J=Math.floor(b),p=(J*l+Q)*4,_=a[p+0],A=a[p+1],E=a[p+2],O=a[p+3],p=(S*l+v)*4,s[p+0]=_,s[p+1]=A,s[p+2]=E,s[p+3]=O};const oc=function(h){var e=h.width,n=h.height,a,s,l,u,f,c,p,v,S,y,x=Math.round(this.kaleidoscopePower()),_=Math.round(this.kaleidoscopeAngle()),A=Math.floor(e*(_%360)/360);if(!(x<1)){var E=P.createCanvasElement();E.width=e,E.height=n;var O=E.getContext("2d").getImageData(0,0,e,n);ac(h,O,{polarCenterX:e/2,polarCenterY:n/2});for(var I=e/Math.pow(2,x);I<=8;)I=I*2,x-=1;I=Math.ceil(I);var L=I,D=0,Y=L,b=1;for(A+I>e&&(D=L,Y=0,b=-1),s=0;s<n;s+=1)for(a=D;a!==Y;a+=b)l=Math.round(a+A)%e,S=(e*s+l)*4,f=O.data[S+0],c=O.data[S+1],p=O.data[S+2],v=O.data[S+3],y=(e*s+a)*4,O.data[y+0]=f,O.data[y+1]=c,O.data[y+2]=p,O.data[y+3]=v;for(s=0;s<n;s+=1)for(L=Math.floor(I),u=0;u<x;u+=1){for(a=0;a<L+1;a+=1)S=(e*s+a)*4,f=O.data[S+0],c=O.data[S+1],p=O.data[S+2],v=O.data[S+3],y=(e*s+L*2-a-1)*4,O.data[y+0]=f,O.data[y+1]=c,O.data[y+2]=p,O.data[y+3]=v;L*=2}sc(O,h,{polarRotation:0})}};w.addGetterSetter(z,"kaleidoscopePower",2,G(),w.afterSetFilter);w.addGetterSetter(z,"kaleidoscopeAngle",0,G(),w.afterSetFilter);function zi(h,e,n){var a=(n*h.width+e)*4,s=[];return s.push(h.data[a++],h.data[a++],h.data[a++],h.data[a++]),s}function Sn(h,e){return Math.sqrt(Math.pow(h[0]-e[0],2)+Math.pow(h[1]-e[1],2)+Math.pow(h[2]-e[2],2))}function lc(h){for(var e=[0,0,0],n=0;n<h.length;n++)e[0]+=h[n][0],e[1]+=h[n][1],e[2]+=h[n][2];return e[0]/=h.length,e[1]/=h.length,e[2]/=h.length,e}function hc(h,e){var n=zi(h,0,0),a=zi(h,h.width-1,0),s=zi(h,0,h.height-1),l=zi(h,h.width-1,h.height-1),u=e||10;if(Sn(n,a)<u&&Sn(a,l)<u&&Sn(l,s)<u&&Sn(s,n)<u){for(var f=lc([a,n,l,s]),c=[],p=0;p<h.width*h.height;p++){var v=Sn(f,[h.data[p*4],h.data[p*4+1],h.data[p*4+2]]);c[p]=v<u?0:255}return c}}function uc(h,e){for(var n=0;n<h.width*h.height;n++)h.data[4*n+3]=e[n]}function dc(h,e,n){for(var a=[1,1,1,1,0,1,1,1,1],s=Math.round(Math.sqrt(a.length)),l=Math.floor(s/2),u=[],f=0;f<n;f++)for(var c=0;c<e;c++){for(var p=f*e+c,v=0,S=0;S<s;S++)for(var y=0;y<s;y++){var x=f+S-l,_=c+y-l;if(x>=0&&x<n&&_>=0&&_<e){var A=x*e+_,E=a[S*s+y];v+=h[A]*E}}u[p]=v===255*8?255:0}return u}function fc(h,e,n){for(var a=[1,1,1,1,1,1,1,1,1],s=Math.round(Math.sqrt(a.length)),l=Math.floor(s/2),u=[],f=0;f<n;f++)for(var c=0;c<e;c++){for(var p=f*e+c,v=0,S=0;S<s;S++)for(var y=0;y<s;y++){var x=f+S-l,_=c+y-l;if(x>=0&&x<n&&_>=0&&_<e){var A=x*e+_,E=a[S*s+y];v+=h[A]*E}}u[p]=v>=255*4?255:0}return u}function cc(h,e,n){for(var a=[.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111,.1111111111111111],s=Math.round(Math.sqrt(a.length)),l=Math.floor(s/2),u=[],f=0;f<n;f++)for(var c=0;c<e;c++){for(var p=f*e+c,v=0,S=0;S<s;S++)for(var y=0;y<s;y++){var x=f+S-l,_=c+y-l;if(x>=0&&x<n&&_>=0&&_<e){var A=x*e+_,E=a[S*s+y];v+=h[A]*E}}u[p]=v}return u}const gc=function(h){var e=this.threshold(),n=hc(h,e);return n&&(n=dc(n,h.width,h.height),n=fc(n,h.width,h.height),n=cc(n,h.width,h.height),uc(h,n)),h};w.addGetterSetter(z,"threshold",0,G(),w.afterSetFilter);const pc=function(h){var e=this.noise()*255,n=h.data,a=n.length,s=e/2,l;for(l=0;l<a;l+=4)n[l+0]+=s-2*s*Math.random(),n[l+1]+=s-2*s*Math.random(),n[l+2]+=s-2*s*Math.random()};w.addGetterSetter(z,"noise",.2,G(),w.afterSetFilter);const vc=function(h){var e=Math.ceil(this.pixelSize()),n=h.width,a=h.height,s,l,u,f,c,p,v,S=Math.ceil(n/e),y=Math.ceil(a/e),x,_,A,E,O,I,L,D=h.data;if(e<=0){P.error("pixelSize value can not be <= 0");return}for(O=0;O<S;O+=1)for(I=0;I<y;I+=1){for(f=0,c=0,p=0,v=0,x=O*e,_=x+e,A=I*e,E=A+e,L=0,s=x;s<_;s+=1)if(!(s>=n))for(l=A;l<E;l+=1)l>=a||(u=(n*l+s)*4,f+=D[u+0],c+=D[u+1],p+=D[u+2],v+=D[u+3],L+=1);for(f=f/L,c=c/L,p=p/L,v=v/L,s=x;s<_;s+=1)if(!(s>=n))for(l=A;l<E;l+=1)l>=a||(u=(n*l+s)*4,D[u+0]=f,D[u+1]=c,D[u+2]=p,D[u+3]=v)}};w.addGetterSetter(z,"pixelSize",8,G(),w.afterSetFilter);const mc=function(h){var e=Math.round(this.levels()*254)+1,n=h.data,a=n.length,s=255/e,l;for(l=0;l<a;l+=1)n[l]=Math.floor(n[l]/s)*s};w.addGetterSetter(z,"levels",.5,G(),w.afterSetFilter);const yc=function(h){var e=h.data,n=e.length,a=this.red(),s=this.green(),l=this.blue(),u,f;for(u=0;u<n;u+=4)f=(.34*e[u]+.5*e[u+1]+.16*e[u+2])/255,e[u]=f*a,e[u+1]=f*s,e[u+2]=f*l,e[u+3]=e[u+3]};w.addGetterSetter(z,"red",0,function(h){return this._filterUpToDate=!1,h>255?255:h<0?0:Math.round(h)});w.addGetterSetter(z,"green",0,function(h){return this._filterUpToDate=!1,h>255?255:h<0?0:Math.round(h)});w.addGetterSetter(z,"blue",0,Yl,w.afterSetFilter);const _c=function(h){var e=h.data,n=e.length,a=this.red(),s=this.green(),l=this.blue(),u=this.alpha(),f,c;for(f=0;f<n;f+=4)c=1-u,e[f]=a*u+e[f]*c,e[f+1]=s*u+e[f+1]*c,e[f+2]=l*u+e[f+2]*c};w.addGetterSetter(z,"red",0,function(h){return this._filterUpToDate=!1,h>255?255:h<0?0:Math.round(h)});w.addGetterSetter(z,"green",0,function(h){return this._filterUpToDate=!1,h>255?255:h<0?0:Math.round(h)});w.addGetterSetter(z,"blue",0,Yl,w.afterSetFilter);w.addGetterSetter(z,"alpha",1,function(h){return this._filterUpToDate=!1,h>1?1:h<0?0:h});const Sc=function(h){var e=h.data,n=e.length,a,s,l,u;for(a=0;a<n;a+=4)s=e[a+0],l=e[a+1],u=e[a+2],e[a+0]=Math.min(255,s*.393+l*.769+u*.189),e[a+1]=Math.min(255,s*.349+l*.686+u*.168),e[a+2]=Math.min(255,s*.272+l*.534+u*.131)},wc=function(h){var e=h.data,n=h.width,a=h.height,s=n*4,l=a;do{var u=(l-1)*s,f=n;do{var c=u+(f-1)*4,p=e[c],v=e[c+1],S=e[c+2];p>127&&(p=255-p),v>127&&(v=255-v),S>127&&(S=255-S),e[c]=p,e[c+1]=v,e[c+2]=S}while(--f)}while(--l)},Cc=function(h){var e=this.threshold()*255,n=h.data,a=n.length,s;for(s=0;s<a;s+=1)n[s]=n[s]<e?0:255};w.addGetterSetter(z,"threshold",.5,G(),w.afterSetFilter);const gg=_r.Util._assign(_r,{Arc:Yt,Arrow:wr,Circle:Xr,Ellipse:ar,Image:Et,Label:Es,Tag:Cr,Line:Xt,Path:ve,Rect:Ln,RegularPolygon:xr,Ring:kr,Sprite:Gt,Star:sr,Text:Te,TextPath:ze,Transformer:pe,Wedge:Vt,Filters:{Blur:qf,Brighten:Jf,Contrast:Zf,Emboss:$f,Enhance:ec,Grayscale:tc,HSL:rc,HSV:nc,Invert:ic,Kaleidoscope:oc,Mask:gc,Noise:pc,Pixelate:vc,Posterize:mc,RGB:yc,RGBA:_c,Sepia:Sc,Solarize:wc,Threshold:Cc}});var Ch={exports:{}},An={exports:{}},xh={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(h){function e(B,$){var H=B.length;B.push($);e:for(;0<H;){var re=H-1>>>1,he=B[re];if(0<s(he,$))B[re]=$,B[H]=he,H=re;else break e}}function n(B){return B.length===0?null:B[0]}function a(B){if(B.length===0)return null;var $=B[0],H=B.pop();if(H!==$){B[0]=H;e:for(var re=0,he=B.length,We=he>>>1;re<We;){var Ne=2*(re+1)-1,lr=B[Ne],Tt=Ne+1,hr=B[Tt];if(0>s(lr,H))Tt<he&&0>s(hr,lr)?(B[re]=hr,B[Tt]=H,re=Tt):(B[re]=lr,B[Ne]=H,re=Ne);else if(Tt<he&&0>s(hr,H))B[re]=hr,B[Tt]=H,re=Tt;else break e}}return $}function s(B,$){var H=B.sortIndex-$.sortIndex;return H!==0?H:B.id-$.id}if(typeof performance=="object"&&typeof performance.now=="function"){var l=performance;h.unstable_now=function(){return l.now()}}else{var u=Date,f=u.now();h.unstable_now=function(){return u.now()-f}}var c=[],p=[],v=1,S=null,y=3,x=!1,_=!1,A=!1,E=typeof setTimeout=="function"?setTimeout:null,O=typeof clearTimeout=="function"?clearTimeout:null,I=typeof setImmediate!="undefined"?setImmediate:null;typeof navigator!="undefined"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function L(B){for(var $=n(p);$!==null;){if($.callback===null)a(p);else if($.startTime<=B)a(p),$.sortIndex=$.expirationTime,e(c,$);else break;$=n(p)}}function D(B){if(A=!1,L(B),!_)if(n(c)!==null)_=!0,ae(Y);else{var $=n(p);$!==null&&me(D,$.startTime-B)}}function Y(B,$){_=!1,A&&(A=!1,O(U),U=-1),x=!0;var H=y;try{for(L($),S=n(c);S!==null&&(!(S.expirationTime>$)||B&&!q());){var re=S.callback;if(typeof re=="function"){S.callback=null,y=S.priorityLevel;var he=re(S.expirationTime<=$);$=h.unstable_now(),typeof he=="function"?S.callback=he:S===n(c)&&a(c),L($)}else a(c);S=n(c)}if(S!==null)var We=!0;else{var Ne=n(p);Ne!==null&&me(D,Ne.startTime-$),We=!1}return We}finally{S=null,y=H,x=!1}}var b=!1,j=null,U=-1,Q=5,J=-1;function q(){return!(h.unstable_now()-J<Q)}function ne(){if(j!==null){var B=h.unstable_now();J=B;var $=!0;try{$=j(!0,B)}finally{$?Z():(b=!1,j=null)}}else b=!1}var Z;if(typeof I=="function")Z=function(){I(ne)};else if(typeof MessageChannel!="undefined"){var ge=new MessageChannel,Ae=ge.port2;ge.port1.onmessage=ne,Z=function(){Ae.postMessage(null)}}else Z=function(){E(ne,0)};function ae(B){j=B,b||(b=!0,Z())}function me(B,$){U=E(function(){B(h.unstable_now())},$)}h.unstable_IdlePriority=5,h.unstable_ImmediatePriority=1,h.unstable_LowPriority=4,h.unstable_NormalPriority=3,h.unstable_Profiling=null,h.unstable_UserBlockingPriority=2,h.unstable_cancelCallback=function(B){B.callback=null},h.unstable_continueExecution=function(){_||x||(_=!0,ae(Y))},h.unstable_forceFrameRate=function(B){0>B||125<B?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):Q=0<B?Math.floor(1e3/B):5},h.unstable_getCurrentPriorityLevel=function(){return y},h.unstable_getFirstCallbackNode=function(){return n(c)},h.unstable_next=function(B){switch(y){case 1:case 2:case 3:var $=3;break;default:$=y}var H=y;y=$;try{return B()}finally{y=H}},h.unstable_pauseExecution=function(){},h.unstable_requestPaint=function(){},h.unstable_runWithPriority=function(B,$){switch(B){case 1:case 2:case 3:case 4:case 5:break;default:B=3}var H=y;y=B;try{return $()}finally{y=H}},h.unstable_scheduleCallback=function(B,$,H){var re=h.unstable_now();switch(typeof H=="object"&&H!==null?(H=H.delay,H=typeof H=="number"&&0<H?re+H:re):H=re,B){case 1:var he=-1;break;case 2:he=250;break;case 5:he=1073741823;break;case 4:he=1e4;break;default:he=5e3}return he=H+he,B={id:v++,callback:$,priorityLevel:B,startTime:H,expirationTime:he,sortIndex:-1},H>re?(B.sortIndex=H,e(p,B),n(c)===null&&B===n(p)&&(A?(O(U),U=-1):A=!0,me(D,H-re))):(B.sortIndex=he,e(c,B),_||x||(_=!0,ae(Y))),B},h.unstable_shouldYield=q,h.unstable_wrapCallback=function(B){var $=y;return function(){var H=y;y=$;try{return B.apply(this,arguments)}finally{y=H}}}})(xh);An.exports=xh;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var xc=function(e){var n={},a=ud.exports,s=An.exports,l=Object.assign;function u(t){for(var r="https://reactjs.org/docs/error-decoder.html?invariant="+t,i=1;i<arguments.length;i++)r+="&args[]="+encodeURIComponent(arguments[i]);return"Minified React error #"+t+"; visit "+r+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var f=a.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,c=Symbol.for("react.element"),p=Symbol.for("react.portal"),v=Symbol.for("react.fragment"),S=Symbol.for("react.strict_mode"),y=Symbol.for("react.profiler"),x=Symbol.for("react.provider"),_=Symbol.for("react.context"),A=Symbol.for("react.forward_ref"),E=Symbol.for("react.suspense"),O=Symbol.for("react.suspense_list"),I=Symbol.for("react.memo"),L=Symbol.for("react.lazy"),D=Symbol.for("react.offscreen"),Y=Symbol.iterator;function b(t){return t===null||typeof t!="object"?null:(t=Y&&t[Y]||t["@@iterator"],typeof t=="function"?t:null)}function j(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case v:return"Fragment";case p:return"Portal";case y:return"Profiler";case S:return"StrictMode";case E:return"Suspense";case O:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case _:return(t.displayName||"Context")+".Consumer";case x:return(t._context.displayName||"Context")+".Provider";case A:var r=t.render;return t=t.displayName,t||(t=r.displayName||r.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case I:return r=t.displayName||null,r!==null?r:j(t.type)||"Memo";case L:r=t._payload,t=t._init;try{return j(t(r))}catch{}}return null}function U(t){var r=t.type;switch(t.tag){case 24:return"Cache";case 9:return(r.displayName||"Context")+".Consumer";case 10:return(r._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=r.render,t=t.displayName||t.name||"",r.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return r;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return j(r);case 8:return r===S?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof r=="function")return r.displayName||r.name||null;if(typeof r=="string")return r}return null}function Q(t){var r=t,i=t;if(t.alternate)for(;r.return;)r=r.return;else{t=r;do r=t,(r.flags&4098)!==0&&(i=r.return),t=r.return;while(t)}return r.tag===3?i:null}function J(t){if(Q(t)!==t)throw Error(u(188))}function q(t){var r=t.alternate;if(!r){if(r=Q(t),r===null)throw Error(u(188));return r!==t?null:t}for(var i=t,o=r;;){var d=i.return;if(d===null)break;var g=d.alternate;if(g===null){if(o=d.return,o!==null){i=o;continue}break}if(d.child===g.child){for(g=d.child;g;){if(g===i)return J(d),t;if(g===o)return J(d),r;g=g.sibling}throw Error(u(188))}if(i.return!==o.return)i=d,o=g;else{for(var m=!1,C=d.child;C;){if(C===i){m=!0,i=d,o=g;break}if(C===o){m=!0,o=d,i=g;break}C=C.sibling}if(!m){for(C=g.child;C;){if(C===i){m=!0,i=g,o=d;break}if(C===o){m=!0,o=g,i=d;break}C=C.sibling}if(!m)throw Error(u(189))}}if(i.alternate!==o)throw Error(u(190))}if(i.tag!==3)throw Error(u(188));return i.stateNode.current===i?t:r}function ne(t){return t=q(t),t!==null?Z(t):null}function Z(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var r=Z(t);if(r!==null)return r;t=t.sibling}return null}function ge(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){if(t.tag!==4){var r=ge(t);if(r!==null)return r}t=t.sibling}return null}var Ae=Array.isArray,ae=e.getPublicInstance,me=e.getRootHostContext,B=e.getChildHostContext,$=e.prepareForCommit,H=e.resetAfterCommit,re=e.createInstance,he=e.appendInitialChild,We=e.finalizeInitialChildren,Ne=e.prepareUpdate,lr=e.shouldSetTextContent,Tt=e.createTextInstance,hr=e.scheduleTimeout,Eh=e.cancelTimeout,Vi=e.noTimeout,In=e.isPrimaryRenderer,rt=e.supportsMutation,Nn=e.supportsPersistence,ht=e.supportsHydration,Th=e.getInstanceFromNode,Rh=e.preparePortalMount,Ah=e.getCurrentEventPriority,Mh=e.detachDeletedInstance,Lh=e.supportsMicrotasks,Ih=e.scheduleMicrotask,Vr=e.supportsTestSelectors,Nh=e.findFiberRoot,Oh=e.getBoundingRect,Gh=e.getTextContent,jr=e.isHiddenSubtree,Dh=e.matchAccessibilityRole,zh=e.setFocusIfFocusable,Fh=e.setupIntersectionObserver,bh=e.appendChild,Bh=e.appendChildToContainer,Hh=e.commitTextUpdate,Uh=e.commitMount,Wh=e.commitUpdate,Yh=e.insertBefore,Xh=e.insertInContainerBefore,Vh=e.removeChild,jh=e.removeChildFromContainer,As=e.resetTextContent,Qh=e.hideInstance,Kh=e.hideTextInstance,qh=e.unhideInstance,Jh=e.unhideTextInstance,Zh=e.clearContainer,$h=e.cloneInstance,Ms=e.createContainerChildSet,Ls=e.appendChildToContainerChildSet,eu=e.finalizeContainerChildren,ji=e.replaceContainerChildren,Is=e.cloneHiddenInstance,Ns=e.cloneHiddenTextInstance,tu=e.canHydrateInstance,ru=e.canHydrateTextInstance,nu=e.canHydrateSuspenseInstance,Os=e.isSuspenseInstancePending,Qi=e.isSuspenseInstanceFallback,iu=e.registerSuspenseInstanceRetry,Qr=e.getNextHydratableSibling,au=e.getFirstHydratableChild,su=e.getFirstHydratableChildWithinContainer,ou=e.getFirstHydratableChildWithinSuspenseInstance,lu=e.hydrateInstance,hu=e.hydrateTextInstance,uu=e.hydrateSuspenseInstance,du=e.getNextHydratableInstanceAfterSuspenseInstance,fu=e.commitHydratedContainer,cu=e.commitHydratedSuspenseInstance,gu=e.clearSuspenseBoundary,pu=e.clearSuspenseBoundaryFromContainer,vu=e.shouldDeleteUnhydratedTailInstances,mu=e.didNotMatchHydratedContainerTextInstance,yu=e.didNotMatchHydratedTextInstance,Ki;function Kr(t){if(Ki===void 0)try{throw Error()}catch(i){var r=i.stack.trim().match(/\n( *(at )?)/);Ki=r&&r[1]||""}return`
`+Ki+t}var qi=!1;function Ji(t,r){if(!t||qi)return"";qi=!0;var i=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(r)if(r=function(){throw Error()},Object.defineProperty(r.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(r,[])}catch(F){var o=F}Reflect.construct(t,[],r)}else{try{r.call()}catch(F){o=F}t.call(r.prototype)}else{try{throw Error()}catch(F){o=F}t()}}catch(F){if(F&&o&&typeof F.stack=="string"){for(var d=F.stack.split(`
`),g=o.stack.split(`
`),m=d.length-1,C=g.length-1;1<=m&&0<=C&&d[m]!==g[C];)C--;for(;1<=m&&0<=C;m--,C--)if(d[m]!==g[C]){if(m!==1||C!==1)do if(m--,C--,0>C||d[m]!==g[C]){var T=`
`+d[m].replace(" at new "," at ");return t.displayName&&T.includes("<anonymous>")&&(T=T.replace("<anonymous>",t.displayName)),T}while(1<=m&&0<=C);break}}}finally{qi=!1,Error.prepareStackTrace=i}return(t=t?t.displayName||t.name:"")?Kr(t):""}var _u=Object.prototype.hasOwnProperty,Zi=[],Er=-1;function jt(t){return{current:t}}function we(t){0>Er||(t.current=Zi[Er],Zi[Er]=null,Er--)}function Se(t,r){Er++,Zi[Er]=t.current,t.current=r}var Qt={},Ye=jt(Qt),qe=jt(!1),ur=Qt;function Tr(t,r){var i=t.type.contextTypes;if(!i)return Qt;var o=t.stateNode;if(o&&o.__reactInternalMemoizedUnmaskedChildContext===r)return o.__reactInternalMemoizedMaskedChildContext;var d={},g;for(g in i)d[g]=r[g];return o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=d),d}function Je(t){return t=t.childContextTypes,t!=null}function On(){we(qe),we(Ye)}function Gs(t,r,i){if(Ye.current!==Qt)throw Error(u(168));Se(Ye,r),Se(qe,i)}function Ds(t,r,i){var o=t.stateNode;if(r=r.childContextTypes,typeof o.getChildContext!="function")return i;o=o.getChildContext();for(var d in o)if(!(d in r))throw Error(u(108,U(t)||"Unknown",d));return l({},i,o)}function Gn(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Qt,ur=Ye.current,Se(Ye,t),Se(qe,qe.current),!0}function zs(t,r,i){var o=t.stateNode;if(!o)throw Error(u(169));i?(t=Ds(t,r,ur),o.__reactInternalMemoizedMergedChildContext=t,we(qe),we(Ye),Se(Ye,t)):we(qe),Se(qe,i)}var mt=Math.clz32?Math.clz32:Cu,Su=Math.log,wu=Math.LN2;function Cu(t){return t>>>=0,t===0?32:31-(Su(t)/wu|0)|0}var Dn=64,zn=4194304;function qr(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Fn(t,r){var i=t.pendingLanes;if(i===0)return 0;var o=0,d=t.suspendedLanes,g=t.pingedLanes,m=i&268435455;if(m!==0){var C=m&~d;C!==0?o=qr(C):(g&=m,g!==0&&(o=qr(g)))}else m=i&~d,m!==0?o=qr(m):g!==0&&(o=qr(g));if(o===0)return 0;if(r!==0&&r!==o&&(r&d)===0&&(d=o&-o,g=r&-r,d>=g||d===16&&(g&4194240)!==0))return r;if((o&4)!==0&&(o|=i&16),r=t.entangledLanes,r!==0)for(t=t.entanglements,r&=o;0<r;)i=31-mt(r),d=1<<i,o|=t[i],r&=~d;return o}function xu(t,r){switch(t){case 1:case 2:case 4:return r+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return r+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function ku(t,r){for(var i=t.suspendedLanes,o=t.pingedLanes,d=t.expirationTimes,g=t.pendingLanes;0<g;){var m=31-mt(g),C=1<<m,T=d[m];T===-1?((C&i)===0||(C&o)!==0)&&(d[m]=xu(C,r)):T<=r&&(t.expiredLanes|=C),g&=~C}}function $i(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Fs(){var t=Dn;return Dn<<=1,(Dn&4194240)===0&&(Dn=64),t}function ea(t){for(var r=[],i=0;31>i;i++)r.push(t);return r}function Jr(t,r,i){t.pendingLanes|=r,r!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,r=31-mt(r),t[r]=i}function Pu(t,r){var i=t.pendingLanes&~r;t.pendingLanes=r,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=r,t.mutableReadLanes&=r,t.entangledLanes&=r,r=t.entanglements;var o=t.eventTimes;for(t=t.expirationTimes;0<i;){var d=31-mt(i),g=1<<d;r[d]=0,o[d]=-1,t[d]=-1,i&=~g}}function ta(t,r){var i=t.entangledLanes|=r;for(t=t.entanglements;i;){var o=31-mt(i),d=1<<o;d&r|t[o]&r&&(t[o]|=r),i&=~d}}var ue=0;function bs(t){return t&=-t,1<t?4<t?(t&268435455)!==0?16:536870912:4:1}var ra=s.unstable_scheduleCallback,Bs=s.unstable_cancelCallback,Eu=s.unstable_shouldYield,Tu=s.unstable_requestPaint,Fe=s.unstable_now,na=s.unstable_ImmediatePriority,Ru=s.unstable_UserBlockingPriority,ia=s.unstable_NormalPriority,Au=s.unstable_IdlePriority,bn=null,Rt=null;function Mu(t){if(Rt&&typeof Rt.onCommitFiberRoot=="function")try{Rt.onCommitFiberRoot(bn,t,void 0,(t.current.flags&128)===128)}catch{}}function Lu(t,r){return t===r&&(t!==0||1/t===1/r)||t!==t&&r!==r}var yt=typeof Object.is=="function"?Object.is:Lu,Dt=null,Bn=!1,aa=!1;function Hs(t){Dt===null?Dt=[t]:Dt.push(t)}function Iu(t){Bn=!0,Hs(t)}function At(){if(!aa&&Dt!==null){aa=!0;var t=0,r=ue;try{var i=Dt;for(ue=1;t<i.length;t++){var o=i[t];do o=o(!0);while(o!==null)}Dt=null,Bn=!1}catch(d){throw Dt!==null&&(Dt=Dt.slice(t+1)),ra(na,At),d}finally{ue=r,aa=!1}}return null}var Nu=f.ReactCurrentBatchConfig;function Hn(t,r){if(yt(t,r))return!0;if(typeof t!="object"||t===null||typeof r!="object"||r===null)return!1;var i=Object.keys(t),o=Object.keys(r);if(i.length!==o.length)return!1;for(o=0;o<i.length;o++){var d=i[o];if(!_u.call(r,d)||!yt(t[d],r[d]))return!1}return!0}function Ou(t){switch(t.tag){case 5:return Kr(t.type);case 16:return Kr("Lazy");case 13:return Kr("Suspense");case 19:return Kr("SuspenseList");case 0:case 2:case 15:return t=Ji(t.type,!1),t;case 11:return t=Ji(t.type.render,!1),t;case 1:return t=Ji(t.type,!0),t;default:return""}}function _t(t,r){if(t&&t.defaultProps){r=l({},r),t=t.defaultProps;for(var i in t)r[i]===void 0&&(r[i]=t[i]);return r}return r}var Un=jt(null),Wn=null,Rr=null,sa=null;function oa(){sa=Rr=Wn=null}function Us(t,r,i){In?(Se(Un,r._currentValue),r._currentValue=i):(Se(Un,r._currentValue2),r._currentValue2=i)}function la(t){var r=Un.current;we(Un),In?t._currentValue=r:t._currentValue2=r}function ha(t,r,i){for(;t!==null;){var o=t.alternate;if((t.childLanes&r)!==r?(t.childLanes|=r,o!==null&&(o.childLanes|=r)):o!==null&&(o.childLanes&r)!==r&&(o.childLanes|=r),t===i)break;t=t.return}}function Ar(t,r){Wn=t,sa=Rr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&((t.lanes&r)!==0&&(Ze=!0),t.firstContext=null)}function ut(t){var r=In?t._currentValue:t._currentValue2;if(sa!==t)if(t={context:t,memoizedValue:r,next:null},Rr===null){if(Wn===null)throw Error(u(308));Rr=t,Wn.dependencies={lanes:0,firstContext:t}}else Rr=Rr.next=t;return r}var St=null,Kt=!1;function ua(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Ws(t,r){t=t.updateQueue,r.updateQueue===t&&(r.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function zt(t,r){return{eventTime:t,lane:r,tag:0,payload:null,callback:null,next:null}}function qt(t,r){var i=t.updateQueue;i!==null&&(i=i.shared,il(t)?(t=i.interleaved,t===null?(r.next=r,St===null?St=[i]:St.push(i)):(r.next=t.next,t.next=r),i.interleaved=r):(t=i.pending,t===null?r.next=r:(r.next=t.next,t.next=r),i.pending=r))}function Yn(t,r,i){if(r=r.updateQueue,r!==null&&(r=r.shared,(i&4194240)!==0)){var o=r.lanes;o&=t.pendingLanes,i|=o,r.lanes=i,ta(t,i)}}function Ys(t,r){var i=t.updateQueue,o=t.alternate;if(o!==null&&(o=o.updateQueue,i===o)){var d=null,g=null;if(i=i.firstBaseUpdate,i!==null){do{var m={eventTime:i.eventTime,lane:i.lane,tag:i.tag,payload:i.payload,callback:i.callback,next:null};g===null?d=g=m:g=g.next=m,i=i.next}while(i!==null);g===null?d=g=r:g=g.next=r}else d=g=r;i={baseState:o.baseState,firstBaseUpdate:d,lastBaseUpdate:g,shared:o.shared,effects:o.effects},t.updateQueue=i;return}t=i.lastBaseUpdate,t===null?i.firstBaseUpdate=r:t.next=r,i.lastBaseUpdate=r}function Xn(t,r,i,o){var d=t.updateQueue;Kt=!1;var g=d.firstBaseUpdate,m=d.lastBaseUpdate,C=d.shared.pending;if(C!==null){d.shared.pending=null;var T=C,F=T.next;T.next=null,m===null?g=F:m.next=F,m=T;var K=t.alternate;K!==null&&(K=K.updateQueue,C=K.lastBaseUpdate,C!==m&&(C===null?K.firstBaseUpdate=F:C.next=F,K.lastBaseUpdate=T))}if(g!==null){var se=d.baseState;m=0,K=F=T=null,C=g;do{var te=C.lane,Ce=C.eventTime;if((o&te)===te){K!==null&&(K=K.next={eventTime:Ce,lane:0,tag:C.tag,payload:C.payload,callback:C.callback,next:null});e:{var ye=t,tt=C;switch(te=r,Ce=i,tt.tag){case 1:if(ye=tt.payload,typeof ye=="function"){se=ye.call(Ce,se,te);break e}se=ye;break e;case 3:ye.flags=ye.flags&-65537|128;case 0:if(ye=tt.payload,te=typeof ye=="function"?ye.call(Ce,se,te):ye,te==null)break e;se=l({},se,te);break e;case 2:Kt=!0}}C.callback!==null&&C.lane!==0&&(t.flags|=64,te=d.effects,te===null?d.effects=[C]:te.push(C))}else Ce={eventTime:Ce,lane:te,tag:C.tag,payload:C.payload,callback:C.callback,next:null},K===null?(F=K=Ce,T=se):K=K.next=Ce,m|=te;if(C=C.next,C===null){if(C=d.shared.pending,C===null)break;te=C,C=te.next,te.next=null,d.lastBaseUpdate=te,d.shared.pending=null}}while(1);if(K===null&&(T=se),d.baseState=T,d.firstBaseUpdate=F,d.lastBaseUpdate=K,r=d.shared.interleaved,r!==null){d=r;do m|=d.lane,d=d.next;while(d!==r)}else g===null&&(d.shared.lanes=0);gr|=m,t.lanes=m,t.memoizedState=se}}function Xs(t,r,i){if(t=r.effects,r.effects=null,t!==null)for(r=0;r<t.length;r++){var o=t[r],d=o.callback;if(d!==null){if(o.callback=null,o=i,typeof d!="function")throw Error(u(191,d));d.call(o)}}}var Vs=new a.Component().refs;function da(t,r,i,o){r=t.memoizedState,i=i(o,r),i=i==null?r:l({},r,i),t.memoizedState=i,t.lanes===0&&(t.updateQueue.baseState=i)}var Vn={isMounted:function(t){return(t=t._reactInternals)?Q(t)===t:!1},enqueueSetState:function(t,r,i){t=t._reactInternals;var o=Qe(),d=$t(t),g=zt(o,d);g.payload=r,i!=null&&(g.callback=i),qt(t,g),r=st(t,d,o),r!==null&&Yn(r,t,d)},enqueueReplaceState:function(t,r,i){t=t._reactInternals;var o=Qe(),d=$t(t),g=zt(o,d);g.tag=1,g.payload=r,i!=null&&(g.callback=i),qt(t,g),r=st(t,d,o),r!==null&&Yn(r,t,d)},enqueueForceUpdate:function(t,r){t=t._reactInternals;var i=Qe(),o=$t(t),d=zt(i,o);d.tag=2,r!=null&&(d.callback=r),qt(t,d),r=st(t,o,i),r!==null&&Yn(r,t,o)}};function js(t,r,i,o,d,g,m){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(o,g,m):r.prototype&&r.prototype.isPureReactComponent?!Hn(i,o)||!Hn(d,g):!0}function Qs(t,r,i){var o=!1,d=Qt,g=r.contextType;return typeof g=="object"&&g!==null?g=ut(g):(d=Je(r)?ur:Ye.current,o=r.contextTypes,g=(o=o!=null)?Tr(t,d):Qt),r=new r(i,g),t.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,r.updater=Vn,t.stateNode=r,r._reactInternals=t,o&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=d,t.__reactInternalMemoizedMaskedChildContext=g),r}function Ks(t,r,i,o){t=r.state,typeof r.componentWillReceiveProps=="function"&&r.componentWillReceiveProps(i,o),typeof r.UNSAFE_componentWillReceiveProps=="function"&&r.UNSAFE_componentWillReceiveProps(i,o),r.state!==t&&Vn.enqueueReplaceState(r,r.state,null)}function fa(t,r,i,o){var d=t.stateNode;d.props=i,d.state=t.memoizedState,d.refs=Vs,ua(t);var g=r.contextType;typeof g=="object"&&g!==null?d.context=ut(g):(g=Je(r)?ur:Ye.current,d.context=Tr(t,g)),d.state=t.memoizedState,g=r.getDerivedStateFromProps,typeof g=="function"&&(da(t,r,g,i),d.state=t.memoizedState),typeof r.getDerivedStateFromProps=="function"||typeof d.getSnapshotBeforeUpdate=="function"||typeof d.UNSAFE_componentWillMount!="function"&&typeof d.componentWillMount!="function"||(r=d.state,typeof d.componentWillMount=="function"&&d.componentWillMount(),typeof d.UNSAFE_componentWillMount=="function"&&d.UNSAFE_componentWillMount(),r!==d.state&&Vn.enqueueReplaceState(d,d.state,null),Xn(t,i,d,o),d.state=t.memoizedState),typeof d.componentDidMount=="function"&&(t.flags|=4194308)}var Mr=[],Lr=0,jn=null,Qn=0,dt=[],ft=0,dr=null,Ft=1,bt="";function fr(t,r){Mr[Lr++]=Qn,Mr[Lr++]=jn,jn=t,Qn=r}function qs(t,r,i){dt[ft++]=Ft,dt[ft++]=bt,dt[ft++]=dr,dr=t;var o=Ft;t=bt;var d=32-mt(o)-1;o&=~(1<<d),i+=1;var g=32-mt(r)+d;if(30<g){var m=d-d%5;g=(o&(1<<m)-1).toString(32),o>>=m,d-=m,Ft=1<<32-mt(r)+d|i<<d|o,bt=g+t}else Ft=1<<g|i<<d|o,bt=t}function ca(t){t.return!==null&&(fr(t,1),qs(t,1,0))}function ga(t){for(;t===jn;)jn=Mr[--Lr],Mr[Lr]=null,Qn=Mr[--Lr],Mr[Lr]=null;for(;t===dr;)dr=dt[--ft],dt[ft]=null,bt=dt[--ft],dt[ft]=null,Ft=dt[--ft],dt[ft]=null}var nt=null,it=null,xe=!1,Zr=!1,wt=null;function Js(t,r){var i=pt(5,null,null,0);i.elementType="DELETED",i.stateNode=r,i.return=t,r=t.deletions,r===null?(t.deletions=[i],t.flags|=16):r.push(i)}function Zs(t,r){switch(t.tag){case 5:return r=tu(r,t.type,t.pendingProps),r!==null?(t.stateNode=r,nt=t,it=au(r),!0):!1;case 6:return r=ru(r,t.pendingProps),r!==null?(t.stateNode=r,nt=t,it=null,!0):!1;case 13:if(r=nu(r),r!==null){var i=dr!==null?{id:Ft,overflow:bt}:null;return t.memoizedState={dehydrated:r,treeContext:i,retryLane:1073741824},i=pt(18,null,null,0),i.stateNode=r,i.return=t,t.child=i,nt=t,it=null,!0}return!1;default:return!1}}function pa(t){return(t.mode&1)!==0&&(t.flags&128)===0}function va(t){if(xe){var r=it;if(r){var i=r;if(!Zs(t,r)){if(pa(t))throw Error(u(418));r=Qr(i);var o=nt;r&&Zs(t,r)?Js(o,i):(t.flags=t.flags&-4097|2,xe=!1,nt=t)}}else{if(pa(t))throw Error(u(418));t.flags=t.flags&-4097|2,xe=!1,nt=t}}}function $s(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;nt=t}function $r(t){if(!ht||t!==nt)return!1;if(!xe)return $s(t),xe=!0,!1;if(t.tag!==3&&(t.tag!==5||vu(t.type)&&!lr(t.type,t.memoizedProps))){var r=it;if(r){if(pa(t)){for(t=it;t;)t=Qr(t);throw Error(u(418))}for(;r;)Js(t,r),r=Qr(r)}}if($s(t),t.tag===13){if(!ht)throw Error(u(316));if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(u(317));it=du(t)}else it=nt?Qr(t.stateNode):null;return!0}function Ir(){ht&&(it=nt=null,Zr=xe=!1)}function ma(t){wt===null?wt=[t]:wt.push(t)}function en(t,r,i){if(t=i.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(i._owner){if(i=i._owner,i){if(i.tag!==1)throw Error(u(309));var o=i.stateNode}if(!o)throw Error(u(147,t));var d=o,g=""+t;return r!==null&&r.ref!==null&&typeof r.ref=="function"&&r.ref._stringRef===g?r.ref:(r=function(m){var C=d.refs;C===Vs&&(C=d.refs={}),m===null?delete C[g]:C[g]=m},r._stringRef=g,r)}if(typeof t!="string")throw Error(u(284));if(!i._owner)throw Error(u(290,t))}return t}function Kn(t,r){throw t=Object.prototype.toString.call(r),Error(u(31,t==="[object Object]"?"object with keys {"+Object.keys(r).join(", ")+"}":t))}function eo(t){var r=t._init;return r(t._payload)}function to(t){function r(R,k){if(t){var M=R.deletions;M===null?(R.deletions=[k],R.flags|=16):M.push(k)}}function i(R,k){if(!t)return null;for(;k!==null;)r(R,k),k=k.sibling;return null}function o(R,k){for(R=new Map;k!==null;)k.key!==null?R.set(k.key,k):R.set(k.index,k),k=k.sibling;return R}function d(R,k){return R=tr(R,k),R.index=0,R.sibling=null,R}function g(R,k,M){return R.index=M,t?(M=R.alternate,M!==null?(M=M.index,M<k?(R.flags|=2,k):M):(R.flags|=2,k)):(R.flags|=1048576,k)}function m(R){return t&&R.alternate===null&&(R.flags|=2),R}function C(R,k,M,W){return k===null||k.tag!==6?(k=rs(M,R.mode,W),k.return=R,k):(k=d(k,M),k.return=R,k)}function T(R,k,M,W){var ee=M.type;return ee===v?K(R,k,M.props.children,W,M.key):k!==null&&(k.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===L&&eo(ee)===k.type)?(W=d(k,M.props),W.ref=en(R,k,M),W.return=R,W):(W=xi(M.type,M.key,M.props,null,R.mode,W),W.ref=en(R,k,M),W.return=R,W)}function F(R,k,M,W){return k===null||k.tag!==4||k.stateNode.containerInfo!==M.containerInfo||k.stateNode.implementation!==M.implementation?(k=ns(M,R.mode,W),k.return=R,k):(k=d(k,M.children||[]),k.return=R,k)}function K(R,k,M,W,ee){return k===null||k.tag!==7?(k=yr(M,R.mode,W,ee),k.return=R,k):(k=d(k,M),k.return=R,k)}function se(R,k,M){if(typeof k=="string"&&k!==""||typeof k=="number")return k=rs(""+k,R.mode,M),k.return=R,k;if(typeof k=="object"&&k!==null){switch(k.$$typeof){case c:return M=xi(k.type,k.key,k.props,null,R.mode,M),M.ref=en(R,null,k),M.return=R,M;case p:return k=ns(k,R.mode,M),k.return=R,k;case L:var W=k._init;return se(R,W(k._payload),M)}if(Ae(k)||b(k))return k=yr(k,R.mode,M,null),k.return=R,k;Kn(R,k)}return null}function te(R,k,M,W){var ee=k!==null?k.key:null;if(typeof M=="string"&&M!==""||typeof M=="number")return ee!==null?null:C(R,k,""+M,W);if(typeof M=="object"&&M!==null){switch(M.$$typeof){case c:return M.key===ee?T(R,k,M,W):null;case p:return M.key===ee?F(R,k,M,W):null;case L:return ee=M._init,te(R,k,ee(M._payload),W)}if(Ae(M)||b(M))return ee!==null?null:K(R,k,M,W,null);Kn(R,M)}return null}function Ce(R,k,M,W,ee){if(typeof W=="string"&&W!==""||typeof W=="number")return R=R.get(M)||null,C(k,R,""+W,ee);if(typeof W=="object"&&W!==null){switch(W.$$typeof){case c:return R=R.get(W.key===null?M:W.key)||null,T(k,R,W,ee);case p:return R=R.get(W.key===null?M:W.key)||null,F(k,R,W,ee);case L:var oe=W._init;return Ce(R,k,M,oe(W._payload),ee)}if(Ae(W)||b(W))return R=R.get(M)||null,K(k,R,W,ee,null);Kn(k,W)}return null}function ye(R,k,M,W){for(var ee=null,oe=null,ie=k,de=k=0,Be=null;ie!==null&&de<M.length;de++){ie.index>de?(Be=ie,ie=null):Be=ie.sibling;var fe=te(R,ie,M[de],W);if(fe===null){ie===null&&(ie=Be);break}t&&ie&&fe.alternate===null&&r(R,ie),k=g(fe,k,de),oe===null?ee=fe:oe.sibling=fe,oe=fe,ie=Be}if(de===M.length)return i(R,ie),xe&&fr(R,de),ee;if(ie===null){for(;de<M.length;de++)ie=se(R,M[de],W),ie!==null&&(k=g(ie,k,de),oe===null?ee=ie:oe.sibling=ie,oe=ie);return xe&&fr(R,de),ee}for(ie=o(R,ie);de<M.length;de++)Be=Ce(ie,R,de,M[de],W),Be!==null&&(t&&Be.alternate!==null&&ie.delete(Be.key===null?de:Be.key),k=g(Be,k,de),oe===null?ee=Be:oe.sibling=Be,oe=Be);return t&&ie.forEach(function(rr){return r(R,rr)}),xe&&fr(R,de),ee}function tt(R,k,M,W){var ee=b(M);if(typeof ee!="function")throw Error(u(150));if(M=ee.call(M),M==null)throw Error(u(151));for(var oe=ee=null,ie=k,de=k=0,Be=null,fe=M.next();ie!==null&&!fe.done;de++,fe=M.next()){ie.index>de?(Be=ie,ie=null):Be=ie.sibling;var rr=te(R,ie,fe.value,W);if(rr===null){ie===null&&(ie=Be);break}t&&ie&&rr.alternate===null&&r(R,ie),k=g(rr,k,de),oe===null?ee=rr:oe.sibling=rr,oe=rr,ie=Be}if(fe.done)return i(R,ie),xe&&fr(R,de),ee;if(ie===null){for(;!fe.done;de++,fe=M.next())fe=se(R,fe.value,W),fe!==null&&(k=g(fe,k,de),oe===null?ee=fe:oe.sibling=fe,oe=fe);return xe&&fr(R,de),ee}for(ie=o(R,ie);!fe.done;de++,fe=M.next())fe=Ce(ie,R,de,fe.value,W),fe!==null&&(t&&fe.alternate!==null&&ie.delete(fe.key===null?de:fe.key),k=g(fe,k,de),oe===null?ee=fe:oe.sibling=fe,oe=fe);return t&&ie.forEach(function(hd){return r(R,hd)}),xe&&fr(R,de),ee}function Ut(R,k,M,W){if(typeof M=="object"&&M!==null&&M.type===v&&M.key===null&&(M=M.props.children),typeof M=="object"&&M!==null){switch(M.$$typeof){case c:e:{for(var ee=M.key,oe=k;oe!==null;){if(oe.key===ee){if(ee=M.type,ee===v){if(oe.tag===7){i(R,oe.sibling),k=d(oe,M.props.children),k.return=R,R=k;break e}}else if(oe.elementType===ee||typeof ee=="object"&&ee!==null&&ee.$$typeof===L&&eo(ee)===oe.type){i(R,oe.sibling),k=d(oe,M.props),k.ref=en(R,oe,M),k.return=R,R=k;break e}i(R,oe);break}else r(R,oe);oe=oe.sibling}M.type===v?(k=yr(M.props.children,R.mode,W,M.key),k.return=R,R=k):(W=xi(M.type,M.key,M.props,null,R.mode,W),W.ref=en(R,k,M),W.return=R,R=W)}return m(R);case p:e:{for(oe=M.key;k!==null;){if(k.key===oe)if(k.tag===4&&k.stateNode.containerInfo===M.containerInfo&&k.stateNode.implementation===M.implementation){i(R,k.sibling),k=d(k,M.children||[]),k.return=R,R=k;break e}else{i(R,k);break}else r(R,k);k=k.sibling}k=ns(M,R.mode,W),k.return=R,R=k}return m(R);case L:return oe=M._init,Ut(R,k,oe(M._payload),W)}if(Ae(M))return ye(R,k,M,W);if(b(M))return tt(R,k,M,W);Kn(R,M)}return typeof M=="string"&&M!==""||typeof M=="number"?(M=""+M,k!==null&&k.tag===6?(i(R,k.sibling),k=d(k,M),k.return=R,R=k):(i(R,k),k=rs(M,R.mode,W),k.return=R,R=k),m(R)):i(R,k)}return Ut}var Nr=to(!0),ro=to(!1),tn={},ct=jt(tn),rn=jt(tn),Or=jt(tn);function Mt(t){if(t===tn)throw Error(u(174));return t}function ya(t,r){Se(Or,r),Se(rn,t),Se(ct,tn),t=me(r),we(ct),Se(ct,t)}function Gr(){we(ct),we(rn),we(Or)}function no(t){var r=Mt(Or.current),i=Mt(ct.current);r=B(i,t.type,r),i!==r&&(Se(rn,t),Se(ct,r))}function _a(t){rn.current===t&&(we(ct),we(rn))}var Pe=jt(0);function qn(t){for(var r=t;r!==null;){if(r.tag===13){var i=r.memoizedState;if(i!==null&&(i=i.dehydrated,i===null||Os(i)||Qi(i)))return r}else if(r.tag===19&&r.memoizedProps.revealOrder!==void 0){if((r.flags&128)!==0)return r}else if(r.child!==null){r.child.return=r,r=r.child;continue}if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return null;r=r.return}r.sibling.return=r.return,r=r.sibling}return null}var Sa=[];function wa(){for(var t=0;t<Sa.length;t++){var r=Sa[t];In?r._workInProgressVersionPrimary=null:r._workInProgressVersionSecondary=null}Sa.length=0}var Jn=f.ReactCurrentDispatcher,Ca=f.ReactCurrentBatchConfig,cr=0,Ee=null,Oe=null,be=null,Zn=!1,nn=!1,an=0,Gu=0;function Xe(){throw Error(u(321))}function xa(t,r){if(r===null)return!1;for(var i=0;i<r.length&&i<t.length;i++)if(!yt(t[i],r[i]))return!1;return!0}function ka(t,r,i,o,d,g){if(cr=g,Ee=r,r.memoizedState=null,r.updateQueue=null,r.lanes=0,Jn.current=t===null||t.memoizedState===null?bu:Bu,t=i(o,d),nn){g=0;do{if(nn=!1,an=0,25<=g)throw Error(u(301));g+=1,be=Oe=null,r.updateQueue=null,Jn.current=Hu,t=i(o,d)}while(nn)}if(Jn.current=ti,r=Oe!==null&&Oe.next!==null,cr=0,be=Oe=Ee=null,Zn=!1,r)throw Error(u(300));return t}function Pa(){var t=an!==0;return an=0,t}function Lt(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return be===null?Ee.memoizedState=be=t:be=be.next=t,be}function gt(){if(Oe===null){var t=Ee.alternate;t=t!==null?t.memoizedState:null}else t=Oe.next;var r=be===null?Ee.memoizedState:be.next;if(r!==null)be=r,Oe=t;else{if(t===null)throw Error(u(310));Oe=t,t={memoizedState:Oe.memoizedState,baseState:Oe.baseState,baseQueue:Oe.baseQueue,queue:Oe.queue,next:null},be===null?Ee.memoizedState=be=t:be=be.next=t}return be}function sn(t,r){return typeof r=="function"?r(t):r}function Ea(t){var r=gt(),i=r.queue;if(i===null)throw Error(u(311));i.lastRenderedReducer=t;var o=Oe,d=o.baseQueue,g=i.pending;if(g!==null){if(d!==null){var m=d.next;d.next=g.next,g.next=m}o.baseQueue=d=g,i.pending=null}if(d!==null){g=d.next,o=o.baseState;var C=m=null,T=null,F=g;do{var K=F.lane;if((cr&K)===K)T!==null&&(T=T.next={lane:0,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null}),o=F.hasEagerState?F.eagerState:t(o,F.action);else{var se={lane:K,action:F.action,hasEagerState:F.hasEagerState,eagerState:F.eagerState,next:null};T===null?(C=T=se,m=o):T=T.next=se,Ee.lanes|=K,gr|=K}F=F.next}while(F!==null&&F!==g);T===null?m=o:T.next=C,yt(o,r.memoizedState)||(Ze=!0),r.memoizedState=o,r.baseState=m,r.baseQueue=T,i.lastRenderedState=o}if(t=i.interleaved,t!==null){d=t;do g=d.lane,Ee.lanes|=g,gr|=g,d=d.next;while(d!==t)}else d===null&&(i.lanes=0);return[r.memoizedState,i.dispatch]}function Ta(t){var r=gt(),i=r.queue;if(i===null)throw Error(u(311));i.lastRenderedReducer=t;var o=i.dispatch,d=i.pending,g=r.memoizedState;if(d!==null){i.pending=null;var m=d=d.next;do g=t(g,m.action),m=m.next;while(m!==d);yt(g,r.memoizedState)||(Ze=!0),r.memoizedState=g,r.baseQueue===null&&(r.baseState=g),i.lastRenderedState=g}return[g,o]}function io(){}function ao(t,r){var i=Ee,o=gt(),d=r(),g=!yt(o.memoizedState,d);if(g&&(o.memoizedState=d,Ze=!0),o=o.queue,Ra(lo.bind(null,i,o,t),[t]),o.getSnapshot!==r||g||be!==null&&be.memoizedState.tag&1){if(i.flags|=2048,on(9,oo.bind(null,i,o,d,r),void 0,null),Ge===null)throw Error(u(349));(cr&30)!==0||so(i,r,d)}return d}function so(t,r,i){t.flags|=16384,t={getSnapshot:r,value:i},r=Ee.updateQueue,r===null?(r={lastEffect:null,stores:null},Ee.updateQueue=r,r.stores=[t]):(i=r.stores,i===null?r.stores=[t]:i.push(t))}function oo(t,r,i,o){r.value=i,r.getSnapshot=o,ho(r)&&st(t,1,-1)}function lo(t,r,i){return i(function(){ho(r)&&st(t,1,-1)})}function ho(t){var r=t.getSnapshot;t=t.value;try{var i=r();return!yt(t,i)}catch{return!0}}function uo(t){var r=Lt();return typeof t=="function"&&(t=t()),r.memoizedState=r.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:sn,lastRenderedState:t},r.queue=t,t=t.dispatch=Fu.bind(null,Ee,t),[r.memoizedState,t]}function on(t,r,i,o){return t={tag:t,create:r,destroy:i,deps:o,next:null},r=Ee.updateQueue,r===null?(r={lastEffect:null,stores:null},Ee.updateQueue=r,r.lastEffect=t.next=t):(i=r.lastEffect,i===null?r.lastEffect=t.next=t:(o=i.next,i.next=t,t.next=o,r.lastEffect=t)),t}function fo(){return gt().memoizedState}function $n(t,r,i,o){var d=Lt();Ee.flags|=t,d.memoizedState=on(1|r,i,void 0,o===void 0?null:o)}function ei(t,r,i,o){var d=gt();o=o===void 0?null:o;var g=void 0;if(Oe!==null){var m=Oe.memoizedState;if(g=m.destroy,o!==null&&xa(o,m.deps)){d.memoizedState=on(r,i,g,o);return}}Ee.flags|=t,d.memoizedState=on(1|r,i,g,o)}function co(t,r){return $n(8390656,8,t,r)}function Ra(t,r){return ei(2048,8,t,r)}function go(t,r){return ei(4,2,t,r)}function po(t,r){return ei(4,4,t,r)}function vo(t,r){if(typeof r=="function")return t=t(),r(t),function(){r(null)};if(r!=null)return t=t(),r.current=t,function(){r.current=null}}function mo(t,r,i){return i=i!=null?i.concat([t]):null,ei(4,4,vo.bind(null,r,t),i)}function Aa(){}function yo(t,r){var i=gt();r=r===void 0?null:r;var o=i.memoizedState;return o!==null&&r!==null&&xa(r,o[1])?o[0]:(i.memoizedState=[t,r],t)}function _o(t,r){var i=gt();r=r===void 0?null:r;var o=i.memoizedState;return o!==null&&r!==null&&xa(r,o[1])?o[0]:(t=t(),i.memoizedState=[t,r],t)}function So(t,r,i){return(cr&21)===0?(t.baseState&&(t.baseState=!1,Ze=!0),t.memoizedState=i):(yt(i,r)||(i=Fs(),Ee.lanes|=i,gr|=i,t.baseState=!0),r)}function Du(t,r){var i=ue;ue=i!==0&&4>i?i:4,t(!0);var o=Ca.transition;Ca.transition={};try{t(!1),r()}finally{ue=i,Ca.transition=o}}function wo(){return gt().memoizedState}function zu(t,r,i){var o=$t(t);i={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null},Co(t)?xo(r,i):(ko(t,r,i),i=Qe(),t=st(t,o,i),t!==null&&Po(t,r,o))}function Fu(t,r,i){var o=$t(t),d={lane:o,action:i,hasEagerState:!1,eagerState:null,next:null};if(Co(t))xo(r,d);else{ko(t,r,d);var g=t.alternate;if(t.lanes===0&&(g===null||g.lanes===0)&&(g=r.lastRenderedReducer,g!==null))try{var m=r.lastRenderedState,C=g(m,i);if(d.hasEagerState=!0,d.eagerState=C,yt(C,m))return}catch{}finally{}i=Qe(),t=st(t,o,i),t!==null&&Po(t,r,o)}}function Co(t){var r=t.alternate;return t===Ee||r!==null&&r===Ee}function xo(t,r){nn=Zn=!0;var i=t.pending;i===null?r.next=r:(r.next=i.next,i.next=r),t.pending=r}function ko(t,r,i){il(t)?(t=r.interleaved,t===null?(i.next=i,St===null?St=[r]:St.push(r)):(i.next=t.next,t.next=i),r.interleaved=i):(t=r.pending,t===null?i.next=i:(i.next=t.next,t.next=i),r.pending=i)}function Po(t,r,i){if((i&4194240)!==0){var o=r.lanes;o&=t.pendingLanes,i|=o,r.lanes=i,ta(t,i)}}var ti={readContext:ut,useCallback:Xe,useContext:Xe,useEffect:Xe,useImperativeHandle:Xe,useInsertionEffect:Xe,useLayoutEffect:Xe,useMemo:Xe,useReducer:Xe,useRef:Xe,useState:Xe,useDebugValue:Xe,useDeferredValue:Xe,useTransition:Xe,useMutableSource:Xe,useSyncExternalStore:Xe,useId:Xe,unstable_isNewReconciler:!1},bu={readContext:ut,useCallback:function(t,r){return Lt().memoizedState=[t,r===void 0?null:r],t},useContext:ut,useEffect:co,useImperativeHandle:function(t,r,i){return i=i!=null?i.concat([t]):null,$n(4194308,4,vo.bind(null,r,t),i)},useLayoutEffect:function(t,r){return $n(4194308,4,t,r)},useInsertionEffect:function(t,r){return $n(4,2,t,r)},useMemo:function(t,r){var i=Lt();return r=r===void 0?null:r,t=t(),i.memoizedState=[t,r],t},useReducer:function(t,r,i){var o=Lt();return r=i!==void 0?i(r):r,o.memoizedState=o.baseState=r,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:r},o.queue=t,t=t.dispatch=zu.bind(null,Ee,t),[o.memoizedState,t]},useRef:function(t){var r=Lt();return t={current:t},r.memoizedState=t},useState:uo,useDebugValue:Aa,useDeferredValue:function(t){return Lt().memoizedState=t},useTransition:function(){var t=uo(!1),r=t[0];return t=Du.bind(null,t[1]),Lt().memoizedState=t,[r,t]},useMutableSource:function(){},useSyncExternalStore:function(t,r,i){var o=Ee,d=Lt();if(xe){if(i===void 0)throw Error(u(407));i=i()}else{if(i=r(),Ge===null)throw Error(u(349));(cr&30)!==0||so(o,r,i)}d.memoizedState=i;var g={value:i,getSnapshot:r};return d.queue=g,co(lo.bind(null,o,g,t),[t]),o.flags|=2048,on(9,oo.bind(null,o,g,i,r),void 0,null),i},useId:function(){var t=Lt(),r=Ge.identifierPrefix;if(xe){var i=bt,o=Ft;i=(o&~(1<<32-mt(o)-1)).toString(32)+i,r=":"+r+"R"+i,i=an++,0<i&&(r+="H"+i.toString(32)),r+=":"}else i=Gu++,r=":"+r+"r"+i.toString(32)+":";return t.memoizedState=r},unstable_isNewReconciler:!1},Bu={readContext:ut,useCallback:yo,useContext:ut,useEffect:Ra,useImperativeHandle:mo,useInsertionEffect:go,useLayoutEffect:po,useMemo:_o,useReducer:Ea,useRef:fo,useState:function(){return Ea(sn)},useDebugValue:Aa,useDeferredValue:function(t){var r=gt();return So(r,Oe.memoizedState,t)},useTransition:function(){var t=Ea(sn)[0],r=gt().memoizedState;return[t,r]},useMutableSource:io,useSyncExternalStore:ao,useId:wo,unstable_isNewReconciler:!1},Hu={readContext:ut,useCallback:yo,useContext:ut,useEffect:Ra,useImperativeHandle:mo,useInsertionEffect:go,useLayoutEffect:po,useMemo:_o,useReducer:Ta,useRef:fo,useState:function(){return Ta(sn)},useDebugValue:Aa,useDeferredValue:function(t){var r=gt();return Oe===null?r.memoizedState=t:So(r,Oe.memoizedState,t)},useTransition:function(){var t=Ta(sn)[0],r=gt().memoizedState;return[t,r]},useMutableSource:io,useSyncExternalStore:ao,useId:wo,unstable_isNewReconciler:!1};function Ma(t,r){try{var i="",o=r;do i+=Ou(o),o=o.return;while(o);var d=i}catch(g){d=`
Error generating stack: `+g.message+`
`+g.stack}return{value:t,source:r,stack:d}}function La(t,r){try{console.error(r.value)}catch(i){setTimeout(function(){throw i})}}var Uu=typeof WeakMap=="function"?WeakMap:Map;function Eo(t,r,i){i=zt(-1,i),i.tag=3,i.payload={element:null};var o=r.value;return i.callback=function(){vi||(vi=!0,Ka=o),La(t,r)},i}function To(t,r,i){i=zt(-1,i),i.tag=3;var o=t.type.getDerivedStateFromError;if(typeof o=="function"){var d=r.value;i.payload=function(){return o(d)},i.callback=function(){La(t,r)}}var g=t.stateNode;return g!==null&&typeof g.componentDidCatch=="function"&&(i.callback=function(){La(t,r),typeof o!="function"&&(Jt===null?Jt=new Set([this]):Jt.add(this));var m=r.stack;this.componentDidCatch(r.value,{componentStack:m!==null?m:""})}),i}function Ro(t,r,i){var o=t.pingCache;if(o===null){o=t.pingCache=new Uu;var d=new Set;o.set(r,d)}else d=o.get(r),d===void 0&&(d=new Set,o.set(r,d));d.has(i)||(d.add(i),t=td.bind(null,t,r,i),r.then(t,t))}function Ao(t){do{var r;if((r=t.tag===13)&&(r=t.memoizedState,r=r!==null?r.dehydrated!==null:!0),r)return t;t=t.return}while(t!==null);return null}function Mo(t,r,i,o,d){return(t.mode&1)===0?(t===r?t.flags|=65536:(t.flags|=128,i.flags|=131072,i.flags&=-52805,i.tag===1&&(i.alternate===null?i.tag=17:(r=zt(-1,1),r.tag=2,qt(i,r))),i.lanes|=1),t):(t.flags|=65536,t.lanes=d,t)}function It(t){t.flags|=4}function Lo(t,r){if(t!==null&&t.child===r.child)return!0;if((r.flags&16)!==0)return!1;for(t=r.child;t!==null;){if((t.flags&12854)!==0||(t.subtreeFlags&12854)!==0)return!1;t=t.sibling}return!0}var ln,hn,ri,ni;if(rt)ln=function(t,r){for(var i=r.child;i!==null;){if(i.tag===5||i.tag===6)he(t,i.stateNode);else if(i.tag!==4&&i.child!==null){i.child.return=i,i=i.child;continue}if(i===r)break;for(;i.sibling===null;){if(i.return===null||i.return===r)return;i=i.return}i.sibling.return=i.return,i=i.sibling}},hn=function(){},ri=function(t,r,i,o,d){if(t=t.memoizedProps,t!==o){var g=r.stateNode,m=Mt(ct.current);i=Ne(g,i,t,o,d,m),(r.updateQueue=i)&&It(r)}},ni=function(t,r,i,o){i!==o&&It(r)};else if(Nn){ln=function(t,r,i,o){for(var d=r.child;d!==null;){if(d.tag===5){var g=d.stateNode;i&&o&&(g=Is(g,d.type,d.memoizedProps,d)),he(t,g)}else if(d.tag===6)g=d.stateNode,i&&o&&(g=Ns(g,d.memoizedProps,d)),he(t,g);else if(d.tag!==4){if(d.tag===22&&d.memoizedState!==null)g=d.child,g!==null&&(g.return=d),ln(t,d,!0,!0);else if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===r)break;for(;d.sibling===null;){if(d.return===null||d.return===r)return;d=d.return}d.sibling.return=d.return,d=d.sibling}};var Io=function(t,r,i,o){for(var d=r.child;d!==null;){if(d.tag===5){var g=d.stateNode;i&&o&&(g=Is(g,d.type,d.memoizedProps,d)),Ls(t,g)}else if(d.tag===6)g=d.stateNode,i&&o&&(g=Ns(g,d.memoizedProps,d)),Ls(t,g);else if(d.tag!==4){if(d.tag===22&&d.memoizedState!==null)g=d.child,g!==null&&(g.return=d),Io(t,d,!0,!0);else if(d.child!==null){d.child.return=d,d=d.child;continue}}if(d===r)break;for(;d.sibling===null;){if(d.return===null||d.return===r)return;d=d.return}d.sibling.return=d.return,d=d.sibling}};hn=function(t,r){var i=r.stateNode;if(!Lo(t,r)){t=i.containerInfo;var o=Ms(t);Io(o,r,!1,!1),i.pendingChildren=o,It(r),eu(t,o)}},ri=function(t,r,i,o,d){var g=t.stateNode,m=t.memoizedProps;if((t=Lo(t,r))&&m===o)r.stateNode=g;else{var C=r.stateNode,T=Mt(ct.current),F=null;m!==o&&(F=Ne(C,i,m,o,d,T)),t&&F===null?r.stateNode=g:(g=$h(g,F,i,m,o,r,t,C),We(g,i,o,d,T)&&It(r),r.stateNode=g,t?It(r):ln(g,r,!1,!1))}},ni=function(t,r,i,o){i!==o?(t=Mt(Or.current),i=Mt(ct.current),r.stateNode=Tt(o,t,i,r),It(r)):r.stateNode=t.stateNode}}else hn=function(){},ri=function(){},ni=function(){};function un(t,r){if(!xe)switch(t.tailMode){case"hidden":r=t.tail;for(var i=null;r!==null;)r.alternate!==null&&(i=r),r=r.sibling;i===null?t.tail=null:i.sibling=null;break;case"collapsed":i=t.tail;for(var o=null;i!==null;)i.alternate!==null&&(o=i),i=i.sibling;o===null?r||t.tail===null?t.tail=null:t.tail.sibling=null:o.sibling=null}}function Ve(t){var r=t.alternate!==null&&t.alternate.child===t.child,i=0,o=0;if(r)for(var d=t.child;d!==null;)i|=d.lanes|d.childLanes,o|=d.subtreeFlags&14680064,o|=d.flags&14680064,d.return=t,d=d.sibling;else for(d=t.child;d!==null;)i|=d.lanes|d.childLanes,o|=d.subtreeFlags,o|=d.flags,d.return=t,d=d.sibling;return t.subtreeFlags|=o,t.childLanes=i,r}function Wu(t,r,i){var o=r.pendingProps;switch(ga(r),r.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Ve(r),null;case 1:return Je(r.type)&&On(),Ve(r),null;case 3:return o=r.stateNode,Gr(),we(qe),we(Ye),wa(),o.pendingContext&&(o.context=o.pendingContext,o.pendingContext=null),(t===null||t.child===null)&&($r(r)?It(r):t===null||t.memoizedState.isDehydrated&&(r.flags&256)===0||(r.flags|=1024,wt!==null&&(Za(wt),wt=null))),hn(t,r),Ve(r),null;case 5:_a(r),i=Mt(Or.current);var d=r.type;if(t!==null&&r.stateNode!=null)ri(t,r,d,o,i),t.ref!==r.ref&&(r.flags|=512,r.flags|=2097152);else{if(!o){if(r.stateNode===null)throw Error(u(166));return Ve(r),null}if(t=Mt(ct.current),$r(r)){if(!ht)throw Error(u(175));t=lu(r.stateNode,r.type,r.memoizedProps,i,t,r,!Zr),r.updateQueue=t,t!==null&&It(r)}else{var g=re(d,o,i,t,r);ln(g,r,!1,!1),r.stateNode=g,We(g,d,o,i,t)&&It(r)}r.ref!==null&&(r.flags|=512,r.flags|=2097152)}return Ve(r),null;case 6:if(t&&r.stateNode!=null)ni(t,r,t.memoizedProps,o);else{if(typeof o!="string"&&r.stateNode===null)throw Error(u(166));if(t=Mt(Or.current),i=Mt(ct.current),$r(r)){if(!ht)throw Error(u(176));if(t=r.stateNode,o=r.memoizedProps,(i=hu(t,o,r,!Zr))&&(d=nt,d!==null))switch(d.tag){case 3:mu(d.stateNode.containerInfo,t,o,(d.mode&1)!==0);break;case 5:yu(d.type,d.memoizedProps,d.stateNode,t,o,(d.mode&1)!==0)}i&&It(r)}else r.stateNode=Tt(o,t,i,r)}return Ve(r),null;case 13:if(we(Pe),o=r.memoizedState,xe&&it!==null&&(r.mode&1)!==0&&(r.flags&128)===0){for(t=it;t;)t=Qr(t);return Ir(),r.flags|=98560,r}if(o!==null&&o.dehydrated!==null){if(o=$r(r),t===null){if(!o)throw Error(u(318));if(!ht)throw Error(u(344));if(t=r.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(u(317));uu(t,r)}else Ir(),(r.flags&128)===0&&(r.memoizedState=null),r.flags|=4;return Ve(r),null}return wt!==null&&(Za(wt),wt=null),(r.flags&128)!==0?(r.lanes=i,r):(o=o!==null,i=!1,t===null?$r(r):i=t.memoizedState!==null,o!==i&&o&&(r.child.flags|=8192,(r.mode&1)!==0&&(t===null||(Pe.current&1)!==0?De===0&&(De=3):es())),r.updateQueue!==null&&(r.flags|=4),Ve(r),null);case 4:return Gr(),hn(t,r),t===null&&Rh(r.stateNode.containerInfo),Ve(r),null;case 10:return la(r.type._context),Ve(r),null;case 17:return Je(r.type)&&On(),Ve(r),null;case 19:if(we(Pe),d=r.memoizedState,d===null)return Ve(r),null;if(o=(r.flags&128)!==0,g=d.rendering,g===null)if(o)un(d,!1);else{if(De!==0||t!==null&&(t.flags&128)!==0)for(t=r.child;t!==null;){if(g=qn(t),g!==null){for(r.flags|=128,un(d,!1),t=g.updateQueue,t!==null&&(r.updateQueue=t,r.flags|=4),r.subtreeFlags=0,t=i,o=r.child;o!==null;)i=o,d=t,i.flags&=14680066,g=i.alternate,g===null?(i.childLanes=0,i.lanes=d,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=g.childLanes,i.lanes=g.lanes,i.child=g.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=g.memoizedProps,i.memoizedState=g.memoizedState,i.updateQueue=g.updateQueue,i.type=g.type,d=g.dependencies,i.dependencies=d===null?null:{lanes:d.lanes,firstContext:d.firstContext}),o=o.sibling;return Se(Pe,Pe.current&1|2),r.child}t=t.sibling}d.tail!==null&&Fe()>Qa&&(r.flags|=128,o=!0,un(d,!1),r.lanes=4194304)}else{if(!o)if(t=qn(g),t!==null){if(r.flags|=128,o=!0,t=t.updateQueue,t!==null&&(r.updateQueue=t,r.flags|=4),un(d,!0),d.tail===null&&d.tailMode==="hidden"&&!g.alternate&&!xe)return Ve(r),null}else 2*Fe()-d.renderingStartTime>Qa&&i!==1073741824&&(r.flags|=128,o=!0,un(d,!1),r.lanes=4194304);d.isBackwards?(g.sibling=r.child,r.child=g):(t=d.last,t!==null?t.sibling=g:r.child=g,d.last=g)}return d.tail!==null?(r=d.tail,d.rendering=r,d.tail=r.sibling,d.renderingStartTime=Fe(),r.sibling=null,t=Pe.current,Se(Pe,o?t&1|2:t&1),r):(Ve(r),null);case 22:case 23:return $a(),o=r.memoizedState!==null,t!==null&&t.memoizedState!==null!==o&&(r.flags|=8192),o&&(r.mode&1)!==0?(at&1073741824)!==0&&(Ve(r),rt&&r.subtreeFlags&6&&(r.flags|=8192)):Ve(r),null;case 24:return null;case 25:return null}throw Error(u(156,r.tag))}var Yu=f.ReactCurrentOwner,Ze=!1;function Ke(t,r,i,o){r.child=t===null?ro(r,null,i,o):Nr(r,t.child,i,o)}function No(t,r,i,o,d){i=i.render;var g=r.ref;return Ar(r,d),o=ka(t,r,i,o,g,d),i=Pa(),t!==null&&!Ze?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~d,Bt(t,r,d)):(xe&&i&&ca(r),r.flags|=1,Ke(t,r,o,d),r.child)}function Oo(t,r,i,o,d){if(t===null){var g=i.type;return typeof g=="function"&&!ts(g)&&g.defaultProps===void 0&&i.compare===null&&i.defaultProps===void 0?(r.tag=15,r.type=g,Go(t,r,g,o,d)):(t=xi(i.type,null,o,r,r.mode,d),t.ref=r.ref,t.return=r,r.child=t)}if(g=t.child,(t.lanes&d)===0){var m=g.memoizedProps;if(i=i.compare,i=i!==null?i:Hn,i(m,o)&&t.ref===r.ref)return Bt(t,r,d)}return r.flags|=1,t=tr(g,o),t.ref=r.ref,t.return=r,r.child=t}function Go(t,r,i,o,d){if(t!==null){var g=t.memoizedProps;if(Hn(g,o)&&t.ref===r.ref)if(Ze=!1,r.pendingProps=o=g,(t.lanes&d)!==0)(t.flags&131072)!==0&&(Ze=!0);else return r.lanes=t.lanes,Bt(t,r,d)}return Ia(t,r,i,o,d)}function Do(t,r,i){var o=r.pendingProps,d=o.children,g=t!==null?t.memoizedState:null;if(o.mode==="hidden")if((r.mode&1)===0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},Se(zr,at),at|=i;else if((i&1073741824)!==0)r.memoizedState={baseLanes:0,cachePool:null,transitions:null},o=g!==null?g.baseLanes:i,Se(zr,at),at|=o;else return t=g!==null?g.baseLanes|i:i,r.lanes=r.childLanes=1073741824,r.memoizedState={baseLanes:t,cachePool:null,transitions:null},r.updateQueue=null,Se(zr,at),at|=t,null;else g!==null?(o=g.baseLanes|i,r.memoizedState=null):o=i,Se(zr,at),at|=o;return Ke(t,r,d,i),r.child}function zo(t,r){var i=r.ref;(t===null&&i!==null||t!==null&&t.ref!==i)&&(r.flags|=512,r.flags|=2097152)}function Ia(t,r,i,o,d){var g=Je(i)?ur:Ye.current;return g=Tr(r,g),Ar(r,d),i=ka(t,r,i,o,g,d),o=Pa(),t!==null&&!Ze?(r.updateQueue=t.updateQueue,r.flags&=-2053,t.lanes&=~d,Bt(t,r,d)):(xe&&o&&ca(r),r.flags|=1,Ke(t,r,i,d),r.child)}function Fo(t,r,i,o,d){if(Je(i)){var g=!0;Gn(r)}else g=!1;if(Ar(r,d),r.stateNode===null)t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2),Qs(r,i,o),fa(r,i,o,d),o=!0;else if(t===null){var m=r.stateNode,C=r.memoizedProps;m.props=C;var T=m.context,F=i.contextType;typeof F=="object"&&F!==null?F=ut(F):(F=Je(i)?ur:Ye.current,F=Tr(r,F));var K=i.getDerivedStateFromProps,se=typeof K=="function"||typeof m.getSnapshotBeforeUpdate=="function";se||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(C!==o||T!==F)&&Ks(r,m,o,F),Kt=!1;var te=r.memoizedState;m.state=te,Xn(r,o,m,d),T=r.memoizedState,C!==o||te!==T||qe.current||Kt?(typeof K=="function"&&(da(r,i,K,o),T=r.memoizedState),(C=Kt||js(r,i,C,o,te,T,F))?(se||typeof m.UNSAFE_componentWillMount!="function"&&typeof m.componentWillMount!="function"||(typeof m.componentWillMount=="function"&&m.componentWillMount(),typeof m.UNSAFE_componentWillMount=="function"&&m.UNSAFE_componentWillMount()),typeof m.componentDidMount=="function"&&(r.flags|=4194308)):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),r.memoizedProps=o,r.memoizedState=T),m.props=o,m.state=T,m.context=F,o=C):(typeof m.componentDidMount=="function"&&(r.flags|=4194308),o=!1)}else{m=r.stateNode,Ws(t,r),C=r.memoizedProps,F=r.type===r.elementType?C:_t(r.type,C),m.props=F,se=r.pendingProps,te=m.context,T=i.contextType,typeof T=="object"&&T!==null?T=ut(T):(T=Je(i)?ur:Ye.current,T=Tr(r,T));var Ce=i.getDerivedStateFromProps;(K=typeof Ce=="function"||typeof m.getSnapshotBeforeUpdate=="function")||typeof m.UNSAFE_componentWillReceiveProps!="function"&&typeof m.componentWillReceiveProps!="function"||(C!==se||te!==T)&&Ks(r,m,o,T),Kt=!1,te=r.memoizedState,m.state=te,Xn(r,o,m,d);var ye=r.memoizedState;C!==se||te!==ye||qe.current||Kt?(typeof Ce=="function"&&(da(r,i,Ce,o),ye=r.memoizedState),(F=Kt||js(r,i,F,o,te,ye,T)||!1)?(K||typeof m.UNSAFE_componentWillUpdate!="function"&&typeof m.componentWillUpdate!="function"||(typeof m.componentWillUpdate=="function"&&m.componentWillUpdate(o,ye,T),typeof m.UNSAFE_componentWillUpdate=="function"&&m.UNSAFE_componentWillUpdate(o,ye,T)),typeof m.componentDidUpdate=="function"&&(r.flags|=4),typeof m.getSnapshotBeforeUpdate=="function"&&(r.flags|=1024)):(typeof m.componentDidUpdate!="function"||C===t.memoizedProps&&te===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||C===t.memoizedProps&&te===t.memoizedState||(r.flags|=1024),r.memoizedProps=o,r.memoizedState=ye),m.props=o,m.state=ye,m.context=T,o=F):(typeof m.componentDidUpdate!="function"||C===t.memoizedProps&&te===t.memoizedState||(r.flags|=4),typeof m.getSnapshotBeforeUpdate!="function"||C===t.memoizedProps&&te===t.memoizedState||(r.flags|=1024),o=!1)}return Na(t,r,i,o,g,d)}function Na(t,r,i,o,d,g){zo(t,r);var m=(r.flags&128)!==0;if(!o&&!m)return d&&zs(r,i,!1),Bt(t,r,g);o=r.stateNode,Yu.current=r;var C=m&&typeof i.getDerivedStateFromError!="function"?null:o.render();return r.flags|=1,t!==null&&m?(r.child=Nr(r,t.child,null,g),r.child=Nr(r,null,C,g)):Ke(t,r,C,g),r.memoizedState=o.state,d&&zs(r,i,!0),r.child}function bo(t){var r=t.stateNode;r.pendingContext?Gs(t,r.pendingContext,r.pendingContext!==r.context):r.context&&Gs(t,r.context,!1),ya(t,r.containerInfo)}function Bo(t,r,i,o,d){return Ir(),ma(d),r.flags|=256,Ke(t,r,i,o),r.child}var ii={dehydrated:null,treeContext:null,retryLane:0};function ai(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ho(t,r){return{baseLanes:t.baseLanes|r,cachePool:null,transitions:t.transitions}}function Uo(t,r,i){var o=r.pendingProps,d=Pe.current,g=!1,m=(r.flags&128)!==0,C;if((C=m)||(C=t!==null&&t.memoizedState===null?!1:(d&2)!==0),C?(g=!0,r.flags&=-129):(t===null||t.memoizedState!==null)&&(d|=1),Se(Pe,d&1),t===null)return va(r),t=r.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?((r.mode&1)===0?r.lanes=1:Qi(t)?r.lanes=8:r.lanes=1073741824,null):(d=o.children,t=o.fallback,g?(o=r.mode,g=r.child,d={mode:"hidden",children:d},(o&1)===0&&g!==null?(g.childLanes=0,g.pendingProps=d):g=ki(d,o,0,null),t=yr(t,o,i,null),g.return=r,t.return=r,g.sibling=t,r.child=g,r.child.memoizedState=ai(i),r.memoizedState=ii,t):Oa(r,d));if(d=t.memoizedState,d!==null){if(C=d.dehydrated,C!==null){if(m)return r.flags&256?(r.flags&=-257,si(t,r,i,Error(u(422)))):r.memoizedState!==null?(r.child=t.child,r.flags|=128,null):(g=o.fallback,d=r.mode,o=ki({mode:"visible",children:o.children},d,0,null),g=yr(g,d,i,null),g.flags|=2,o.return=r,g.return=r,o.sibling=g,r.child=o,(r.mode&1)!==0&&Nr(r,t.child,null,i),r.child.memoizedState=ai(i),r.memoizedState=ii,g);if((r.mode&1)===0)r=si(t,r,i,null);else if(Qi(C))r=si(t,r,i,Error(u(419)));else if(o=(i&t.childLanes)!==0,Ze||o){if(o=Ge,o!==null){switch(i&-i){case 4:g=2;break;case 16:g=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:g=32;break;case 536870912:g=268435456;break;default:g=0}o=(g&(o.suspendedLanes|i))!==0?0:g,o!==0&&o!==d.retryLane&&(d.retryLane=o,st(t,o,-1))}es(),r=si(t,r,i,Error(u(421)))}else Os(C)?(r.flags|=128,r.child=t.child,r=rd.bind(null,t),iu(C,r),r=null):(i=d.treeContext,ht&&(it=ou(C),nt=r,xe=!0,wt=null,Zr=!1,i!==null&&(dt[ft++]=Ft,dt[ft++]=bt,dt[ft++]=dr,Ft=i.id,bt=i.overflow,dr=r)),r=Oa(r,r.pendingProps.children),r.flags|=4096);return r}return g?(o=Yo(t,r,o.children,o.fallback,i),g=r.child,d=t.child.memoizedState,g.memoizedState=d===null?ai(i):Ho(d,i),g.childLanes=t.childLanes&~i,r.memoizedState=ii,o):(i=Wo(t,r,o.children,i),r.memoizedState=null,i)}return g?(o=Yo(t,r,o.children,o.fallback,i),g=r.child,d=t.child.memoizedState,g.memoizedState=d===null?ai(i):Ho(d,i),g.childLanes=t.childLanes&~i,r.memoizedState=ii,o):(i=Wo(t,r,o.children,i),r.memoizedState=null,i)}function Oa(t,r){return r=ki({mode:"visible",children:r},t.mode,0,null),r.return=t,t.child=r}function Wo(t,r,i,o){var d=t.child;return t=d.sibling,i=tr(d,{mode:"visible",children:i}),(r.mode&1)===0&&(i.lanes=o),i.return=r,i.sibling=null,t!==null&&(o=r.deletions,o===null?(r.deletions=[t],r.flags|=16):o.push(t)),r.child=i}function Yo(t,r,i,o,d){var g=r.mode;t=t.child;var m=t.sibling,C={mode:"hidden",children:i};return(g&1)===0&&r.child!==t?(i=r.child,i.childLanes=0,i.pendingProps=C,r.deletions=null):(i=tr(t,C),i.subtreeFlags=t.subtreeFlags&14680064),m!==null?o=tr(m,o):(o=yr(o,g,d,null),o.flags|=2),o.return=r,i.return=r,i.sibling=o,r.child=i,o}function si(t,r,i,o){return o!==null&&ma(o),Nr(r,t.child,null,i),t=Oa(r,r.pendingProps.children),t.flags|=2,r.memoizedState=null,t}function Xo(t,r,i){t.lanes|=r;var o=t.alternate;o!==null&&(o.lanes|=r),ha(t.return,r,i)}function Ga(t,r,i,o,d){var g=t.memoizedState;g===null?t.memoizedState={isBackwards:r,rendering:null,renderingStartTime:0,last:o,tail:i,tailMode:d}:(g.isBackwards=r,g.rendering=null,g.renderingStartTime=0,g.last=o,g.tail=i,g.tailMode=d)}function Vo(t,r,i){var o=r.pendingProps,d=o.revealOrder,g=o.tail;if(Ke(t,r,o.children,i),o=Pe.current,(o&2)!==0)o=o&1|2,r.flags|=128;else{if(t!==null&&(t.flags&128)!==0)e:for(t=r.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Xo(t,i,r);else if(t.tag===19)Xo(t,i,r);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===r)break e;for(;t.sibling===null;){if(t.return===null||t.return===r)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}o&=1}if(Se(Pe,o),(r.mode&1)===0)r.memoizedState=null;else switch(d){case"forwards":for(i=r.child,d=null;i!==null;)t=i.alternate,t!==null&&qn(t)===null&&(d=i),i=i.sibling;i=d,i===null?(d=r.child,r.child=null):(d=i.sibling,i.sibling=null),Ga(r,!1,d,i,g);break;case"backwards":for(i=null,d=r.child,r.child=null;d!==null;){if(t=d.alternate,t!==null&&qn(t)===null){r.child=d;break}t=d.sibling,d.sibling=i,i=d,d=t}Ga(r,!0,i,null,g);break;case"together":Ga(r,!1,null,null,void 0);break;default:r.memoizedState=null}return r.child}function Bt(t,r,i){if(t!==null&&(r.dependencies=t.dependencies),gr|=r.lanes,(i&r.childLanes)===0)return null;if(t!==null&&r.child!==t.child)throw Error(u(153));if(r.child!==null){for(t=r.child,i=tr(t,t.pendingProps),r.child=i,i.return=r;t.sibling!==null;)t=t.sibling,i=i.sibling=tr(t,t.pendingProps),i.return=r;i.sibling=null}return r.child}function Xu(t,r,i){switch(r.tag){case 3:bo(r),Ir();break;case 5:no(r);break;case 1:Je(r.type)&&Gn(r);break;case 4:ya(r,r.stateNode.containerInfo);break;case 10:Us(r,r.type._context,r.memoizedProps.value);break;case 13:var o=r.memoizedState;if(o!==null)return o.dehydrated!==null?(Se(Pe,Pe.current&1),r.flags|=128,null):(i&r.child.childLanes)!==0?Uo(t,r,i):(Se(Pe,Pe.current&1),t=Bt(t,r,i),t!==null?t.sibling:null);Se(Pe,Pe.current&1);break;case 19:if(o=(i&r.childLanes)!==0,(t.flags&128)!==0){if(o)return Vo(t,r,i);r.flags|=128}var d=r.memoizedState;if(d!==null&&(d.rendering=null,d.tail=null,d.lastEffect=null),Se(Pe,Pe.current),o)break;return null;case 22:case 23:return r.lanes=0,Do(t,r,i)}return Bt(t,r,i)}function Vu(t,r){switch(ga(r),r.tag){case 1:return Je(r.type)&&On(),t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 3:return Gr(),we(qe),we(Ye),wa(),t=r.flags,(t&65536)!==0&&(t&128)===0?(r.flags=t&-65537|128,r):null;case 5:return _a(r),null;case 13:if(we(Pe),t=r.memoizedState,t!==null&&t.dehydrated!==null){if(r.alternate===null)throw Error(u(340));Ir()}return t=r.flags,t&65536?(r.flags=t&-65537|128,r):null;case 19:return we(Pe),null;case 4:return Gr(),null;case 10:return la(r.type._context),null;case 22:case 23:return $a(),null;case 24:return null;default:return null}}var oi=!1,je=!1,ju=typeof WeakSet=="function"?WeakSet:Set,X=null;function Dr(t,r){var i=t.ref;if(i!==null)if(typeof i=="function")try{i(null)}catch(o){ke(t,r,o)}else i.current=null}function Da(t,r,i){try{i()}catch(o){ke(t,r,o)}}var jo=!1;function Qu(t,r){for($(t.containerInfo),X=r;X!==null;)if(t=X,r=t.child,(t.subtreeFlags&1028)!==0&&r!==null)r.return=t,X=r;else for(;X!==null;){t=X;try{var i=t.alternate;if((t.flags&1024)!==0)switch(t.tag){case 0:case 11:case 15:break;case 1:if(i!==null){var o=i.memoizedProps,d=i.memoizedState,g=t.stateNode,m=g.getSnapshotBeforeUpdate(t.elementType===t.type?o:_t(t.type,o),d);g.__reactInternalSnapshotBeforeUpdate=m}break;case 3:rt&&Zh(t.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(u(163))}}catch(C){ke(t,t.return,C)}if(r=t.sibling,r!==null){r.return=t.return,X=r;break}X=t.return}return i=jo,jo=!1,i}function dn(t,r,i){var o=r.updateQueue;if(o=o!==null?o.lastEffect:null,o!==null){var d=o=o.next;do{if((d.tag&t)===t){var g=d.destroy;d.destroy=void 0,g!==void 0&&Da(r,i,g)}d=d.next}while(d!==o)}}function li(t,r){if(r=r.updateQueue,r=r!==null?r.lastEffect:null,r!==null){var i=r=r.next;do{if((i.tag&t)===t){var o=i.create;i.destroy=o()}i=i.next}while(i!==r)}}function za(t){var r=t.ref;if(r!==null){var i=t.stateNode;switch(t.tag){case 5:t=ae(i);break;default:t=i}typeof r=="function"?r(t):r.current=t}}function Qo(t){var r=t.alternate;r!==null&&(t.alternate=null,Qo(r)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(r=t.stateNode,r!==null&&Mh(r)),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Ko(t){return t.tag===5||t.tag===3||t.tag===4}function qo(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Ko(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Fa(t,r,i){var o=t.tag;if(o===5||o===6)t=t.stateNode,r?Xh(i,t,r):Bh(i,t);else if(o!==4&&(t=t.child,t!==null))for(Fa(t,r,i),t=t.sibling;t!==null;)Fa(t,r,i),t=t.sibling}function ba(t,r,i){var o=t.tag;if(o===5||o===6)t=t.stateNode,r?Yh(i,t,r):bh(i,t);else if(o!==4&&(t=t.child,t!==null))for(ba(t,r,i),t=t.sibling;t!==null;)ba(t,r,i),t=t.sibling}var He=null,Ct=!1;function Nt(t,r,i){for(i=i.child;i!==null;)Ba(t,r,i),i=i.sibling}function Ba(t,r,i){if(Rt&&typeof Rt.onCommitFiberUnmount=="function")try{Rt.onCommitFiberUnmount(bn,i)}catch{}switch(i.tag){case 5:je||Dr(i,r);case 6:if(rt){var o=He,d=Ct;He=null,Nt(t,r,i),He=o,Ct=d,He!==null&&(Ct?jh(He,i.stateNode):Vh(He,i.stateNode))}else Nt(t,r,i);break;case 18:rt&&He!==null&&(Ct?pu(He,i.stateNode):gu(He,i.stateNode));break;case 4:rt?(o=He,d=Ct,He=i.stateNode.containerInfo,Ct=!0,Nt(t,r,i),He=o,Ct=d):(Nn&&(o=i.stateNode.containerInfo,d=Ms(o),ji(o,d)),Nt(t,r,i));break;case 0:case 11:case 14:case 15:if(!je&&(o=i.updateQueue,o!==null&&(o=o.lastEffect,o!==null))){d=o=o.next;do{var g=d,m=g.destroy;g=g.tag,m!==void 0&&((g&2)!==0||(g&4)!==0)&&Da(i,r,m),d=d.next}while(d!==o)}Nt(t,r,i);break;case 1:if(!je&&(Dr(i,r),o=i.stateNode,typeof o.componentWillUnmount=="function"))try{o.props=i.memoizedProps,o.state=i.memoizedState,o.componentWillUnmount()}catch(C){ke(i,r,C)}Nt(t,r,i);break;case 21:Nt(t,r,i);break;case 22:i.mode&1?(je=(o=je)||i.memoizedState!==null,Nt(t,r,i),je=o):Nt(t,r,i);break;default:Nt(t,r,i)}}function Jo(t){var r=t.updateQueue;if(r!==null){t.updateQueue=null;var i=t.stateNode;i===null&&(i=t.stateNode=new ju),r.forEach(function(o){var d=nd.bind(null,t,o);i.has(o)||(i.add(o),o.then(d,d))})}}function xt(t,r){var i=r.deletions;if(i!==null)for(var o=0;o<i.length;o++){var d=i[o];try{var g=t,m=r;if(rt){var C=m;e:for(;C!==null;){switch(C.tag){case 5:He=C.stateNode,Ct=!1;break e;case 3:He=C.stateNode.containerInfo,Ct=!0;break e;case 4:He=C.stateNode.containerInfo,Ct=!0;break e}C=C.return}if(He===null)throw Error(u(160));Ba(g,m,d),He=null,Ct=!1}else Ba(g,m,d);var T=d.alternate;T!==null&&(T.return=null),d.return=null}catch(F){ke(d,r,F)}}if(r.subtreeFlags&12854)for(r=r.child;r!==null;)Zo(r,t),r=r.sibling}function Zo(t,r){var i=t.alternate,o=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(xt(r,t),Ot(t),o&4){try{dn(3,t,t.return),li(3,t)}catch(T){ke(t,t.return,T)}try{dn(5,t,t.return)}catch(T){ke(t,t.return,T)}}break;case 1:xt(r,t),Ot(t),o&512&&i!==null&&Dr(i,i.return);break;case 5:if(xt(r,t),Ot(t),o&512&&i!==null&&Dr(i,i.return),rt){if(t.flags&32){var d=t.stateNode;try{As(d)}catch(T){ke(t,t.return,T)}}if(o&4&&(d=t.stateNode,d!=null)){var g=t.memoizedProps;if(i=i!==null?i.memoizedProps:g,o=t.type,r=t.updateQueue,t.updateQueue=null,r!==null)try{Wh(d,r,o,i,g,t)}catch(T){ke(t,t.return,T)}}}break;case 6:if(xt(r,t),Ot(t),o&4&&rt){if(t.stateNode===null)throw Error(u(162));d=t.stateNode,g=t.memoizedProps,i=i!==null?i.memoizedProps:g;try{Hh(d,i,g)}catch(T){ke(t,t.return,T)}}break;case 3:if(xt(r,t),Ot(t),o&4){if(rt&&ht&&i!==null&&i.memoizedState.isDehydrated)try{fu(r.containerInfo)}catch(T){ke(t,t.return,T)}if(Nn){i=r.containerInfo,d=r.pendingChildren;try{ji(i,d)}catch(T){ke(t,t.return,T)}}}break;case 4:if(xt(r,t),Ot(t),o&4&&Nn){d=t.stateNode,i=d.containerInfo,d=d.pendingChildren;try{ji(i,d)}catch(T){ke(t,t.return,T)}}break;case 13:xt(r,t),Ot(t),i=t.child,i.flags&8192&&i.memoizedState!==null&&(i.alternate===null||i.alternate.memoizedState===null)&&(ja=Fe()),o&4&&Jo(t);break;case 22:if(i=i!==null&&i.memoizedState!==null,t.mode&1){var m=je;je=m||i,xt(r,t),je=m}else xt(r,t);if(Ot(t),o&8192){if(o=t.memoizedState!==null,rt){e:if(r=null,rt)for(m=t;;){if(m.tag===5){if(r===null){r=m;try{d=m.stateNode,o?Qh(d):qh(m.stateNode,m.memoizedProps)}catch(T){ke(t,t.return,T)}}}else if(m.tag===6){if(r===null)try{g=m.stateNode,o?Kh(g):Jh(g,m.memoizedProps)}catch(T){ke(t,t.return,T)}}else if((m.tag!==22&&m.tag!==23||m.memoizedState===null||m===t)&&m.child!==null){m.child.return=m,m=m.child;continue}if(m===t)break e;for(;m.sibling===null;){if(m.return===null||m.return===t)break e;r===m&&(r=null),m=m.return}r===m&&(r=null),m.sibling.return=m.return,m=m.sibling}}if(o&&!i&&(t.mode&1)!==0)for(X=t,t=t.child;t!==null;){for(i=X=t;X!==null;){switch(d=X,g=d.child,d.tag){case 0:case 11:case 14:case 15:dn(4,d,d.return);break;case 1:Dr(d,d.return);var C=d.stateNode;if(typeof C.componentWillUnmount=="function"){o=d,r=d.return;try{m=o,C.props=m.memoizedProps,C.state=m.memoizedState,C.componentWillUnmount()}catch(T){ke(o,r,T)}}break;case 5:Dr(d,d.return);break;case 22:if(d.memoizedState!==null){tl(i);continue}}g!==null?(g.return=d,X=g):tl(i)}t=t.sibling}}break;case 19:xt(r,t),Ot(t),o&4&&Jo(t);break;case 21:break;default:xt(r,t),Ot(t)}}function Ot(t){var r=t.flags;if(r&2){try{if(rt){e:{for(var i=t.return;i!==null;){if(Ko(i)){var o=i;break e}i=i.return}throw Error(u(160))}switch(o.tag){case 5:var d=o.stateNode;o.flags&32&&(As(d),o.flags&=-33);var g=qo(t);ba(t,g,d);break;case 3:case 4:var m=o.stateNode.containerInfo,C=qo(t);Fa(t,C,m);break;default:throw Error(u(161))}}}catch(T){ke(t,t.return,T)}t.flags&=-3}r&4096&&(t.flags&=-4097)}function Ku(t,r,i){X=t,$o(t)}function $o(t,r,i){for(var o=(t.mode&1)!==0;X!==null;){var d=X,g=d.child;if(d.tag===22&&o){var m=d.memoizedState!==null||oi;if(!m){var C=d.alternate,T=C!==null&&C.memoizedState!==null||je;C=oi;var F=je;if(oi=m,(je=T)&&!F)for(X=d;X!==null;)m=X,T=m.child,m.tag===22&&m.memoizedState!==null?rl(d):T!==null?(T.return=m,X=T):rl(d);for(;g!==null;)X=g,$o(g),g=g.sibling;X=d,oi=C,je=F}el(t)}else(d.subtreeFlags&8772)!==0&&g!==null?(g.return=d,X=g):el(t)}}function el(t){for(;X!==null;){var r=X;if((r.flags&8772)!==0){var i=r.alternate;try{if((r.flags&8772)!==0)switch(r.tag){case 0:case 11:case 15:je||li(5,r);break;case 1:var o=r.stateNode;if(r.flags&4&&!je)if(i===null)o.componentDidMount();else{var d=r.elementType===r.type?i.memoizedProps:_t(r.type,i.memoizedProps);o.componentDidUpdate(d,i.memoizedState,o.__reactInternalSnapshotBeforeUpdate)}var g=r.updateQueue;g!==null&&Xs(r,g,o);break;case 3:var m=r.updateQueue;if(m!==null){if(i=null,r.child!==null)switch(r.child.tag){case 5:i=ae(r.child.stateNode);break;case 1:i=r.child.stateNode}Xs(r,m,i)}break;case 5:var C=r.stateNode;i===null&&r.flags&4&&Uh(C,r.type,r.memoizedProps,r);break;case 6:break;case 4:break;case 12:break;case 13:if(ht&&r.memoizedState===null){var T=r.alternate;if(T!==null){var F=T.memoizedState;if(F!==null){var K=F.dehydrated;K!==null&&cu(K)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(u(163))}je||r.flags&512&&za(r)}catch(se){ke(r,r.return,se)}}if(r===t){X=null;break}if(i=r.sibling,i!==null){i.return=r.return,X=i;break}X=r.return}}function tl(t){for(;X!==null;){var r=X;if(r===t){X=null;break}var i=r.sibling;if(i!==null){i.return=r.return,X=i;break}X=r.return}}function rl(t){for(;X!==null;){var r=X;try{switch(r.tag){case 0:case 11:case 15:var i=r.return;try{li(4,r)}catch(T){ke(r,i,T)}break;case 1:var o=r.stateNode;if(typeof o.componentDidMount=="function"){var d=r.return;try{o.componentDidMount()}catch(T){ke(r,d,T)}}var g=r.return;try{za(r)}catch(T){ke(r,g,T)}break;case 5:var m=r.return;try{za(r)}catch(T){ke(r,m,T)}}}catch(T){ke(r,r.return,T)}if(r===t){X=null;break}var C=r.sibling;if(C!==null){C.return=r.return,X=C;break}X=r.return}}var hi=0,ui=1,di=2,fi=3,ci=4;if(typeof Symbol=="function"&&Symbol.for){var fn=Symbol.for;hi=fn("selector.component"),ui=fn("selector.has_pseudo_class"),di=fn("selector.role"),fi=fn("selector.test_id"),ci=fn("selector.text")}function Ha(t){var r=Th(t);if(r!=null){if(typeof r.memoizedProps["data-testname"]!="string")throw Error(u(364));return r}if(t=Nh(t),t===null)throw Error(u(362));return t.stateNode.current}function Ua(t,r){switch(r.$$typeof){case hi:if(t.type===r.value)return!0;break;case ui:e:{r=r.value,t=[t,0];for(var i=0;i<t.length;){var o=t[i++],d=t[i++],g=r[d];if(o.tag!==5||!jr(o)){for(;g!=null&&Ua(o,g);)d++,g=r[d];if(d===r.length){r=!0;break e}else for(o=o.child;o!==null;)t.push(o,d),o=o.sibling}}r=!1}return r;case di:if(t.tag===5&&Dh(t.stateNode,r.value))return!0;break;case ci:if((t.tag===5||t.tag===6)&&(t=Gh(t),t!==null&&0<=t.indexOf(r.value)))return!0;break;case fi:if(t.tag===5&&(t=t.memoizedProps["data-testname"],typeof t=="string"&&t.toLowerCase()===r.value.toLowerCase()))return!0;break;default:throw Error(u(365))}return!1}function Wa(t){switch(t.$$typeof){case hi:return"<"+(j(t.value)||"Unknown")+">";case ui:return":has("+(Wa(t)||"")+")";case di:return'[role="'+t.value+'"]';case ci:return'"'+t.value+'"';case fi:return'[data-testname="'+t.value+'"]';default:throw Error(u(365))}}function nl(t,r){var i=[];t=[t,0];for(var o=0;o<t.length;){var d=t[o++],g=t[o++],m=r[g];if(d.tag!==5||!jr(d)){for(;m!=null&&Ua(d,m);)g++,m=r[g];if(g===r.length)i.push(d);else for(d=d.child;d!==null;)t.push(d,g),d=d.sibling}}return i}function Ya(t,r){if(!Vr)throw Error(u(363));t=Ha(t),t=nl(t,r),r=[],t=Array.from(t);for(var i=0;i<t.length;){var o=t[i++];if(o.tag===5)jr(o)||r.push(o.stateNode);else for(o=o.child;o!==null;)t.push(o),o=o.sibling}return r}var qu=Math.ceil,gi=f.ReactCurrentDispatcher,Xa=f.ReactCurrentOwner,Me=f.ReactCurrentBatchConfig,le=0,Ge=null,Ie=null,Ue=0,at=0,zr=jt(0),De=0,cn=null,gr=0,pi=0,Va=0,gn=null,$e=null,ja=0,Qa=1/0,Ht=null;function Fr(){Qa=Fe()+500}var vi=!1,Ka=null,Jt=null,mi=!1,Zt=null,yi=0,pn=0,qa=null,_i=-1,Si=0;function Qe(){return(le&6)!==0?Fe():_i!==-1?_i:_i=Fe()}function $t(t){return(t.mode&1)===0?1:(le&2)!==0&&Ue!==0?Ue&-Ue:Nu.transition!==null?(Si===0&&(Si=Fs()),Si):(t=ue,t!==0?t:Ah())}function st(t,r,i){if(50<pn)throw pn=0,qa=null,Error(u(185));var o=wi(t,r);return o===null?null:(Jr(o,r,i),((le&2)===0||o!==Ge)&&(o===Ge&&((le&2)===0&&(pi|=r),De===4&&er(o,Ue)),et(o,i),r===1&&le===0&&(t.mode&1)===0&&(Fr(),Bn&&At())),o)}function wi(t,r){t.lanes|=r;var i=t.alternate;for(i!==null&&(i.lanes|=r),i=t,t=t.return;t!==null;)t.childLanes|=r,i=t.alternate,i!==null&&(i.childLanes|=r),i=t,t=t.return;return i.tag===3?i.stateNode:null}function il(t){return(Ge!==null||St!==null)&&(t.mode&1)!==0&&(le&2)===0}function et(t,r){var i=t.callbackNode;ku(t,r);var o=Fn(t,t===Ge?Ue:0);if(o===0)i!==null&&Bs(i),t.callbackNode=null,t.callbackPriority=0;else if(r=o&-o,t.callbackPriority!==r){if(i!=null&&Bs(i),r===1)t.tag===0?Iu(sl.bind(null,t)):Hs(sl.bind(null,t)),Lh?Ih(function(){le===0&&At()}):ra(na,At),i=null;else{switch(bs(o)){case 1:i=na;break;case 4:i=Ru;break;case 16:i=ia;break;case 536870912:i=Au;break;default:i=ia}i=pl(i,al.bind(null,t))}t.callbackPriority=r,t.callbackNode=i}}function al(t,r){if(_i=-1,Si=0,(le&6)!==0)throw Error(u(327));var i=t.callbackNode;if(mr()&&t.callbackNode!==i)return null;var o=Fn(t,t===Ge?Ue:0);if(o===0)return null;if((o&30)!==0||(o&t.expiredLanes)!==0||r)r=Ci(t,o);else{r=o;var d=le;le|=2;var g=hl();(Ge!==t||Ue!==r)&&(Ht=null,Fr(),pr(t,r));do try{$u();break}catch(C){ll(t,C)}while(1);oa(),gi.current=g,le=d,Ie!==null?r=0:(Ge=null,Ue=0,r=De)}if(r!==0){if(r===2&&(d=$i(t),d!==0&&(o=d,r=Ja(t,d))),r===1)throw i=cn,pr(t,0),er(t,o),et(t,Fe()),i;if(r===6)er(t,o);else{if(d=t.current.alternate,(o&30)===0&&!Ju(d)&&(r=Ci(t,o),r===2&&(g=$i(t),g!==0&&(o=g,r=Ja(t,g))),r===1))throw i=cn,pr(t,0),er(t,o),et(t,Fe()),i;switch(t.finishedWork=d,t.finishedLanes=o,r){case 0:case 1:throw Error(u(345));case 2:vr(t,$e,Ht);break;case 3:if(er(t,o),(o&130023424)===o&&(r=ja+500-Fe(),10<r)){if(Fn(t,0)!==0)break;if(d=t.suspendedLanes,(d&o)!==o){Qe(),t.pingedLanes|=t.suspendedLanes&d;break}t.timeoutHandle=hr(vr.bind(null,t,$e,Ht),r);break}vr(t,$e,Ht);break;case 4:if(er(t,o),(o&4194240)===o)break;for(r=t.eventTimes,d=-1;0<o;){var m=31-mt(o);g=1<<m,m=r[m],m>d&&(d=m),o&=~g}if(o=d,o=Fe()-o,o=(120>o?120:480>o?480:1080>o?1080:1920>o?1920:3e3>o?3e3:4320>o?4320:1960*qu(o/1960))-o,10<o){t.timeoutHandle=hr(vr.bind(null,t,$e,Ht),o);break}vr(t,$e,Ht);break;case 5:vr(t,$e,Ht);break;default:throw Error(u(329))}}}return et(t,Fe()),t.callbackNode===i?al.bind(null,t):null}function Ja(t,r){var i=gn;return t.current.memoizedState.isDehydrated&&(pr(t,r).flags|=256),t=Ci(t,r),t!==2&&(r=$e,$e=i,r!==null&&Za(r)),t}function Za(t){$e===null?$e=t:$e.push.apply($e,t)}function Ju(t){for(var r=t;;){if(r.flags&16384){var i=r.updateQueue;if(i!==null&&(i=i.stores,i!==null))for(var o=0;o<i.length;o++){var d=i[o],g=d.getSnapshot;d=d.value;try{if(!yt(g(),d))return!1}catch{return!1}}}if(i=r.child,r.subtreeFlags&16384&&i!==null)i.return=r,r=i;else{if(r===t)break;for(;r.sibling===null;){if(r.return===null||r.return===t)return!0;r=r.return}r.sibling.return=r.return,r=r.sibling}}return!0}function er(t,r){for(r&=~Va,r&=~pi,t.suspendedLanes|=r,t.pingedLanes&=~r,t=t.expirationTimes;0<r;){var i=31-mt(r),o=1<<i;t[i]=-1,r&=~o}}function sl(t){if((le&6)!==0)throw Error(u(327));mr();var r=Fn(t,0);if((r&1)===0)return et(t,Fe()),null;var i=Ci(t,r);if(t.tag!==0&&i===2){var o=$i(t);o!==0&&(r=o,i=Ja(t,o))}if(i===1)throw i=cn,pr(t,0),er(t,r),et(t,Fe()),i;if(i===6)throw Error(u(345));return t.finishedWork=t.current.alternate,t.finishedLanes=r,vr(t,$e,Ht),et(t,Fe()),null}function ol(t){Zt!==null&&Zt.tag===0&&(le&6)===0&&mr();var r=le;le|=1;var i=Me.transition,o=ue;try{if(Me.transition=null,ue=1,t)return t()}finally{ue=o,Me.transition=i,le=r,(le&6)===0&&At()}}function $a(){at=zr.current,we(zr)}function pr(t,r){t.finishedWork=null,t.finishedLanes=0;var i=t.timeoutHandle;if(i!==Vi&&(t.timeoutHandle=Vi,Eh(i)),Ie!==null)for(i=Ie.return;i!==null;){var o=i;switch(ga(o),o.tag){case 1:o=o.type.childContextTypes,o!=null&&On();break;case 3:Gr(),we(qe),we(Ye),wa();break;case 5:_a(o);break;case 4:Gr();break;case 13:we(Pe);break;case 19:we(Pe);break;case 10:la(o.type._context);break;case 22:case 23:$a()}i=i.return}if(Ge=t,Ie=t=tr(t.current,null),Ue=at=r,De=0,cn=null,Va=pi=gr=0,$e=gn=null,St!==null){for(r=0;r<St.length;r++)if(i=St[r],o=i.interleaved,o!==null){i.interleaved=null;var d=o.next,g=i.pending;if(g!==null){var m=g.next;g.next=d,o.next=m}i.pending=o}St=null}return t}function ll(t,r){do{var i=Ie;try{if(oa(),Jn.current=ti,Zn){for(var o=Ee.memoizedState;o!==null;){var d=o.queue;d!==null&&(d.pending=null),o=o.next}Zn=!1}if(cr=0,be=Oe=Ee=null,nn=!1,an=0,Xa.current=null,i===null||i.return===null){De=1,cn=r,Ie=null;break}e:{var g=t,m=i.return,C=i,T=r;if(r=Ue,C.flags|=32768,T!==null&&typeof T=="object"&&typeof T.then=="function"){var F=T,K=C,se=K.tag;if((K.mode&1)===0&&(se===0||se===11||se===15)){var te=K.alternate;te?(K.updateQueue=te.updateQueue,K.memoizedState=te.memoizedState,K.lanes=te.lanes):(K.updateQueue=null,K.memoizedState=null)}var Ce=Ao(m);if(Ce!==null){Ce.flags&=-257,Mo(Ce,m,C,g,r),Ce.mode&1&&Ro(g,F,r),r=Ce,T=F;var ye=r.updateQueue;if(ye===null){var tt=new Set;tt.add(T),r.updateQueue=tt}else ye.add(T);break e}else{if((r&1)===0){Ro(g,F,r),es();break e}T=Error(u(426))}}else if(xe&&C.mode&1){var Ut=Ao(m);if(Ut!==null){(Ut.flags&65536)===0&&(Ut.flags|=256),Mo(Ut,m,C,g,r),ma(T);break e}}g=T,De!==4&&(De=2),gn===null?gn=[g]:gn.push(g),T=Ma(T,C),C=m;do{switch(C.tag){case 3:C.flags|=65536,r&=-r,C.lanes|=r;var R=Eo(C,T,r);Ys(C,R);break e;case 1:g=T;var k=C.type,M=C.stateNode;if((C.flags&128)===0&&(typeof k.getDerivedStateFromError=="function"||M!==null&&typeof M.componentDidCatch=="function"&&(Jt===null||!Jt.has(M)))){C.flags|=65536,r&=-r,C.lanes|=r;var W=To(C,g,r);Ys(C,W);break e}}C=C.return}while(C!==null)}dl(i)}catch(ee){r=ee,Ie===i&&i!==null&&(Ie=i=i.return);continue}break}while(1)}function hl(){var t=gi.current;return gi.current=ti,t===null?ti:t}function es(){(De===0||De===3||De===2)&&(De=4),Ge===null||(gr&268435455)===0&&(pi&268435455)===0||er(Ge,Ue)}function Ci(t,r){var i=le;le|=2;var o=hl();(Ge!==t||Ue!==r)&&(Ht=null,pr(t,r));do try{Zu();break}catch(d){ll(t,d)}while(1);if(oa(),le=i,gi.current=o,Ie!==null)throw Error(u(261));return Ge=null,Ue=0,De}function Zu(){for(;Ie!==null;)ul(Ie)}function $u(){for(;Ie!==null&&!Eu();)ul(Ie)}function ul(t){var r=gl(t.alternate,t,at);t.memoizedProps=t.pendingProps,r===null?dl(t):Ie=r,Xa.current=null}function dl(t){var r=t;do{var i=r.alternate;if(t=r.return,(r.flags&32768)===0){if(i=Wu(i,r,at),i!==null){Ie=i;return}}else{if(i=Vu(i,r),i!==null){i.flags&=32767,Ie=i;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{De=6,Ie=null;return}}if(r=r.sibling,r!==null){Ie=r;return}Ie=r=t}while(r!==null);De===0&&(De=5)}function vr(t,r,i){var o=ue,d=Me.transition;try{Me.transition=null,ue=1,ed(t,r,i,o)}finally{Me.transition=d,ue=o}return null}function ed(t,r,i,o){do mr();while(Zt!==null);if((le&6)!==0)throw Error(u(327));i=t.finishedWork;var d=t.finishedLanes;if(i===null)return null;if(t.finishedWork=null,t.finishedLanes=0,i===t.current)throw Error(u(177));t.callbackNode=null,t.callbackPriority=0;var g=i.lanes|i.childLanes;if(Pu(t,g),t===Ge&&(Ie=Ge=null,Ue=0),(i.subtreeFlags&2064)===0&&(i.flags&2064)===0||mi||(mi=!0,pl(ia,function(){return mr(),null})),g=(i.flags&15990)!==0,(i.subtreeFlags&15990)!==0||g){g=Me.transition,Me.transition=null;var m=ue;ue=1;var C=le;le|=4,Xa.current=null,Qu(t,i),Zo(i,t),H(t.containerInfo),t.current=i,Ku(i),Tu(),le=C,ue=m,Me.transition=g}else t.current=i;if(mi&&(mi=!1,Zt=t,yi=d),g=t.pendingLanes,g===0&&(Jt=null),Mu(i.stateNode),et(t,Fe()),r!==null)for(o=t.onRecoverableError,i=0;i<r.length;i++)o(r[i]);if(vi)throw vi=!1,t=Ka,Ka=null,t;return(yi&1)!==0&&t.tag!==0&&mr(),g=t.pendingLanes,(g&1)!==0?t===qa?pn++:(pn=0,qa=t):pn=0,At(),null}function mr(){if(Zt!==null){var t=bs(yi),r=Me.transition,i=ue;try{if(Me.transition=null,ue=16>t?16:t,Zt===null)var o=!1;else{if(t=Zt,Zt=null,yi=0,(le&6)!==0)throw Error(u(331));var d=le;for(le|=4,X=t.current;X!==null;){var g=X,m=g.child;if((X.flags&16)!==0){var C=g.deletions;if(C!==null){for(var T=0;T<C.length;T++){var F=C[T];for(X=F;X!==null;){var K=X;switch(K.tag){case 0:case 11:case 15:dn(8,K,g)}var se=K.child;if(se!==null)se.return=K,X=se;else for(;X!==null;){K=X;var te=K.sibling,Ce=K.return;if(Qo(K),K===F){X=null;break}if(te!==null){te.return=Ce,X=te;break}X=Ce}}}var ye=g.alternate;if(ye!==null){var tt=ye.child;if(tt!==null){ye.child=null;do{var Ut=tt.sibling;tt.sibling=null,tt=Ut}while(tt!==null)}}X=g}}if((g.subtreeFlags&2064)!==0&&m!==null)m.return=g,X=m;else e:for(;X!==null;){if(g=X,(g.flags&2048)!==0)switch(g.tag){case 0:case 11:case 15:dn(9,g,g.return)}var R=g.sibling;if(R!==null){R.return=g.return,X=R;break e}X=g.return}}var k=t.current;for(X=k;X!==null;){m=X;var M=m.child;if((m.subtreeFlags&2064)!==0&&M!==null)M.return=m,X=M;else e:for(m=k;X!==null;){if(C=X,(C.flags&2048)!==0)try{switch(C.tag){case 0:case 11:case 15:li(9,C)}}catch(ee){ke(C,C.return,ee)}if(C===m){X=null;break e}var W=C.sibling;if(W!==null){W.return=C.return,X=W;break e}X=C.return}}if(le=d,At(),Rt&&typeof Rt.onPostCommitFiberRoot=="function")try{Rt.onPostCommitFiberRoot(bn,t)}catch{}o=!0}return o}finally{ue=i,Me.transition=r}}return!1}function fl(t,r,i){r=Ma(i,r),r=Eo(t,r,1),qt(t,r),r=Qe(),t=wi(t,1),t!==null&&(Jr(t,1,r),et(t,r))}function ke(t,r,i){if(t.tag===3)fl(t,t,i);else for(;r!==null;){if(r.tag===3){fl(r,t,i);break}else if(r.tag===1){var o=r.stateNode;if(typeof r.type.getDerivedStateFromError=="function"||typeof o.componentDidCatch=="function"&&(Jt===null||!Jt.has(o))){t=Ma(i,t),t=To(r,t,1),qt(r,t),t=Qe(),r=wi(r,1),r!==null&&(Jr(r,1,t),et(r,t));break}}r=r.return}}function td(t,r,i){var o=t.pingCache;o!==null&&o.delete(r),r=Qe(),t.pingedLanes|=t.suspendedLanes&i,Ge===t&&(Ue&i)===i&&(De===4||De===3&&(Ue&130023424)===Ue&&500>Fe()-ja?pr(t,0):Va|=i),et(t,r)}function cl(t,r){r===0&&((t.mode&1)===0?r=1:(r=zn,zn<<=1,(zn&130023424)===0&&(zn=4194304)));var i=Qe();t=wi(t,r),t!==null&&(Jr(t,r,i),et(t,i))}function rd(t){var r=t.memoizedState,i=0;r!==null&&(i=r.retryLane),cl(t,i)}function nd(t,r){var i=0;switch(t.tag){case 13:var o=t.stateNode,d=t.memoizedState;d!==null&&(i=d.retryLane);break;case 19:o=t.stateNode;break;default:throw Error(u(314))}o!==null&&o.delete(r),cl(t,i)}var gl;gl=function(t,r,i){if(t!==null)if(t.memoizedProps!==r.pendingProps||qe.current)Ze=!0;else{if((t.lanes&i)===0&&(r.flags&128)===0)return Ze=!1,Xu(t,r,i);Ze=(t.flags&131072)!==0}else Ze=!1,xe&&(r.flags&1048576)!==0&&qs(r,Qn,r.index);switch(r.lanes=0,r.tag){case 2:var o=r.type;t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2),t=r.pendingProps;var d=Tr(r,Ye.current);Ar(r,i),d=ka(null,r,o,t,d,i);var g=Pa();return r.flags|=1,typeof d=="object"&&d!==null&&typeof d.render=="function"&&d.$$typeof===void 0?(r.tag=1,r.memoizedState=null,r.updateQueue=null,Je(o)?(g=!0,Gn(r)):g=!1,r.memoizedState=d.state!==null&&d.state!==void 0?d.state:null,ua(r),d.updater=Vn,r.stateNode=d,d._reactInternals=r,fa(r,o,t,i),r=Na(null,r,o,!0,g,i)):(r.tag=0,xe&&g&&ca(r),Ke(null,r,d,i),r=r.child),r;case 16:o=r.elementType;e:{switch(t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2),t=r.pendingProps,d=o._init,o=d(o._payload),r.type=o,d=r.tag=ad(o),t=_t(o,t),d){case 0:r=Ia(null,r,o,t,i);break e;case 1:r=Fo(null,r,o,t,i);break e;case 11:r=No(null,r,o,t,i);break e;case 14:r=Oo(null,r,o,_t(o.type,t),i);break e}throw Error(u(306,o,""))}return r;case 0:return o=r.type,d=r.pendingProps,d=r.elementType===o?d:_t(o,d),Ia(t,r,o,d,i);case 1:return o=r.type,d=r.pendingProps,d=r.elementType===o?d:_t(o,d),Fo(t,r,o,d,i);case 3:e:{if(bo(r),t===null)throw Error(u(387));o=r.pendingProps,g=r.memoizedState,d=g.element,Ws(t,r),Xn(r,o,null,i);var m=r.memoizedState;if(o=m.element,ht&&g.isDehydrated)if(g={element:o,isDehydrated:!1,cache:m.cache,pendingSuspenseBoundaries:m.pendingSuspenseBoundaries,transitions:m.transitions},r.updateQueue.baseState=g,r.memoizedState=g,r.flags&256){d=Error(u(423)),r=Bo(t,r,o,i,d);break e}else if(o!==d){d=Error(u(424)),r=Bo(t,r,o,i,d);break e}else for(ht&&(it=su(r.stateNode.containerInfo),nt=r,xe=!0,wt=null,Zr=!1),i=ro(r,null,o,i),r.child=i;i;)i.flags=i.flags&-3|4096,i=i.sibling;else{if(Ir(),o===d){r=Bt(t,r,i);break e}Ke(t,r,o,i)}r=r.child}return r;case 5:return no(r),t===null&&va(r),o=r.type,d=r.pendingProps,g=t!==null?t.memoizedProps:null,m=d.children,lr(o,d)?m=null:g!==null&&lr(o,g)&&(r.flags|=32),zo(t,r),Ke(t,r,m,i),r.child;case 6:return t===null&&va(r),null;case 13:return Uo(t,r,i);case 4:return ya(r,r.stateNode.containerInfo),o=r.pendingProps,t===null?r.child=Nr(r,null,o,i):Ke(t,r,o,i),r.child;case 11:return o=r.type,d=r.pendingProps,d=r.elementType===o?d:_t(o,d),No(t,r,o,d,i);case 7:return Ke(t,r,r.pendingProps,i),r.child;case 8:return Ke(t,r,r.pendingProps.children,i),r.child;case 12:return Ke(t,r,r.pendingProps.children,i),r.child;case 10:e:{if(o=r.type._context,d=r.pendingProps,g=r.memoizedProps,m=d.value,Us(r,o,m),g!==null)if(yt(g.value,m)){if(g.children===d.children&&!qe.current){r=Bt(t,r,i);break e}}else for(g=r.child,g!==null&&(g.return=r);g!==null;){var C=g.dependencies;if(C!==null){m=g.child;for(var T=C.firstContext;T!==null;){if(T.context===o){if(g.tag===1){T=zt(-1,i&-i),T.tag=2;var F=g.updateQueue;if(F!==null){F=F.shared;var K=F.pending;K===null?T.next=T:(T.next=K.next,K.next=T),F.pending=T}}g.lanes|=i,T=g.alternate,T!==null&&(T.lanes|=i),ha(g.return,i,r),C.lanes|=i;break}T=T.next}}else if(g.tag===10)m=g.type===r.type?null:g.child;else if(g.tag===18){if(m=g.return,m===null)throw Error(u(341));m.lanes|=i,C=m.alternate,C!==null&&(C.lanes|=i),ha(m,i,r),m=g.sibling}else m=g.child;if(m!==null)m.return=g;else for(m=g;m!==null;){if(m===r){m=null;break}if(g=m.sibling,g!==null){g.return=m.return,m=g;break}m=m.return}g=m}Ke(t,r,d.children,i),r=r.child}return r;case 9:return d=r.type,o=r.pendingProps.children,Ar(r,i),d=ut(d),o=o(d),r.flags|=1,Ke(t,r,o,i),r.child;case 14:return o=r.type,d=_t(o,r.pendingProps),d=_t(o.type,d),Oo(t,r,o,d,i);case 15:return Go(t,r,r.type,r.pendingProps,i);case 17:return o=r.type,d=r.pendingProps,d=r.elementType===o?d:_t(o,d),t!==null&&(t.alternate=null,r.alternate=null,r.flags|=2),r.tag=1,Je(o)?(t=!0,Gn(r)):t=!1,Ar(r,i),Qs(r,o,d),fa(r,o,d,i),Na(null,r,o,!0,t,i);case 19:return Vo(t,r,i);case 22:return Do(t,r,i)}throw Error(u(156,r.tag))};function pl(t,r){return ra(t,r)}function id(t,r,i,o){this.tag=t,this.key=i,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=r,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=o,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function pt(t,r,i,o){return new id(t,r,i,o)}function ts(t){return t=t.prototype,!(!t||!t.isReactComponent)}function ad(t){if(typeof t=="function")return ts(t)?1:0;if(t!=null){if(t=t.$$typeof,t===A)return 11;if(t===I)return 14}return 2}function tr(t,r){var i=t.alternate;return i===null?(i=pt(t.tag,r,t.key,t.mode),i.elementType=t.elementType,i.type=t.type,i.stateNode=t.stateNode,i.alternate=t,t.alternate=i):(i.pendingProps=r,i.type=t.type,i.flags=0,i.subtreeFlags=0,i.deletions=null),i.flags=t.flags&14680064,i.childLanes=t.childLanes,i.lanes=t.lanes,i.child=t.child,i.memoizedProps=t.memoizedProps,i.memoizedState=t.memoizedState,i.updateQueue=t.updateQueue,r=t.dependencies,i.dependencies=r===null?null:{lanes:r.lanes,firstContext:r.firstContext},i.sibling=t.sibling,i.index=t.index,i.ref=t.ref,i}function xi(t,r,i,o,d,g){var m=2;if(o=t,typeof t=="function")ts(t)&&(m=1);else if(typeof t=="string")m=5;else e:switch(t){case v:return yr(i.children,d,g,r);case S:m=8,d|=8;break;case y:return t=pt(12,i,r,d|2),t.elementType=y,t.lanes=g,t;case E:return t=pt(13,i,r,d),t.elementType=E,t.lanes=g,t;case O:return t=pt(19,i,r,d),t.elementType=O,t.lanes=g,t;case D:return ki(i,d,g,r);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case x:m=10;break e;case _:m=9;break e;case A:m=11;break e;case I:m=14;break e;case L:m=16,o=null;break e}throw Error(u(130,t==null?t:typeof t,""))}return r=pt(m,i,r,d),r.elementType=t,r.type=o,r.lanes=g,r}function yr(t,r,i,o){return t=pt(7,t,o,r),t.lanes=i,t}function ki(t,r,i,o){return t=pt(22,t,o,r),t.elementType=D,t.lanes=i,t.stateNode={},t}function rs(t,r,i){return t=pt(6,t,null,r),t.lanes=i,t}function ns(t,r,i){return r=pt(4,t.children!==null?t.children:[],t.key,r),r.lanes=i,r.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},r}function sd(t,r,i,o,d){this.tag=r,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Vi,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=ea(0),this.expirationTimes=ea(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=ea(0),this.identifierPrefix=o,this.onRecoverableError=d,ht&&(this.mutableSourceEagerHydrationData=null)}function vl(t,r,i,o,d,g,m,C,T){return t=new sd(t,r,i,C,T),r===1?(r=1,g===!0&&(r|=8)):r=0,g=pt(3,null,null,r),t.current=g,g.stateNode=t,g.memoizedState={element:o,isDehydrated:i,cache:null,transitions:null,pendingSuspenseBoundaries:null},ua(g),t}function ml(t){if(!t)return Qt;t=t._reactInternals;e:{if(Q(t)!==t||t.tag!==1)throw Error(u(170));var r=t;do{switch(r.tag){case 3:r=r.stateNode.context;break e;case 1:if(Je(r.type)){r=r.stateNode.__reactInternalMemoizedMergedChildContext;break e}}r=r.return}while(r!==null);throw Error(u(171))}if(t.tag===1){var i=t.type;if(Je(i))return Ds(t,i,r)}return r}function yl(t){var r=t._reactInternals;if(r===void 0)throw typeof t.render=="function"?Error(u(188)):(t=Object.keys(t).join(","),Error(u(268,t)));return t=ne(r),t===null?null:t.stateNode}function _l(t,r){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var i=t.retryLane;t.retryLane=i!==0&&i<r?i:r}}function Pi(t,r){_l(t,r),(t=t.alternate)&&_l(t,r)}function od(t){return t=ne(t),t===null?null:t.stateNode}function ld(){return null}return n.attemptContinuousHydration=function(t){if(t.tag===13){var r=Qe();st(t,134217728,r),Pi(t,134217728)}},n.attemptDiscreteHydration=function(t){if(t.tag===13){var r=Qe();st(t,1,r),Pi(t,1)}},n.attemptHydrationAtCurrentPriority=function(t){if(t.tag===13){var r=Qe(),i=$t(t);st(t,i,r),Pi(t,i)}},n.attemptSynchronousHydration=function(t){switch(t.tag){case 3:var r=t.stateNode;if(r.current.memoizedState.isDehydrated){var i=qr(r.pendingLanes);i!==0&&(ta(r,i|1),et(r,Fe()),(le&6)===0&&(Fr(),At()))}break;case 13:var o=Qe();ol(function(){return st(t,1,o)}),Pi(t,1)}},n.batchedUpdates=function(t,r){var i=le;le|=1;try{return t(r)}finally{le=i,le===0&&(Fr(),Bn&&At())}},n.createComponentSelector=function(t){return{$$typeof:hi,value:t}},n.createContainer=function(t,r,i,o,d,g,m){return vl(t,r,!1,null,i,o,d,g,m)},n.createHasPseudoClassSelector=function(t){return{$$typeof:ui,value:t}},n.createHydrationContainer=function(t,r,i,o,d,g,m,C,T){return t=vl(i,o,!0,t,d,g,m,C,T),t.context=ml(null),i=t.current,o=Qe(),d=$t(i),g=zt(o,d),g.callback=r!=null?r:null,qt(i,g),t.current.lanes=d,Jr(t,d,o),et(t,o),t},n.createPortal=function(t,r,i){var o=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:p,key:o==null?null:""+o,children:t,containerInfo:r,implementation:i}},n.createRoleSelector=function(t){return{$$typeof:di,value:t}},n.createTestNameSelector=function(t){return{$$typeof:fi,value:t}},n.createTextSelector=function(t){return{$$typeof:ci,value:t}},n.deferredUpdates=function(t){var r=ue,i=Me.transition;try{return Me.transition=null,ue=16,t()}finally{ue=r,Me.transition=i}},n.discreteUpdates=function(t,r,i,o,d){var g=ue,m=Me.transition;try{return Me.transition=null,ue=1,t(r,i,o,d)}finally{ue=g,Me.transition=m,le===0&&Fr()}},n.findAllNodes=Ya,n.findBoundingRects=function(t,r){if(!Vr)throw Error(u(363));r=Ya(t,r),t=[];for(var i=0;i<r.length;i++)t.push(Oh(r[i]));for(r=t.length-1;0<r;r--){i=t[r];for(var o=i.x,d=o+i.width,g=i.y,m=g+i.height,C=r-1;0<=C;C--)if(r!==C){var T=t[C],F=T.x,K=F+T.width,se=T.y,te=se+T.height;if(o>=F&&g>=se&&d<=K&&m<=te){t.splice(r,1);break}else if(o!==F||i.width!==T.width||te<g||se>m){if(!(g!==se||i.height!==T.height||K<o||F>d)){F>o&&(T.width+=F-o,T.x=o),K<d&&(T.width=d-F),t.splice(r,1);break}}else{se>g&&(T.height+=se-g,T.y=g),te<m&&(T.height=m-se),t.splice(r,1);break}}}return t},n.findHostInstance=yl,n.findHostInstanceWithNoPortals=function(t){return t=q(t),t=t!==null?ge(t):null,t===null?null:t.stateNode},n.findHostInstanceWithWarning=function(t){return yl(t)},n.flushControlled=function(t){var r=le;le|=1;var i=Me.transition,o=ue;try{Me.transition=null,ue=1,t()}finally{ue=o,Me.transition=i,le=r,le===0&&(Fr(),At())}},n.flushPassiveEffects=mr,n.flushSync=ol,n.focusWithin=function(t,r){if(!Vr)throw Error(u(363));for(t=Ha(t),r=nl(t,r),r=Array.from(r),t=0;t<r.length;){var i=r[t++];if(!jr(i)){if(i.tag===5&&zh(i.stateNode))return!0;for(i=i.child;i!==null;)r.push(i),i=i.sibling}}return!1},n.getCurrentUpdatePriority=function(){return ue},n.getFindAllNodesFailureDescription=function(t,r){if(!Vr)throw Error(u(363));var i=0,o=[];t=[Ha(t),0];for(var d=0;d<t.length;){var g=t[d++],m=t[d++],C=r[m];if((g.tag!==5||!jr(g))&&(Ua(g,C)&&(o.push(Wa(C)),m++,m>i&&(i=m)),m<r.length))for(g=g.child;g!==null;)t.push(g,m),g=g.sibling}if(i<r.length){for(t=[];i<r.length;i++)t.push(Wa(r[i]));return`findAllNodes was able to match part of the selector:
  `+(o.join(" > ")+`

No matching component was found for:
  `)+t.join(" > ")}return null},n.getPublicRootInstance=function(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return ae(t.child.stateNode);default:return t.child.stateNode}},n.injectIntoDevTools=function(t){if(t={bundleType:t.bundleType,version:t.version,rendererPackageName:t.rendererPackageName,rendererConfig:t.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:f.ReactCurrentDispatcher,findHostInstanceByFiber:od,findFiberByHostInstance:t.findFiberByHostInstance||ld,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.1.0"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__=="undefined")t=!1;else{var r=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(r.isDisabled||!r.supportsFiber)t=!0;else{try{bn=r.inject(t),Rt=r}catch{}t=!!r.checkDCE}}return t},n.isAlreadyRendering=function(){return!1},n.observeVisibleRects=function(t,r,i,o){if(!Vr)throw Error(u(363));t=Ya(t,r);var d=Fh(t,i,o).disconnect;return{disconnect:function(){d()}}},n.registerMutableSourceForHydration=function(t,r){var i=r._getVersion;i=i(r._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[r,i]:t.mutableSourceEagerHydrationData.push(r,i)},n.runWithPriority=function(t,r){var i=ue;try{return ue=t,r()}finally{ue=i}},n.shouldError=function(){return null},n.shouldSuspend=function(){return!1},n.updateContainer=function(t,r,i,o){var d=r.current,g=Qe(),m=$t(d);return i=ml(i),r.context===null?r.context=i:r.pendingContext=i,r=zt(g,m),r.payload={element:t},o=o===void 0?null:o,o!==null&&(r.callback=o),qt(d,r),t=st(d,m,g),t!==null&&Yn(t,d,m),m},n};Ch.exports=xc;var kc=Ch.exports,Ts={exports:{}},Pr={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Pr.ConcurrentRoot=1;Pr.ContinuousEventPriority=4;Pr.DefaultEventPriority=16;Pr.DiscreteEventPriority=1;Pr.IdleEventPriority=536870912;Pr.LegacyRoot=0;Ts.exports=Pr;const Hl={children:!0,ref:!0,key:!0,style:!0,forwardedRef:!0,unstable_applyCache:!0,unstable_applyDrawHitFromCache:!0};let Ul=!1,Wl=!1;const Rs=".react-konva-event",Pc=`ReactKonva: You have a Konva node with draggable = true and position defined but no onDragMove or onDragEnd events are handled.
Position of a node will be changed during drag&drop, so you should update state of the react app as well.
Consider to add onDragMove or onDragEnd events.
For more info see: https://github.com/konvajs/react-konva/issues/256
`,Ec=`ReactKonva: You are using "zIndex" attribute for a Konva node.
react-konva may get confused with ordering. Just define correct order of elements in your render function of a component.
For more info see: https://github.com/konvajs/react-konva/issues/194
`,Tc={};function Xi(h,e,n=Tc){if(e===n&&console.error("same props"),!Ul&&"zIndex"in e&&(console.warn(Ec),Ul=!0),!Wl&&e.draggable){var a=e.x!==void 0||e.y!==void 0,s=e.onDragEnd||e.onDragMove;a&&!s&&(console.warn(Pc),Wl=!0)}for(var l in n)if(!Hl[l]){var u=l.slice(0,2)==="on",f=n[l]!==e[l];if(u&&f){var c=l.substr(2).toLowerCase();c.substr(0,7)==="content"&&(c="content"+c.substr(7,1).toUpperCase()+c.substr(8)),h.off(c,n[l])}var p=!e.hasOwnProperty(l);p&&h.setAttr(l,void 0)}var v=e._useStrictMode,S={},y=!1;const x={};for(var l in e)if(!Hl[l]){var u=l.slice(0,2)==="on",_=n[l]!==e[l];if(u&&_){var c=l.substr(2).toLowerCase();c.substr(0,7)==="content"&&(c="content"+c.substr(7,1).toUpperCase()+c.substr(8)),e[l]&&(x[c]=e[l])}!u&&(e[l]!==n[l]||v&&e[l]!==h.getAttr(l))&&(y=!0,S[l]=e[l])}y&&(h.setAttrs(S),or(h));for(var c in x)h.on(c+Rs,x[c])}function or(h){if(!V.autoDrawEnabled){var e=h.getLayer()||h.getStage();e&&e.batchDraw()}}const kh={},Rc={};_r.Node.prototype._applyProps=Xi;function Ac(h,e){if(typeof e=="string"){console.error(`Do not use plain text as child of Konva.Node. You are using text: ${e}`);return}h.add(e),or(h)}function Mc(h,e,n){let a=_r[h];a||(console.error(`Konva has no node with the type ${h}. Group will be used instead. If you use minimal version of react-konva, just import required nodes into Konva: "import "konva/lib/shapes/${h}"  If you want to render DOM elements as part of canvas tree take a look into this demo: https://konvajs.github.io/docs/react/DOM_Portal.html`),a=_r.Group);const s={},l={};for(var u in e){var f=u.slice(0,2)==="on";f?l[u]=e[u]:s[u]=e[u]}const c=new a(s);return Xi(c,l),c}function Lc(h,e,n){console.error(`Text components are not supported for now in ReactKonva. Your text is: "${h}"`)}function Ic(h,e,n){return!1}function Nc(h){return h}function Oc(){return null}function Gc(){return null}function Dc(h,e,n,a){return Rc}function zc(){}function Fc(h){}function bc(h,e){return!1}function Bc(){return kh}function Hc(){return kh}const Uc=setTimeout,Wc=clearTimeout,Yc=-1;function Xc(h,e){return!1}const Vc=!1,jc=!0,Qc=!0;function Kc(h,e){e.parent===h?e.moveToTop():h.add(e),or(h)}function qc(h,e){e.parent===h?e.moveToTop():h.add(e),or(h)}function Ph(h,e,n){e._remove(),h.add(e),e.setZIndex(n.getZIndex()),or(h)}function Jc(h,e,n){Ph(h,e,n)}function Zc(h,e){e.destroy(),e.off(Rs),or(h)}function $c(h,e){e.destroy(),e.off(Rs),or(h)}function eg(h,e,n){console.error(`Text components are not yet supported in ReactKonva. You text is: "${n}"`)}function tg(h,e,n){}function rg(h,e,n,a,s){Xi(h,s,a)}function ng(h){h.hide(),or(h)}function ig(h){}function ag(h,e){(e.visible==null||e.visible)&&h.show()}function sg(h,e){}function og(h){}function lg(){}const hg=()=>Ts.exports.DefaultEventPriority;var ug=Object.freeze(Object.defineProperty({__proto__:null,appendInitialChild:Ac,createInstance:Mc,createTextInstance:Lc,finalizeInitialChildren:Ic,getPublicInstance:Nc,prepareForCommit:Oc,preparePortalMount:Gc,prepareUpdate:Dc,resetAfterCommit:zc,resetTextContent:Fc,shouldDeprioritizeSubtree:bc,getRootHostContext:Bc,getChildHostContext:Hc,scheduleTimeout:Uc,cancelTimeout:Wc,noTimeout:Yc,shouldSetTextContent:Xc,isPrimaryRenderer:Vc,warnsIfNotActing:jc,supportsMutation:Qc,appendChild:Kc,appendChildToContainer:qc,insertBefore:Ph,insertInContainerBefore:Jc,removeChild:Zc,removeChildFromContainer:$c,commitTextUpdate:eg,commitMount:tg,commitUpdate:rg,hideInstance:ng,hideTextInstance:ig,unhideInstance:ag,unhideTextInstance:sg,clearContainer:og,detachDeletedInstance:lg,getCurrentEventPriority:hg,now:An.exports.unstable_now,idlePriority:An.exports.unstable_IdlePriority,run:An.exports.unstable_runWithPriority},Symbol.toStringTag,{value:"Module"}));function dg(h){const e=kt.useRef();return kt.useLayoutEffect(()=>{e.current=h}),e.current}const fg=h=>{const e=kt.useRef(),n=kt.useRef(),a=kt.useRef(),s=dg(h),l=u=>{const{forwardedRef:f}=h;!f||(typeof f=="function"?f(u):f.current=u)};return kt.useLayoutEffect(()=>(n.current=new _r.Stage({width:h.width,height:h.height,container:e.current}),l(n.current),a.current=Pn.createContainer(n.current,Ts.exports.ConcurrentRoot,!1,null),Pn.updateContainer(h.children,a.current),()=>{!_r.isBrowser||(l(null),Pn.updateContainer(null,a.current,null),n.current.destroy())}),[]),kt.useLayoutEffect(()=>{l(n.current),Xi(n.current,h,s),Pn.updateContainer(h.children,a.current,null)}),kt.createElement("div",{ref:e,accessKey:h.accessKey,className:h.className,role:h.role,style:h.style,tabIndex:h.tabIndex,title:h.title})},pg="Layer",vg="Group",mg="Rect",yg="Line",_g="Text",Pn=kc(ug);Pn.injectIntoDevTools({findHostInstanceByFiber:()=>null,bundleType:0,version:kt.version,rendererPackageName:"react-konva"});const Sg=kt.forwardRef((h,e)=>kt.createElement(fg,{...h,forwardedRef:e}));export{vg as G,gg as K,pg as L,mg as R,Sg as S,_g as T,yg as a};
//# sourceMappingURL=ReactKonvaCore.286c5b85.js.map
