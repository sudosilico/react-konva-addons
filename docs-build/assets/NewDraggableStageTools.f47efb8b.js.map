{"version":3,"file":"NewDraggableStageTools.f47efb8b.js","sources":["../../src/components/NewDraggableStage/NewDraggableStageTools.tsx"],"sourcesContent":["import Konva from \"konva\";\nimport { KonvaEventObject } from \"konva/lib/Node\";\nimport { Vector2d } from \"konva/lib/types\";\nimport { useRef } from \"react\";\nimport { Circle, Group, Rect, Text } from \"react-konva\";\n\nexport function FixedRect({ x, y }: { x: number; y: number }) {\n  return (\n    <>\n      <Rect x={x} y={y + 20} width={50} height={50} fill=\"black\" />\n      <Text x={x} y={y} text=\"Fixed\" fontSize={20} />\n    </>\n  );\n}\n\nexport function DraggableRect({ x, y }: { x: number; y: number }) {\n  return (\n    <Group draggable>\n      <Rect x={x} y={y + 20} width={50} height={50} fill=\"orange\" />\n      <Text x={x} y={y} text=\"Draggable\" fontSize={20} fill=\"orange\" />\n    </Group>\n  );\n}\n\nconst vec2 = (x: number, y: number) => ({ x, y });\n\nfunction clamp2d(value: Vector2d, min: Vector2d, max: Vector2d) {\n  const result = { ...value };\n\n  if (result.x < min.x) {\n    result.x = min.x;\n  }\n\n  if (result.x > max.x) {\n    result.x = max.x;\n  }\n\n  if (result.y < min.y) {\n    result.y = min.y;\n  }\n\n  if (result.y > max.y) {\n    result.y = max.y;\n  }\n\n  return result;\n}\n\nexport function BoundInnerDraggableRect({ x, y }: { x: number; y: number }) {\n  const groupRef = useRef<Konva.Group>(null);\n  const rectRef = useRef<Konva.Rect>(null);\n\n  return (\n    <Group ref={groupRef}>\n      <Rect x={x} y={y + 20} width={100} height={100} fill=\"green\" />\n      <Rect\n        ref={rectRef}\n        x={x}\n        y={y + 20}\n        width={100}\n        height={15}\n        fill=\"black\"\n        opacity={0.2}\n        draggable\n        onDragStart={(e: KonvaEventObject<DragEvent>) => {\n          if (e.currentTarget === rectRef.current) {\n            e.target.stopDrag();\n            groupRef.current?.startDrag(e);\n\n            e.cancelBubble = true;\n          }\n        }}\n      />\n      <Circle x={x + 50} y={y + 50} radius={10} fill=\"red\" draggable />\n      <Text x={x} y={y} text=\"Bound Draggable\" fontSize={20} fill=\"green\" />\n    </Group>\n  );\n}\n"],"names":["x","y","_jsxs","_Fragment","_jsx","useRef","groupRef","rectRef","e"],"mappings":"0KAMO,WAAA,CAAmB,IAAEA,KAAGC,CAC7B,MAAAC,GAAAC,EAAA,CACE,SAAA,CAAAC,EAAA,EAAA,CACE,IAAM,EAAA,EAAA,GAAa,MAAA,GAAW,OAAA,GAAY,KAAA,OAAS,CAAA,EAAAA,EAAA,EAAA,CACnD,IAAM,IAAM,KAAA,QAAW,SAAA,EAAkB,CAAA,CAAA,CAF3C,CAAA,CAKH,CAEM,WAAA,CAAuB,IAAEJ,KAAGC,CACjC,MAAAC,GAAA,EAAA,CACE,UAAA,GAAA,SAAA,CAAAE,EAAA,EAAA,CACE,IAAM,EAAA,EAAA,GAAa,MAAA,GAAW,OAAA,GAAY,KAAA,QAAS,CAAA,EAAAA,EAAA,EAAA,CACnD,IAAM,IAAM,KAAA,YAAW,SAAA,GAAsB,KAAA,QAAS,CAAA,CAAA,CAFxD,CAAA,CAKH,CA0BM,WAAA,CAAiC,IAAEJ,KAAGC,CAC3C,KAAA,GAAAI,iBAAA,IAAA,EACA,EAAAA,iBAAA,IAAA,EAEA,MAAAH,GAAA,EAAA,CACE,IAAA,EAAYI,SAAAA,CAAAA,EAAAA,EAAAA,CACV,IAAM,EAAA,EAAA,GAAa,MAAA,IAAW,OAAA,IAAa,KAAA,OAAU,CAAA,EAAAF,EAAA,EAAA,CACrD,IAAA,EACOG,IACL,EAAA,EAAA,GACO,MAAA,IACA,OAAA,GACC,KAAA,QACH,QAAA,GACI,UAAA,GAPX,YAAA,AAAA,GAAA,OAUI,AAAA,EAAA,gBAAA,EAAA,SACEC,GAAAA,OAAAA,WACAF,KAAAA,UAAAA,QAAAA,UAAAA,GAEAE,EAAAA,aAAAA,GACD,CACF,CAAA,EAAAJ,EAAA,EAAA,CAEH,EAAA,EAAA,GAAe,EAAA,EAAA,GAAW,OAAA,GAAY,KAAA,MAAS,UAAA,EAAe,CAAA,EAAAA,EAAA,EAAA,CAC9D,IAAM,IAAM,KAAA,kBAAW,SAAA,GAA4B,KAAA,OAAS,CAAA,CAAA,CArB9D,CAAA,CAwBH"}