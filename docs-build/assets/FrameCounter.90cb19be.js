import{r}from"./index.54d7971d.js";import{G as V,R as u,a as k,T as h}from"./ReactKonvaCore.2732a337.js";import{r as q,u as O}from"./math.bcc4451c.js";import{a as b,j as i,F as Y}from"./jsx-runtime.ab7a63e8.js";const p=t=>1e3/t,E=t=>1e3/t,T=p(144),_=p(60),j=p(30);function I(t){const l=r.exports.useRef(null),c=r.exports.useRef(null),a=r.exports.useRef(null),o=r.exports.useRef(null),g=r.exports.useRef(null),A=r.exports.useRef({times:[],points:[],maxValue:0,fpsAccumulator:0,fps:0,frames:0,fpsTextY:0}),s=r.exports.useCallback(m=>q(E(Math.max(m,.001)),0,200,t.height,0),[t.height]),S=r.exports.useCallback(m=>{const e=A.current,C=l.current,R=c.current,w=a.current,F=o.current,d=g.current;if(!e||!C||!R||!w||!F||!d)return;const f=Math.min(m.timeDiff,p(1));for(m.timeDiff>e.maxValue&&(e.maxValue=f);e.times.length<t.width-50;)e.times.push(0);for(let n=1;n<e.times.length;n++)e.times[n-1]=e.times[n];e.times[e.times.length-1]=f,e.points.length=0;for(let n=0;n<e.times.length;n++)e.points.push(n),e.points.push(s(e.times[n]));C.points(e.points),e.frames++;const x=500;if(e.fpsAccumulator+=f,e.fpsAccumulator>x){e.fpsAccumulator-=x,e.fps=e.frames,e.frames=0;const n=e.fps*(1e3/x);d.text(`- ${n} fps`),d.y(s(f)-5)}R.y(-5),w.y(s(_)-5),F.y(s(T)-5)},[t.width,s]);return O(S),b(Y,{children:[i(k,{ref:l,stroke:"black",strokeWidth:1}),i(u,{width:50,height:t.height,fill:"white",opacity:.7}),i(u,{width:2,height:t.height,x:50,fill:"black",opacity:.5}),i(h,{ref:c,y:s(j),text:"30 fps -",x:10}),i(h,{ref:a,y:s(_),text:"60 fps -",x:10}),i(h,{ref:o,y:s(T),text:"144 fps -",x:3}),i(u,{x:t.width-50,width:50,height:t.height,fill:"white",opacity:1}),i(u,{width:2,height:t.height,x:t.width-52,fill:"black",opacity:.5}),i(h,{ref:g,text:"0 fps",x:t.width-(50-3),y:2})]})}const K={};function y(t){const{x:l,y:c,width:a,height:o}={...K,...t};return b(V,{x:l,y:c,opacity:.5,listening:!1,clipHeight:o,clipWidth:a,clipX:0,clipY:0,children:[i(u,{width:a,height:o,fill:"white"}),i(I,{width:a,height:o})]})}try{y.displayName="FrameCounter",y.__docgenInfo={description:"",displayName:"FrameCounter",props:{x:{defaultValue:null,description:"",name:"x",required:!1,type:{name:"number"}},y:{defaultValue:null,description:"",name:"y",required:!1,type:{name:"number"}},opacity:{defaultValue:null,description:"",name:"opacity",required:!1,type:{name:"number"}},width:{defaultValue:null,description:"",name:"width",required:!0,type:{name:"number"}},height:{defaultValue:null,description:"",name:"height",required:!0,type:{name:"number"}}}},typeof STORYBOOK_REACT_CLASSES!="undefined"&&(STORYBOOK_REACT_CLASSES["src/components/FrameCounter.tsx#FrameCounter"]={docgenInfo:y.__docgenInfo,name:"FrameCounter",path:"src/components/FrameCounter.tsx#FrameCounter"})}catch{}export{y as F};
//# sourceMappingURL=FrameCounter.90cb19be.js.map
